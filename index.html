<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Ù…Ù†ØµØ© Ù…Ø³ØªØ± Ø¹Ù„Ø§Ø¡ Ø§Ù„Ù†Ø¬Ø§Ø± Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ© Ù„Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠØ©</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Cairo', sans-serif; background: #f3f4f6; color:#111827 }
        .en-font { font-family: 'Poppins', sans-serif; direction:ltr }
        .card-hover:hover { transform: translateY(-6px); box-shadow:0 12px 30px rgba(0,0,0,0.12) }
        .animate-fade-in { animation: fadeIn .45s ease-in-out; }
        @keyframes fadeIn { from {opacity:0; transform:translateY(8px)} to {opacity:1; transform:translateY(0)} }
        .big-icon { font-size: 3rem; }
        .btn-main { background:#111827; color:white }
        .btn-main:hover { background:#000 }
        
        /* Modal Animation */
        .modal-pop { animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        @keyframes popIn { from {opacity:0; transform:scale(0.9) translateY(20px)} to {opacity:1; transform:scale(1) translateY(0)} }
        
        /* Slide Animation for Grammar */
        .slide-in { animation: slideIn 0.5s cubic-bezier(0.25, 1, 0.5, 1) forwards; opacity: 0; transform: translateX(20px); }
        @keyframes slideIn { to { opacity: 1; transform: translateX(0); } }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width:8px }
        ::-webkit-scrollbar-thumb { background:#9ca3af; border-radius:6px }
    </style>
</head>
<body class="min-h-screen flex flex-col">

<nav class="bg-gray-900 text-white shadow-lg sticky top-0 z-50">
    <div class="container mx-auto px-4 py-4 flex items-center justify-between">
        <div class="flex items-center gap-3">
            <div class="bg-yellow-400 w-10 h-10 rounded-full flex items-center justify-center text-black font-bold text-xl">A</div>
            <div>
                <div class="text-lg font-bold">Ù…Ù†ØµØ© Ù…Ø³ØªØ± Ø¹Ù„Ø§Ø¡ Ø§Ù„Ù†Ø¬Ø§Ø± Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ© Ù„Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠØ©</div>
                <div class="text-xs text-gray-300">Mr. Alaa El-Naggar Platform</div>
            </div>
        </div>
        <div id="nav-actions" class="flex items-center gap-3">
            <button id="home-from-any" onclick="goToHome()" class="hidden bg-gray-800 px-3 py-2 rounded-lg text-sm hover:bg-gray-700 transition">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© ğŸ </button>
        </div>
    </div>
</nav>

<button id="mobile-back-btn"
    onclick="backToModels()"
    class="hidden fixed top-24 right-4 bg-white shadow-xl rounded-full w-12 h-12 flex items-center justify-center text-2xl border border-gray-200 hover:bg-gray-100 active:scale-95 transition text-gray-800 z-40">
    âŸµ
</button>

<main class="container mx-auto px-4 py-8 flex-grow relative">

    <div id="intro-overlay" class="fixed inset-0 z-50 bg-black/80 text-white flex flex-col items-center justify-center p-6 backdrop-blur-sm">
        <div class="bg-white rounded-2xl p-8 max-w-xl w-full text-center text-gray-800 shadow-2xl border-4 border-yellow-400 modal-pop">
            <h1 class="text-3xl font-extrabold mb-2">Ù…Ù†ØµØ© Ù…Ø³ØªØ± Ø¹Ù„Ø§Ø¡ Ø§Ù„Ù†Ø¬Ø§Ø±</h1>
            <p class="text-lg font-semibold text-gray-500 mb-6 en-font">Interactive Learning Platform</p>
            <p class="text-sm text-gray-600 mb-6 leading-relaxed">Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø§Ù„Ù…Ù†ØµØ© Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ© Ø§Ù„Ø£Ù‚ÙˆÙ‰ Ù„ØªØ¹Ù„Ù… Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©.<br>Grammar â€¢ Vocabulary â€¢ Story â€¢ Skills</p>
            <div class="mb-6">
                <input id="student-name-intro" type="text" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ø«Ù„Ø§Ø«ÙŠ Ù‡Ù†Ø§ ..." class="w-full p-4 border-2 border-gray-200 rounded-xl text-right focus:border-yellow-400 focus:outline-none text-lg" />
            </div>
            <div class="flex gap-3 justify-center">
                <button class="px-8 py-3 rounded-xl btn-main font-bold text-lg shadow-lg transform hover:scale-105 transition" onclick="startFromIntro()">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¢Ù† ğŸš€</button>
            </div>
        </div>
    </div>

    <section id="home-section" class="animate-fade-in">
        <div class="max-w-4xl mx-auto bg-white rounded-3xl shadow-xl p-8 mb-8 border-t-8 border-yellow-400">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold mb-2 text-gray-800">Ø§Ø®ØªØ± Ø§Ù„ØµÙ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ</h2>
                <p class="text-gray-500">Select your grade to start learning</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div onclick="selectGrade(1)" class="cursor-pointer bg-blue-50 hover:bg-blue-100 p-8 rounded-2xl shadow-sm border-2 border-blue-100 hover:border-blue-300 transition group relative overflow-hidden">
                    <div class="flex flex-col items-center text-center h-full justify-center gap-4">
                        <div class="text-5xl group-hover:scale-110 transition duration-300">1ï¸âƒ£</div>
                        <div>
                            <h3 class="text-xl font-extrabold text-blue-900">Ø§Ù„ØµÙ Ø§Ù„Ø£ÙˆÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ</h3>
                            <p class="text-lg font-bold text-blue-600 en-font mt-1">Prep 1</p>
                        </div>
                    </div>
                </div>

                <div onclick="selectGrade(2)" class="cursor-pointer bg-green-50 hover:bg-green-100 p-8 rounded-2xl shadow-sm border-2 border-green-100 hover:border-green-300 transition group">
                    <div class="flex flex-col items-center text-center h-full justify-center gap-4">
                        <div class="text-5xl group-hover:scale-110 transition duration-300">2ï¸âƒ£</div>
                        <div>
                            <h3 class="text-xl font-extrabold text-green-900">Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù†ÙŠ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ</h3>
                            <p class="text-lg font-bold text-green-600 en-font mt-1">Prep 2</p>
                        </div>
                    </div>
                </div>

                <div onclick="selectGrade(3)" class="cursor-pointer bg-yellow-50 hover:bg-yellow-100 p-8 rounded-2xl shadow-sm border-2 border-yellow-100 hover:border-yellow-400 transition group ring-2 ring-yellow-400 ring-offset-2">
                    <div class="flex flex-col items-center text-center h-full justify-center gap-4">
                        <div class="text-5xl group-hover:scale-110 transition duration-300">3ï¸âƒ£</div>
                        <div>
                            <h3 class="text-xl font-extrabold text-yellow-900">Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù„Ø« Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ</h3>
                            <p class="text-lg font-bold text-yellow-600 en-font mt-1">Prep 3</p>
                            <p class="text-xs text-gray-500 mt-2">Ø§Ù„Ø´Ù‡Ø§Ø¯Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠØ©</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="section-select" class="hidden animate-fade-in max-w-5xl mx-auto">
        <div class="bg-white rounded-3xl shadow-xl p-8 border-t-4 border-gray-200 mb-6">
            <div class="flex justify-between items-center mb-6 border-b pb-4">
                <div>
                    <h2 id="grade-title" class="text-2xl font-bold text-gray-800"></h2>
                    <p id="grade-sub" class="text-gray-500">Ø§Ø®ØªØ± Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø°ÙŠ ØªØ±ÙŠØ¯ Ø§Ù„ØªØ¯Ø±ÙŠØ¨ Ø¹Ù„ÙŠÙ‡:</p>
                </div>
                <div>
                    <button onclick="goToHome()" class="text-sm bg-gray-100 hover:bg-gray-200 text-gray-800 px-4 py-2 rounded-lg font-bold transition">ØªØºÙŠÙŠØ± Ø§Ù„ØµÙ</button>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div onclick="selectSection('grammar_rev')" class="cursor-pointer bg-gradient-to-br from-indigo-900 to-indigo-700 p-6 rounded-2xl shadow-lg hover:shadow-2xl hover:scale-[1.02] transform transition col-span-1 md:col-span-3 text-white relative overflow-hidden group">
                    <div class="absolute top-0 right-0 w-32 h-32 bg-white opacity-10 rounded-full -mr-10 -mt-10 group-hover:scale-150 transition duration-500"></div>
                    <div class="flex items-center gap-5 relative z-10">
                        <div class="text-5xl bg-white/20 p-4 rounded-full backdrop-blur-sm">ğŸ“</div>
                        <div>
                            <h3 class="text-2xl font-bold text-white mb-1">Grammar Revision & Explanation</h3>
                            <p class="text-indigo-200 text-sm font-medium">Ø´Ø±Ø­ Ø§Ù„Ù‚ÙˆØ§Ø¹Ø¯ Ø¨Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ù…ØªØ­Ø±ÙƒØ© + ØªØ¯Ø±ÙŠØ¨Ø§Øª Ø´Ø§Ù…Ù„Ø© (Units 1-6)</p>
                            <span class="inline-block mt-3 bg-yellow-400 text-black text-xs font-bold px-3 py-1 rounded-full">New â€¢ Ø¬Ø¯ÙŠØ¯</span>
                        </div>
                    </div>
                </div>

                <div onclick="selectSection('grammar')" class="cursor-pointer bg-white p-6 rounded-2xl shadow hover:shadow-lg border-l-8 border-indigo-600 card-hover transition">
                    <div class="flex items-center gap-4">
                        <div class="text-4xl bg-indigo-50 p-3 rounded-full">âœï¸</div>
                        <div>
                            <h3 class="text-xl font-bold text-gray-800">Grammar</h3>
                            <p class="text-sm text-gray-500 mt-1">Ø§Ù„Ù‚ÙˆØ§Ø¹Ø¯ ÙˆØ§Ù„Ù€ Rewrite</p>
                        </div>
                    </div>
                </div>

                <div onclick="selectSection('vocabulary')" class="cursor-pointer bg-white p-6 rounded-2xl shadow hover:shadow-lg border-l-8 border-blue-600 card-hover transition">
                    <div class="flex items-center gap-4">
                        <div class="text-4xl bg-blue-50 p-3 rounded-full">ğŸ“š</div>
                        <div>
                            <h3 class="text-xl font-bold text-gray-800">Vocabulary</h3>
                            <p class="text-sm text-gray-500 mt-1">Ø¨Ù†Ùƒ Ø§Ù„ÙƒÙ„Ù…Ø§Øª ÙˆØ§Ù„ØªØ¹Ø±ÙŠÙØ§Øª</p>
                        </div>
                    </div>
                </div>

                <div onclick="selectSection('story')" class="cursor-pointer bg-white p-6 rounded-2xl shadow hover:shadow-lg border-l-8 border-green-600 card-hover transition">
                    <div class="flex items-center gap-4">
                        <div class="text-4xl bg-green-50 p-3 rounded-full">ğŸ“–</div>
                        <div>
                            <h3 class="text-xl font-bold text-gray-800">Story</h3>
                            <p class="text-sm text-gray-500 mt-1">Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ù‚ØµØ©</p>
                        </div>
                    </div>
                </div>

                <div onclick="selectSection('skills')" class="cursor-pointer bg-gradient-to-r from-pink-50 to-white p-6 rounded-2xl shadow hover:shadow-lg border-l-8 border-pink-500 card-hover col-span-1 md:col-span-3 transition group">
                    <div class="flex items-center gap-5">
                        <div class="text-5xl group-hover:scale-110 transition">ğŸ’¡</div>
                        <div>
                            <h3 class="text-2xl font-bold text-pink-900">Writing Skills (Paragraphs)</h3>
                            <p class="text-sm text-pink-600 mt-1 font-semibold">Ù…Ø­ØªÙˆÙ‰ ØªÙØ§Ø¹Ù„ÙŠ: ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¬Ù…Ù„ + ØªÙˆÙ‚Ø¹ Ø§Ù„Ø£Ø­Ø¯Ø§Ø« (Ù…ØªØ±Ø¬Ù…)</p>
                        </div>
                    </div>
                </div>

                <div onclick="selectSection('models')" class="cursor-pointer bg-white p-6 rounded-2xl shadow hover:shadow-lg border-l-8 border-yellow-500 card-hover col-span-1 md:col-span-3 transition">
                    <div class="flex items-center gap-4">
                        <div class="text-4xl bg-yellow-50 p-3 rounded-full">ğŸ“</div>
                        <div>
                            <h3 class="text-xl font-bold text-gray-800">Model Exams</h3>
                            <p class="text-sm text-gray-500 mt-1">Ù†Ù…Ø§Ø°Ø¬ Ø§Ù…ØªØ­Ø§Ù†Ø§Øª Ø´Ø§Ù…Ù„Ø© Ù„Ù„ØªØ¯Ø±ÙŠØ¨</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="grammar-hub" class="hidden animate-fade-in max-w-6xl mx-auto">
        <div class="mb-6 flex justify-between items-center">
            <button onclick="openSectionSelect()" class="text-gray-600 hover:text-gray-900 font-bold flex items-center gap-2">
                <span class="text-xl">ğŸ”™</span> Ø§Ù„Ø¹ÙˆØ¯Ø©
            </button>
            <h2 class="text-2xl font-bold text-indigo-900">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¯Ø±ÙˆØ³ (Grammar Units)</h2>
        </div>
        <div id="grammar-units-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
    </section>

    <section id="lesson-viewer" class="hidden animate-fade-in max-w-5xl mx-auto h-[80vh] flex flex-col">
        <div class="flex justify-between items-center mb-4">
            <button onclick="closeLesson()" class="text-gray-500 hover:text-red-500 font-bold">âœ• Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ø¯Ø±Ø³</button>
            <h2 id="lesson-title" class="text-xl font-bold text-indigo-900 en-font"></h2>
        </div>
        
        <div class="bg-white rounded-3xl shadow-2xl flex-grow overflow-hidden relative border-4 border-indigo-100 flex flex-col">
            <div id="slide-content" class="p-8 md:p-12 flex-grow overflow-y-auto">
                </div>
            
            <div class="bg-gray-50 p-4 flex justify-between items-center border-t border-gray-200">
                <button id="prev-slide" onclick="changeSlide(-1)" class="px-6 py-3 rounded-xl bg-white border border-gray-300 text-gray-600 font-bold hover:bg-gray-100 disabled:opacity-50">Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
                <div id="slide-indicator" class="font-bold text-indigo-600 dir-ltr">1 / 5</div>
                <button id="next-slide" onclick="changeSlide(1)" class="px-6 py-3 rounded-xl bg-indigo-900 text-white font-bold hover:bg-black shadow-lg">Ø§Ù„ØªØ§Ù„ÙŠ</button>
                <button id="start-practice-btn" onclick="startGrammarPractice()" class="hidden px-6 py-3 rounded-xl bg-green-600 text-white font-bold hover:bg-green-700 shadow-lg animate-bounce">Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØ¯Ø±ÙŠØ¨Ø§Øª âœï¸</button>
            </div>
        </div>
    </section>

    <section id="model-section" class="hidden animate-fade-in max-w-6xl mx-auto">
        <div class="mb-6">
            <button onclick="openSectionSelect()" class="text-gray-600 hover:text-gray-900 font-bold flex items-center gap-2">
                <span class="text-xl">ğŸ”™</span> Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø£Ù‚Ø³Ø§Ù…
            </button>
        </div>

        <div class="bg-white rounded-3xl shadow-xl p-8 border-t-8" id="subject-box">
            <h2 id="subject-title" class="text-2xl font-bold text-gray-800 mb-2"></h2>
            <p id="subject-sub" class="text-gray-500 mb-6 font-semibold"></p>

            <div id="model-grid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-5 en-font">
                </div>
        </div>
    </section>

    <section id="quiz-section" class="hidden animate-fade-in max-w-4xl mx-auto">
        <div class="flex justify-between items-center mb-6">
            <button id="text-back-btn" onclick="backToModels()" class="hidden text-gray-600 hover:text-gray-800 flex items-center gap-2 font-bold">â†’ Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø©</button>
            <div></div>
        </div>

        <div class="bg-white rounded-3xl shadow-2xl p-8 border-t-8" id="quiz-container-box">
            <h2 id="quiz-title" class="text-2xl font-bold text-gray-800 mb-6 text-center en-font leading-relaxed"></h2>
            
            <div id="questions-list" class="space-y-6"></div>

            <button id="main-submit-btn" onclick="finishQuiz()" class="w-full mt-10 bg-gray-900 hover:bg-black text-white font-bold py-4 rounded-xl shadow-lg hidden text-lg">
                Submit Answers Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†
            </button>
        </div>
    </section>

    <section id="universal-modal" class="hidden fixed inset-0 z-[100] bg-gray-900/90 flex items-center justify-center p-4 backdrop-blur-sm transition-opacity">
        <div id="modal-content" class="modal-pop bg-white rounded-3xl shadow-2xl p-8 max-w-md w-full text-center relative overflow-hidden">
            </div>
    </section>

</main>

<footer class="bg-gray-900 text-gray-400 text-center py-6 text-sm">
    <p>Mr. Alaa El-Naggar â€” English Platform</p>
    <p class="mt-1 dir-ltr font-mono">01500073600</p>
</footer>

<script>
    // --- 1. NEW GRAMMAR REVISION DATABASE (Unit 1-6 from PDF) ---
    const grammarDb = [
        {
            unit: 1,
            title: "Unit 1: Present Perfect (Ø§Ù„Ù…Ø¶Ø§Ø±Ø¹ Ø§Ù„ØªØ§Ù…)",
            desc: "have/has + P.P., Since, For, Just, Already, Yet",
            color: "from-blue-500 to-blue-700",
            slides: [
                { type: "rule", title: "Present Perfect Formation", content: "<ul><li>I/We/You/They + <b>have ('ve)</b> + P.P</li><li>He/She/It + <b>has ('s)</b> + P.P</li><li><b>Negative:</b> haven't / hasn't + P.P</li></ul><div class='bg-blue-50 p-4 rounded-xl mt-4 text-left en-font'>â€¢ I have written the email.<br>â€¢ She has cooked lunch.<br>â€¢ They haven't mended the car.</div>" },
                { type: "rule", title: "Keywords: Just & Already", content: "<p>ØªØ£ØªÙŠ <b>Just / Already</b> ÙÙŠ Ø§Ù„Ø¬Ù…Ù„Ø© Ø§Ù„Ù…Ø«Ø¨ØªØ© Ø¨ÙŠÙ† have/has ÙˆØ§Ù„ØªØµØ±ÙŠÙ Ø§Ù„Ø«Ø§Ù„Ø«.</p><div class='bg-yellow-50 p-4 rounded-xl mt-4 text-left en-font'>â€¢ He has <b>just</b> eaten lunch.<br>â€¢ She has <b>already</b> washed the dishes.</div><p class='mt-4 text-red-600 font-bold'>Ù…Ù„Ø§Ø­Ø¸Ø©:</p><p>ÙŠÙ…ÙƒÙ† Ø£Ù† ØªØ£ØªÙŠ Already ÙÙŠ Ø¢Ø®Ø± Ø§Ù„Ø¬Ù…Ù„Ø© Ø§Ù„Ù…Ø«Ø¨ØªØ© Ø£Ùˆ Ø§Ù„Ø³Ø¤Ø§Ù„ Ù„Ù„ØªØ¹Ø¬Ø¨.</p><div class='text-left en-font mt-2'>â€¢ Have you finished already? Amazing!</div>" },
                { type: "rule", title: "Keywords: Ever, Never, Yet", content: "<ul class='space-y-3'><li><b>Ever:</b> ÙÙŠ Ø§Ù„Ø³Ø¤Ø§Ù„ (Have you ever...?) Ø£Ùˆ Ø§Ù„ØªÙØ¶ÙŠÙ„ (The tallest man I have ever seen).</li><li><b>Never:</b> Ù„Ù„Ù†ÙÙŠ (I have never visited Aswan).</li><li><b>Yet:</b> ÙÙŠ Ø¢Ø®Ø± Ø§Ù„Ø¬Ù…Ù„Ø© Ø§Ù„Ù…Ù†ÙÙŠØ© ÙˆØ§Ù„Ø³Ø¤Ø§Ù„ (I hasn't finished yet).</li></ul>" },
                { type: "rule", title: "Since vs For", content: "<div class='grid grid-cols-2 gap-4'><div class='bg-green-50 p-3 rounded'><b>Since (Ù…Ù†Ø°)</b><br>Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ø­Ø¯Ø« (Ø³Ù†Ø©ØŒ Ø´Ù‡Ø±ØŒ ÙŠÙˆÙ…)<br>2020, May, Sunday, then, childhood</div><div class='bg-orange-50 p-3 rounded'><b>For (Ù„Ù…Ø¯Ø©)</b><br>Ù…Ø¯Ø© Ø²Ù…Ù†ÙŠØ© Ù…Ø­Ø¯Ø¯Ø©<br>3 years, a week, an hour, a long time</div></div><p class='mt-3 text-sm'>Note: 'Since' can be followed by Past Simple sentence: <i>I have lived here since I was born.</i></p>" },
                { type: "rule", title: "Been vs Gone", content: "<p><b>Has been to:</b> Ø°Ù‡Ø¨ ÙˆØ¹Ø§Ø¯ (Ù„Ù… ÙŠØ¹Ø¯ Ù‡Ù†Ø§Ùƒ).</p><p><b>Has gone to:</b> Ø°Ù‡Ø¨ ÙˆÙ„Ù… ÙŠØ¹Ø¯ (Ù…Ø§Ø²Ø§Ù„ Ù‡Ù†Ø§Ùƒ).</p><div class='bg-gray-100 p-4 rounded mt-2 text-left en-font'>â€¢ He has <b>been</b> to England. (He is back now)<br>â€¢ He has <b>gone</b> to England. (He is still there)</div>" },
                { type: "rule", title: "Passive Voice", content: "<p>Ø§Ù„Ù…Ø¨Ù†ÙŠ Ù„Ù„Ù…Ø¬Ù‡ÙˆÙ„ ÙÙŠ Ø§Ù„Ù…Ø¶Ø§Ø±Ø¹ Ø§Ù„ØªØ§Ù…:</p><h3 class='text-xl font-bold text-center my-3 en-font'>Object + have/has + been + P.P</h3><div class='bg-indigo-50 p-4 rounded text-left en-font'>Active: She has bought the tickets.<br>Passive: The tickets <b>have been bought</b> by her.</div>" }
            ],
            questions: [
                { q: "I ......... (do) my homework already.", type: "text", ans: "have done", hint: "have + pp" },
                { q: "The homework ......... (has done) by her.", type: "text", ans: "has been done", hint: "Passive: has + been + pp" },
                { q: "I have lived here ......... (since) 5 years.", type: "text", ans: "for", hint: "Duration = for" },
                { q: "She ......... (go) to the market and is still there.", type: "text", ans: "has gone", hint: "Gone = didn't return" },
                { q: "Have you finished the exam ......... (yet)? Amazing!", type: "text", ans: "already", hint: "Surprise/Exclamation = already" },
                { q: "Rewrite: He went to Luxor and returned. (been)", type: "text", ans: "He has been to Luxor", hint: "has been to" },
                { q: "Rewrite: I have just met my friend. (short time ago)", type: "text", ans: "I met my friend a short time ago", hint: "Past Simple" }
            ]
        },
        {
            unit: 2,
            title: "Unit 2: Third Conditional (If Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø«Ø§Ù„Ø«Ø©)",
            desc: "If + Past Perfect -> Would have + P.P.",
            color: "from-green-500 to-green-700",
            slides: [
                { type: "rule", title: "Form (Ø§Ù„ØªÙƒÙˆÙŠÙ†)", content: "<h3 class='text-xl font-bold text-center en-font mb-4'>If + Past Perfect (had+pp), <br>Subject + would have + P.P</h3><div class='bg-green-50 p-4 rounded text-left en-font'>â€¢ If he <b>had arrived</b> early, he <b>would have caught</b> the bus.<br>â€¢ She <b>would have succeeded</b> if she <b>had studied</b> well.</div>" },
                { type: "rule", title: "Uses of 'Had'", content: "<p>Ù„Ø§Ø­Ø¸ Ø§Ø³ØªØ®Ø¯Ø§Ù… <b>had had</b>:</p><p>Ø§Ù„Ø£ÙˆÙ„Ù‰ ÙØ¹Ù„ Ù…Ø³Ø§Ø¹Ø¯ØŒ ÙˆØ§Ù„Ø«Ø§Ù†ÙŠØ© ØªØµØ±ÙŠÙ Ø«Ø§Ù„Ø« (Ø¨Ù…Ø¹Ù†Ù‰ ÙŠÙ…Ù„Ùƒ/ÙŠØªÙ†Ø§ÙˆÙ„).</p><div class='bg-yellow-50 p-3 rounded mt-2 text-left en-font'>If I <b>had had</b> money, I would have bought a car.</div>" },
                { type: "rule", title: "So / Because Transformation", content: "<p>Ø¹Ù†Ø¯ Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… IfØŒ Ù†Ø¹ÙƒØ³ Ø§Ù„Ù…Ø¹Ù†Ù‰ (Ù…Ø«Ø¨Øª -> Ù…Ù†ÙÙŠØŒ ÙˆØ§Ù„Ø¹ÙƒØ³) ÙˆÙ†Ø±Ø¬Ø¹ Ø®Ø·ÙˆØ© Ø¨Ø§Ù„Ø²Ù…Ù† Ù„Ù„Ù…Ø§Ø¶ÙŠ Ø§Ù„ØªØ§Ù….</p><div class='bg-red-50 p-4 rounded mt-2 text-left en-font text-sm'><b>Fact:</b> He didn't study, so he failed.<br><b>If:</b> If he <b>had studied</b>, he <b>wouldn't have failed</b>.</div>" }
            ],
            questions: [
                { q: "If she ......... (drive) carefully, she would have avoided the accident.", type: "text", ans: "had driven", hint: "Past Perfect" },
                { q: "If we had gone to the museum, we ......... (see) the exhibition.", type: "text", ans: "would have seen", hint: "would have + pp" },
                { q: "Rewrite: He lost the prize, so he was sad. (If)", type: "text", ans: "If he hadn't lost the prize he wouldn't have been sad", hint: "Reflect opposite" },
                { q: "Rewrite: She was tired because she worked all day. (If)", type: "text", ans: "If she hadn't worked all day she wouldn't have been tired", hint: "" }
            ]
        },
        {
            unit: 3,
            title: "Unit 3: Future Forms",
            desc: "Will + Inf, Passive Future",
            color: "from-purple-500 to-purple-700",
            slides: [
                { type: "rule", title: "Future Simple (Active)", content: "<h3 class='text-center font-bold en-font'>Subject + will / won't + Infinitive</h3><div class='text-left en-font mt-4'>â€¢ They will buy the car.<br>â€¢ They won't buy the car.</div>" },
                { type: "rule", title: "Future Simple (Passive)", content: "<h3 class='text-center font-bold en-font'>Object + will be + P.P</h3><div class='bg-purple-50 p-4 rounded text-left en-font mt-4'>â€¢ The car <b>will be bought</b> by them.<br>â€¢ The homework <b>will be finished</b> soon.</div>" }
            ],
            questions: [
                { q: "The exam papers will ......... (check) by the teacher.", type: "text", ans: "be checked", hint: "will be + pp" },
                { q: "Robots will ......... (use) everywhere.", type: "text", ans: "be used", hint: "Passive" },
                { q: "Rewrite: The engineer will solve the problem. (be)", type: "text", ans: "The problem will be solved by the engineer", hint: "Passive" }
            ]
        },
        {
            unit: 4,
            title: "Unit 4: Modals & Contrast",
            desc: "Must, Should, Ability, Although/While",
            color: "from-pink-500 to-pink-700",
            slides: [
                { type: "rule", title: "Necessity & Advice", content: "<ul class='space-y-2 text-sm'><li><b>Must:</b> Ø§Ù„Ø¶Ø±ÙˆØ±Ø© (It is necessary).</li><li><b>Mustn't:</b> Ø§Ù„ØªØ­Ø±ÙŠÙ… (It is forbidden/banned).</li><li><b>Should:</b> Ø§Ù„Ù†ØµÙŠØ­Ø© (I advise you / If I were you).</li></ul>" },
                { type: "rule", title: "Ability (Ø§Ù„Ù‚Ø¯Ø±Ø©)", content: "<ul class='space-y-2 text-sm'><li><b>Can + Inf</b> = am/is/are able to + Inf</li><li><b>Can</b> = am/is/are capable of + v-ing</li></ul>" },
                { type: "rule", title: "Contrast (Ø§Ù„ØªÙ†Ø§Ù‚Ø¶)", content: "<p><b>Although / Even though:</b> Ø¨Ø§Ù„Ø±ØºÙ… Ù…Ù† (Ø¬Ù…Ù„Ø© ÙƒØ§Ù…Ù„Ø©).</p><div class='text-left en-font text-sm bg-gray-100 p-2'>Although he arrived early, he missed the bus.</div><p class='mt-2'><b>While:</b> Ø¨ÙŠÙ†Ù…Ø§ (Ù„Ù„Ù…Ù‚Ø§Ø±Ù†Ø©).</p><div class='text-left en-font text-sm bg-gray-100 p-2'>I like tennis, while my brother likes football.</div>" }
            ],
            questions: [
                { q: "You ......... (should) make noise in class.", type: "text", ans: "shouldn't/mustn't", hint: "Advice/Prohibition" },
                { q: "It is necessary to work to a plan. (Rewrite: You must...)", type: "text", ans: "You must work to a plan", hint: "" },
                { q: "He arrived early but missed the bus. (Rewrite: Although)", type: "text", ans: "Although he arrived early he missed the bus", hint: "" }
            ]
        },
        {
            unit: 5,
            title: "Unit 5: Imperatives & Sequence",
            desc: "Do/Don't, First, Next, Finally",
            color: "from-orange-500 to-orange-700",
            slides: [
                { type: "rule", title: "Imperatives (Ø§Ù„Ø£Ù…Ø±)", content: "<p><b>Affirmative:</b> Ø§Ù„Ù…ØµØ¯Ø± (Open the door) Ø£Ùˆ Always + Ø§Ù„Ù…ØµØ¯Ø±.</p><p><b>Negative:</b> Don't + Ø§Ù„Ù…ØµØ¯Ø± Ø£Ùˆ Never + Ø§Ù„Ù…ØµØ¯Ø±.</p>" },
                { type: "rule", title: "Sequence Words", content: "<ul class='list-disc pr-5'><li><b>Start:</b> First, To begin with.</li><li><b>Middle:</b> Next, Then, After that.</li><li><b>End:</b> Finally, Lastly.</li></ul>" }
            ],
            questions: [
                { q: "......... (Not) waste your time.", type: "text", ans: "Don't", hint: "Imperative" },
                { q: "......... (Helping) your friends.", type: "text", ans: "Help", hint: "Infinitive" },
                { q: "Rewrite: I advise you not to play in the street. (Don't)", type: "text", ans: "Don't play in the street", hint: "" }
            ]
        },
        {
            unit: 6,
            title: "Unit 6: Reported Speech",
            desc: "Statement transformation, Tense changes",
            color: "from-teal-500 to-teal-700",
            slides: [
                { type: "rule", title: "Reporting Verbs", content: "<ul class='en-font text-left space-y-2'><li>Say â†’ Say</li><li>Say to â†’ Tell</li><li>Said â†’ Said</li><li>Said to â†’ Told</li></ul>" },
                { type: "rule", title: "Tense Changes", content: "<p>Ù†Ø­ÙˆÙ„ Ø§Ù„Ø²Ù…Ù† Ù„Ù„Ù…Ø§Ø¶ÙŠ (Backshift):</p><ul class='en-font text-left text-sm bg-gray-50 p-3'><li>Present Simple â†’ Past Simple</li><li>Present Continuous â†’ Past Continuous</li><li>Will â†’ Would</li><li>Can â†’ Could</li></ul>" },
                { type: "rule", title: "Time & Place Expressions", content: "<div class='grid grid-cols-2 text-sm en-font gap-2'><div class='bg-red-50'>now â†’ then</div><div class='bg-red-50'>this â†’ that</div><div class='bg-red-50'>here â†’ there</div><div class='bg-red-50'>tomorrow â†’ the following day</div><div class='bg-red-50'>yesterday â†’ the day before</div></div>" }
            ],
            questions: [
                { q: "Omar said that you ......... (look) calm.", type: "text", ans: "looked", hint: "Past Simple" },
                { q: "Ali said, 'I will visit you.' (Rewrite: Ali told me that...)", type: "text", ans: "Ali told me that he would visit me", hint: "will -> would" },
                { q: "They said, 'We are playing now.' (Rewrite: then)", type: "text", ans: "They said that they were playing then", hint: "now -> then" }
            ]
        }
    ];

    // --- 2. RESTORING FULL DATABASE (Original Data) ---
    const db = {
        story: { title: "Story: The School Garden", color: "border-green-600", models: 20, questions: [] },
        rewrite: { title: "Grammar: Rewrite", color: "border-indigo-600", models: 8, questions: [] },
        vocab: { title: "Vocabulary Bank", color: "border-blue-600", models: 10, questions: [] }
    };

    // --- Story Bank ---
    const storyBank = [
        { q:"Zeina noticed the playground was...", type:"mcq", opts:["empty","colorful","green","noisy"], ans:"empty" },
        { q:"Who helped Zeina?", type:"mcq", opts:["Nancy","Teacher","Nobody","Parents"], ans:"Nancy" },
        { q:"What did they plant?", type:"mcq", opts:["Vegetables","Candy","Trees","Nothing"], ans:"Vegetables" },
        { q:"The garden became a ...", type:"mcq", opts:["symbol","disaster","mess","secret"], ans:"symbol" },
        { q:"Why was Zeina nervous?", type:"text", ans:"Speaking to council", hint:"Public speaking" },
        { q:"What is a leader?", type:"text", ans:"Honest and helpful", hint:"Not bossy" }
    ];
    for(let i=1; i<=20; i++){
        storyBank.forEach((q, idx) => {
            db.story.questions.push({ ...q, m: i, q: `Model ${i} Q${idx+1}: ${q.q}` });
        });
    }

    // --- Rewrite Bank ---
    const rewriteBank = [
        { q:"He didn't study, so he failed. (If)", type:"text", ans:"If he had studied he wouldn't have failed", hint:"Type 3 Conditional" },
        { q:"'I am happy,' he said. (that)", type:"text", ans:"He said that he was happy", hint:"Indirect Speech" },
        { q:"She eats an apple. (eaten)", type:"text", ans:"An apple is eaten by her", hint:"Passive Voice" },
        { q:"It is necessary to sleep early. (must)", type:"text", ans:"You must sleep early", hint:"Modals" },
        { q:"He ran fast but missed the bus. (Although)", type:"text", ans:"Although he ran fast he missed the bus", hint:"Contrast" },
        { q:"I advise you to study. (should)", type:"text", ans:"You should study", hint:"Advice" },
        { q:"They are playing football. (played)", type:"text", ans:"Football is being played", hint:"Passive Continuous" },
        { q:"She can swim. (able)", type:"text", ans:"She is able to swim", hint:"Ability" },
        { q:"I haven't seen him for ages. (since)", type:"text", ans:"It's been ages since I saw him", hint:"Time Expressions" },
        { q:"Don't make noise. (Stop)", type:"text", ans:"Stop making noise", hint:"Imperative" }
    ];
    for(let i=1; i<=8; i++){
        rewriteBank.forEach((q, idx) => {
            db.rewrite.questions.push({ ...q, m: i, q: `Model ${i} Q${idx+1}: ${q.q}` });
        });
    }

    // --- Full Vocabulary Bank ---
    const fullVocabBank = [
        { q:"Self-... means learning more about who you are.", type:"mcq", opts:["discovery","esteem","confidence","denial"], ans:"discovery" },
        { q:"To ... is to have a high opinion of someone or something.", type:"mcq", opts:["find","value","look","identify"], ans:"value" },
        { q:"... means being famous.", type:"mcq", opts:["Popularity","Curiosity","Responsibility","Individuality"], ans:"Popularity" },
        { q:"... is where someone comes from.", type:"mcq", opts:["Backbone","Background","Pack","Backward"], ans:"Background" },
        { q:"The word ... means one of a kind.", type:"mcq", opts:["unique","ordinary","common","usual"], ans:"unique" },
        { q:"At school, many students think they must look or act a certain way to ...", type:"mcq", opts:["pull out","turn on","look for","fit in"], ans:"fit in" },
        { q:"My ... isn't about what others see, it's about who I really am inside.", type:"mcq", opts:["culture","country","identity","nation"], ans:"identity" },
        { q:"My background is simple: I come from a family that ... hard work and kindness.", type:"mcq", opts:["dislikes","hates","values","refuses"], ans:"values" },
        { q:"These beliefs ... my character and help me know what's right.", type:"mcq", opts:["shape","shade","chop","share"], ans:"shape" },
        { q:"I may not be the loudest person in class, but I believe listening is one of my ...", type:"mcq", opts:["strengths","possessions","weakness","power"], ans:"strengths" },
        { q:"Sometimes, I feel pressure from ... media to change how I act or dress.", type:"mcq", opts:["society","sociable","social","mass"], ans:"social" },
        { q:"I remind myself that being real is more important than being ...", type:"mcq", opts:["unpopular","infamous","unknown","popular"], ans:"popular" },
        { q:"Through self-discovery, I've found more ...", type:"mcq", opts:["confidence","concrete","carts","carrots"], ans:"confidence" },
        { q:"I now know that being ... doesn't mean being strange - it means being real.", type:"mcq", opts:["unique","useful","uniform","unicorn"], ans:"unique" },
        { q:"With resilience and self-..., I can grow into the person I want to be.", type:"mcq", opts:["strength","special","esteem","system"], ans:"esteem" },
        { q:"To ... is to help or encourage somebody.", type:"mcq", opts:["support","depress","value","identify"], ans:"support" },
        { q:"... is the process of growing physically, mentally or emotionally.", type:"mcq", opts:["Growth","Trai","Support","Start"], ans:"Growth" },
        { q:"... is a particular quality in your personality.", type:"mcq", opts:["A","Trait","Toy","Support"], ans:"Trait" },
        { q:"... is the qualities that make somebody different from other people.", type:"mcq", opts:["Individuality","Integrity","Engineering","Mind"], ans:"Individuality" },
        { q:"To be ... is to feel sure about your abilities, qualities or decisions.", type:"mcq", opts:["greedy","honest","confident","unsure"], ans:"confident" },
        { q:"To be ... is to be interested in discovering new things.", type:"mcq", opts:["careful","useful","confident","curious"], ans:"curious" },
        { q:"To be ... is to adapt to challenging situations.", type:"mcq", opts:["resilient","unique","alone","curly"], ans:"resilient" },
        { q:"What challenges do you think you can ...", type:"mcq", opts:["face","er","tongue","nose"], ans:"face" },
        { q:"What experience shapes our ...?", type:"mcq", opts:["identity","unit","definition","identify"], ans:"identity" },
        { q:"How can support change your ...?", type:"mcq", opts:["character","portrait","map","chart"], ans:"character" },
        { q:"Nour stood in front of the mirror ... her blazer.", type:"mcq", opts:["adjusting","speaking","playing","reading"], ans:"adjusting" },
        { q:"Good ... is the key to strong relationships.", type:"mcq", opts:["communication","action","suggestion","fiction"], ans:"communication" },
        { q:"The way you talk and listen affects your ... with others.", type:"mcq", opts:["connection","collection","picture","photo"], ans:"connection" },
        { q:"Communication includes your tone of voice and your ... expression.", type:"mcq", opts:["nasal","legs","facial","hands"], ans:"facial" },
        { q:"Even a simple smile or a text ... can show someone you care.", type:"mcq", opts:["massage","lesson","book","message"], ans:"message" },
        { q:"Social media and texting make it easy to stay ... touch.", type:"mcq", opts:["on","at","in","of"], ans:"in" },
        { q:"... can lead to conflict or distance between people.", type:"mcq", opts:["Miscommunication","Connection","Relation","Identity"], ans:"Miscommunication" },
        { q:"Being honest and ... helps to strengthen the bond.", type:"mcq", opts:["supportive","discouraging","setback","naughty"], ans:"respectful" },
        { q:"The best way to ... problems is through calm discussion.", type:"mcq", opts:["rise","increase","resolve","reconnect"], ans:"resolve" },
        { q:"... is failure to understand correctly.", type:"mcq", opts:["Misunderstanding","Misuse","Mislead","Mass media"], ans:"Misunderstanding" },
        { q:"... is a relationship or link between people.", type:"mcq", opts:["Correction","Connection","Collection","Action"], ans:"Connection" },
        { q:"A ... is a strong connection between people.", type:"mcq", opts:["bold","bald","bond","band"], ans:"bond" },
        { q:"To ... is to share thoughts, feelings or ideas.", type:"mcq", opts:["communicate","allow","let","join"], ans:"communicate" },
        { q:"To ... is to find a solution to a problem.", type:"mcq", opts:["resolve","salute","say","tell"], ans:"resolve" },
        { q:"The ... people show care and regard for others.", type:"mcq", opts:["respectful","shy","ashamed","lazy"], ans:"respectful" },
        { q:"Those who are ... are ready to give help.", type:"mcq", opts:["frustrated","upset","supportive","annoyed"], ans:"supportive" },
        { q:"A ... is a movement showing emotion.", type:"mcq", opts:["position","Connection","communication","gesture"], ans:"gesture" },
        { q:"To ... is to build a relationship again after distance.", type:"mcq", opts:["reconnect","relocate","rewrite","reread"], ans:"reconnect" },
        { q:"To be ... is to be given power or confidence.", type:"mcq", opts:["powered","empowered","respected","regarded"], ans:"empowered" },
        { q:"... means not giving up when things are hard.", type:"mcq", opts:["Resilience","Trust","Confidence","Rely"], ans:"Resilience" },
        { q:"To be ... is to be open and clear about everything.", type:"mcq", opts:["vague","secret","mysterious","frank"], ans:"frank" },
        { q:"A ... is a plan or a suggestion for others.", type:"mcq", opts:["proposal","plan","map","chart"], ans:"proposal" },
        { q:"... means not giving up until achieving something.", type:"mcq", opts:["Frustration","Connection","Determination","Contact"], ans:"Determination" },
        { q:"To be ... is to feel annoyed or upset.", type:"mcq", opts:["happy","frustrated","pleased","excited"], ans:"frustrated" },
        { q:"The synonym of ... is uncomfortably or embarrassing.", type:"mcq", opts:["nice","ugly","awkward","fat"], ans:"awkward" },
        { q:"The absence of sound is known as ...", type:"mcq", opts:["silence","laughter","happiness","connection"], ans:"silence" },
        { q:"My brothers and my sisters are my ...", type:"mcq", opts:["parents","siblings","grandparents","ancestors"], ans:"siblings" },
        { q:"The word wood can be an adjective by adding...", type:"mcq", opts:["suffix","adj","prep","en"], ans:"en" },
        { q:"To make 'tradition' an adjective, add suffix ...", type:"mcq", opts:["en","tion","al","ice"], ans:"al" },
        { q:"Footballers nowadays ... a lot of money.", type:"mcq", opts:["win","gain","earn","beat"], ans:"earn" },
        { q:"Omar sat at the table and his parents sat across ... him.", type:"mcq", opts:["on","from","among","over"], ans:"from" },
        { q:"I can't study well due to the noise ...", type:"mcq", opts:["discussion","distraction","connection","quietness"], ans:"distraction" },
        { q:"That small act of communication helped them ...", type:"mcq", opts:["rearrange","replay","redo","reconnect"], ans:"reconnect" },
        { q:"Zeina decided to ... responsibility for her idea.", type:"mcq", opts:["take","make","do","write"], ans:"take" },
        { q:"She felt hurt but she showed ...", type:"mcq", opts:["weakness","resilience","disadvantages","drawbacks"], ans:"resilience" },
        { q:"Everyone ... a nice place to learn and eat.", type:"mcq", opts:["deserves","detests","dislikes","hates"], ans:"deserves" },
        { q:"The hospital will be controlled by Artificial ...", type:"mcq", opts:["Intelligence","lake","milk","limbs"], ans:"Intelligence" },
        { q:"AI will be used in many ... like medicine.", type:"mcq", opts:["classes","fields","farms","clubs"], ans:"fields" },
        { q:"Artificial Intelligence can ... music.", type:"mcq", opts:["do","feel","imagine","compose"], ans:"compose" },
        { q:"Robots and AI can't truly understand ...", type:"mcq", opts:["orders","technology","emotions","music"], ans:"emotions" },
        { q:"A robot is a machine which can ... tasks.", type:"mcq", opts:["make","take","give","do"], ans:"do" },
        { q:"Artificial Intelligence allows the robot to ... decisions.", type:"mcq", opts:["do","make","read","put"], ans:"make" },
        { q:"Scientists will ... the current technology.", type:"mcq", opts:["prove","disapprove","improve","approve"], ans:"improve" },
        { q:"We add prefix ... to give opposite of connection.", type:"mcq", opts:["im","in","ir","dis"], ans:"dis" },
        { q:"There are lots of nice AI ... on my mobile.", type:"mcq", opts:["apps","apes","abilities","apples"], ans:"apps" },
        { q:"In schools robots can help students ... languages.", type:"mcq", opts:["learn","miss","forget","do"], ans:"learn" },
        { q:"AI and robots are not ... They are different.", type:"mcq", opts:["different","useful","good","the same"], ans:"the same" },
        { q:"Robots and AI still have ... as they don't understand emotion.", type:"mcq", opts:["limits","laws","rules","roles"], ans:"limits" },
        { q:"Try again. Don't be ...", type:"mcq", opts:["good","nice","brilliant","disappointed"], ans:"disappointed" },
        { q:"Disappointed is the synonym of ...", type:"mcq", opts:["content","happy","upset","pleased"], ans:"upset" },
        { q:"Abnormal is the antonym of ...", type:"mcq", opts:["unusual","strange","odd","normal"], ans:"normal" },
        { q:"The robots can't react to your ... on your face.", type:"mcq", opts:["smile","noise","sound","voice"], ans:"smile" },
        { q:"The synonym of kind is ...", type:"mcq", opts:["cruel","unkind","bad","friendly"], ans:"friendly" },
        { q:"The ... of our project is lack of money.", type:"mcq", opts:["weakness","kindness","actress","hostess"], ans:"weakness" },
        { q:"To give opposite of 'honest', add prefix ...", type:"mcq", opts:["il","ir","dis","un"], ans:"dis" },
        { q:"... are important topics or problems.", type:"mcq", opts:["Choices","Decisions","Issues","Tools"], ans:"Issues" },
        { q:"... are jobs or actions that need to be done.", type:"mcq", opts:["Skulls","Tasks","Tusks","Matters"], ans:"Tasks" },
        { q:"... means very modern, developed or complex.", type:"mcq", opts:["Ancient","Old","New","Advanced"], ans:"Advanced" },
        { q:"... is the way someone or something acts.", type:"mcq", opts:["Behaviour","Medicine","Robot","Vacuum"], ans:"Behaviour" },
        { q:"... is the point where something stops.", type:"mcq", opts:["Light","Land","Reduce","Limit"], ans:"Limit" },
        { q:"To ... is to change something to make it your own.", type:"mcq", opts:["custom","customize","increase","reduce"], ans:"customize" },
        { q:"The ... is a link between people, things or ideas.", type:"mcq", opts:["connection","pollution","bank","lack"], ans:"connection" },
        { q:"To ... is to see or become aware of something.", type:"mcq", opts:["hear","taste","listen","notice"], ans:"notice" },
        { q:"... means taking actions without waiting.", type:"mcq", opts:["Initiative","End","Finish","Spend"], ans:"Initiative" },
        { q:"... is money or gifts given to help a project.", type:"mcq", opts:["Helping","Giving","Presenting","Donation"], ans:"Donation" },
        { q:"To ... is to stop doing something because it is bad.", type:"mcq", opts:["quite","calm","quit","quiet"], ans:"quit" },
        { q:"To be ... is to feel sad when something fails.", type:"mcq", opts:["respected","disappointed","advanced","happy"], ans:"disappointed" },
        { q:"The word instantly is similar to ...", type:"mcq", opts:["immediately","near","close","far"], ans:"immediately" },
        { q:"... includes inventions and improvements.", type:"mcq", opts:["Invitation","Public","Fiction","Innovation"], ans:"Innovation" },
        { q:"All homework was ... checked instantly.", type:"mcq", opts:["instantly","instant","once","quick"], ans:"instantly" },
        { q:"The robot teacher didn't ... when students felt tired.", type:"mcq", opts:["remind","think","notice","mention"], ans:"notice" },
        { q:"Technology can't replace the care and ... of a teacher.", type:"mcq", opts:["home","house","connection","place"], ans:"connection" },
        { q:"Zeina asked for ...", type:"mcq", opts:["donation","water","food","clothes"], ans:"donation" },
        { q:"They learnt how to ... for different plants.", type:"mcq", opts:["care","look","search","wait"], ans:"care" },
        { q:"... means the total time a person spends on screens.", type:"mcq", opts:["Night mode","Smartboard","Screen time","Free time"], ans:"Screen time" },
        { q:"Teenagers ... through social media.", type:"mcq", opts:["scroll","spend","stay","send"], ans:"scroll" },
        { q:"It is important to ... screen use.", type:"mcq", opts:["limit","end","balance","watch"], ans:"balance" },
        { q:"Spending too much time on screens affects you ...", type:"mcq", opts:["mind","mentally","physically","critically"], ans:"mentally" },
        { q:"To avoid side ..., take short breaks.", type:"mcq", opts:["reflects","effects","facts","affects"], ans:"effects" },
        { q:"An ... is a person who knows a lot.", type:"mcq", opts:["expert","architect","engineer","email"], ans:"expert" },
        { q:"To ... is to keep things equal.", type:"mcq", opts:["Role","Balance","Screen","Tradition"], ans:"Balance" },
        { q:"... means useful or helpful.", type:"mcq", opts:["Playing","Paying","collecting","Productive"], ans:"Productive" },
        { q:"Cutting-... is something new and advanced.", type:"mcq", opts:["edge","wing","rug","leg"], ans:"edge" },
        { q:"Something that takes attention away is ...", type:"mcq", opts:["attract","attraction","distraction","connection"], ans:"distraction" },
        { q:"We should caring ... the earth.", type:"mcq", opts:["after","for","to","after"], ans:"for" },
        { q:"To be ... means not to be easily distracted.", type:"mcq", opts:["distracted","lazy","focused","sad"], ans:"focused" },
        { q:"To find ... is to find answers to problems.", type:"mcq", opts:["solutions","chemicals","gases","fertilizers"], ans:"solutions" },
        { q:"Eco-... means not harmful to nature.", type:"mcq", opts:["friend","friendly","ebook","relative"], ans:"friendly" },
        { q:"Too much screen time can cause ...", type:"mcq", opts:["pollution","smoke","stress","strategy"], ans:"stress" },
        { q:"Young people are the hope of the ...", type:"mcq", opts:["past years","future","past","old days"], ans:"future" },
        { q:"I want to feel more ... control of my time.", type:"mcq", opts:["on","in","at","of"], ans:"in" },
        { q:"Students started eating ... fresh tomatoes.", type:"mcq", opts:["with","by","in","of"], ans:"with" },
        { q:"A ... is a list of planned activities.", type:"mcq", opts:["map","chart","schedule","card"], ans:"schedule" },
        { q:"A ... is a way of looking at something.", type:"mcq", opts:["picture","photo","image","perspective"], ans:"perspective" },
        { q:"... means the ability to make new ideas.", type:"mcq", opts:["Resilience","Creativity","Confidence","Trust"], ans:"Creativity" },
        { q:"The ... is a simple model of a design.", type:"mcq", opts:["port","portion","prototype","typewriter"], ans:"prototype" },
        { q:"Designers are everyday problem ...", type:"mcq", opts:["doers","solvers","makers","users"], ans:"solvers" },
        { q:"Designers ... things that are useful.", type:"mcq", opts:["show","see","create","ignore"], ans:"create" },
        { q:"Great designers explore ideas from different ...", type:"mcq", opts:["perspectives","corners","places","platforms"], ans:"perspectives" },
        { q:"Creativity is important in ...", type:"mcq", opts:["resign","design","desert","risk"], ans:"design" },
        { q:"Designers think ... the function of things.", type:"mcq", opts:["in","on","about","off"], ans:"about" },
        { q:"The word job is a synonym to ...", type:"mcq", opts:["interaction","function","fact","reaction"], ans:"function" },
        { q:"Students put books in their ...", type:"mcq", opts:["package","suitcases","backpacks","backs"], ans:"backpacks" },
        { q:"What ... are you? I am 75 kg.", type:"mcq", opts:["height","weight","much","heavy"], ans:"weight" },
        { q:"Designing includes style and ...", type:"mcq", opts:["safety","insecurity","danger","risk"], ans:"safety" },
        { q:"Design thinking means caring ... people.", type:"mcq", opts:["of","with","in","about"], ans:"about" },
        { q:"To be a designer, you need a ... to improve.", type:"mcq", opts:["drought","desire","distance","dessert"], ans:"desire" },
        { q:"What is a prototype? A simple ...", type:"mcq", opts:["medal","disc","model","middle"], ans:"model" },
        { q:"... style, what is important?", type:"mcq", opts:["Beside","Besides","Close","Next"], ans:"Besides" },
        { q:"The word ... means what something is designed to do.", type:"mcq", opts:["function","desire","style","stylish"], ans:"function" },
        { q:"I value a strong ... with my family.", type:"mcq", opts:["ship","shape","relationship","share"], ans:"relationship" },
        { q:"Her new outfit was ... and comfortable.", type:"mcq", opts:["vanish","style","stylish","foolish"], ans:"stylish" },
        { q:"... means effective and suitable.", type:"mcq", opts:["Practical","Partial","Physical","Mental"], ans:"Practical" },
        { q:"The antonym of relaxed is ...", type:"mcq", opts:["nervous","calm","quiet","comfortable"], ans:"nervous" },
        { q:"We should help the ... feel welcome.", type:"mcq", opts:["corners","newcomers","news","corks"], ans:"newcomers" },
        { q:"The school garden has an impact ... students.", type:"mcq", opts:["of","on","about","in"], ans:"on" },
        { q:"Students were more careful ... the garden.", type:"mcq", opts:["of","with","by","at"], ans:"with" },
        { q:"... the end of the school day, we went home.", type:"mcq", opts:["At","In","Of","About"], ans:"At" },
        { q:"... is the science of farming.", type:"mcq", opts:["Industry","Agriculture","Engineering","Medicine"], ans:"Agriculture" },
        { q:"... means working hard at something.", type:"mcq", opts:["Developed","Deduction","Dedicated","Danger"], ans:"Dedicated" },
        { q:"... is to suggest many ideas quickly.", type:"mcq", opts:["Think","Brain","Mind","Brainstorm"], ans:"Brainstorm" },
        { q:"A ... is similar to a friend.", type:"mcq", opts:["body","lady","rude","buddy"], ans:"buddy" },
        { q:"Her drawings ... others to add art.", type:"mcq", opts:["inspired","sent","discouraged","refused"], ans:"inspired" },
        { q:"Being honest helps people ... you.", type:"mcq", opts:["confuse","doubts","trust","disagree"], ans:"trust" },
        { q:"After the long day, he decided to ... the job.", type:"mcq", opts:["join","quit","enjoy","build"], ans:"quit" },
        { q:"She is ... to her studies.", type:"mcq", opts:["lazy","late","angry","dedicated"], ans:"dedicated" },
        { q:"I ... my friends and ask for advice.", type:"mcq", opts:["trust","blame","teach","copy"], ans:"trust" },
        { q:"We should use strengths ...", type:"mcq", opts:["badly","rudely","wisely","foolishly"], ans:"wisely" },
        { q:"In a careful way is ...", type:"mcq", opts:["physically","critically","emotionally","naturally"], ans:"critically" },
        { q:"To start something is to ...", type:"mcq", opts:["end","conclude","spark","shock"], ans:"spark" },
        { q:"... is related to right or wrong.", type:"mcq", opts:["Molar","Rural","Moral","Role"], ans:"Moral" },
        { q:"Sharing feelings is ...", type:"mcq", opts:["empathy","creativity","activity","industry"], ans:"empathy" },
        { q:"Different kinds means ...", type:"mcq", opts:["unique","various","basic","careful"], ans:"various" },
        { q:"... are ways of thinking or point of view.", type:"mcq", opts:["Points","Purposes","Perspectives","Discussions"], ans:"Perspectives" },
        { q:"Reading stories can ... how we think.", type:"mcq", opts:["improve","damage","destroy","spoil"], ans:"improve" },
        { q:"Through stories we see how characters ...", type:"mcq", opts:["face","meet","respond","solve"], ans:"respond" },
        { q:"We develop ... and learn solutions.", type:"mcq", opts:["cruelty","unkindness","empathy","hatred"], ans:"empathy" },
        { q:"We should think ... about choices.", type:"mcq", opts:["critical","physically","mental","critically"], ans:"critically" },
        { q:"Stories help us reflect ... our lives.", type:"mcq", opts:["in","on","of","about"], ans:"on" },
        { q:"Stories ... our imagination.", type:"mcq", opts:["spark","share","depart","speak"], ans:"spark" },
        { q:"Stories help us grow ...", type:"mcq", opts:["physically","critically","emotionally","tall"], ans:"emotionally" },
        { q:"... the end, reading stories is fun.", type:"mcq", opts:["On","At","Of","In"], ans:"In" },
        { q:"Reading makes us more ... of the world.", type:"mcq", opts:["know","see","hear","aware"], ans:"aware" },
        { q:"A ... is a suggestion.", type:"mcq", opts:["recommendation","situation","connection","influence"], ans:"recommendation" },
        { q:"A ... is a formal discussion.", type:"mcq", opts:["problem","story","character","debate"], ans:"debate" },
        { q:"... means not fair.", type:"mcq", opts:["fair","just","unfair","unable"], ans:"unfair" },
        { q:"... means in an honest way.", type:"mcq", opts:["Physically","Honestly","Emotionally","Mentally"], ans:"Honestly" },
        { q:"The word ... means unable to move.", type:"mcq", opts:["steal","steel","took","stuck"], ans:"stuck" },
        { q:"You shouldn't be angry when someone ...", type:"mcq", opts:["agrees","disagrees","accepts","supports"], ans:"disagrees" },
        { q:"Don't shout to win ...", type:"mcq", opts:["arguments","advice","suggestion","recommendation"], ans:"arguments" },
        { q:"Stories can ... how we react.", type:"mcq", opts:["influence","do","make","take"], ans:"influence" },
        { q:"You should stay ... during debate.", type:"mcq", opts:["worried","calm","nervous","stressed"], ans:"calm" },
        { q:"Don't ... others' opinions.", type:"mcq", opts:["respect","regard","ignore","value"], ans:"ignore" },
        { q:"The ... story is imaginary.", type:"mcq", opts:["fiction","non-fiction","historical","folk"], ans:"fiction" },
        { q:"... stories are traditional with lessons.", type:"mcq", opts:["fiction","non-fiction","historical","folk"], ans:"folk" },
        { q:"... stories are true.", type:"mcq", opts:["fiction","non-fiction","imaginary","fictional"], ans:"non-fiction" },
        { q:"... are exciting journeys.", type:"mcq", opts:["Fables","Cartoons","Adventure stories","Historical"], ans:"Adventure stories" },
        { q:"... stories are based on real past events.", type:"mcq", opts:["Fables","fiction","Adventure","Historical"], ans:"Historical" },
        { q:"... are short tales with moral.", type:"mcq", opts:["Fiction","Non-fiction","Fables","Folk"], ans:"Fables" },
        { q:"Giving power is ...", type:"mcq", opts:["empowering","fuel","energy","strong"], ans:"empowering" },
        { q:"An ... is a strong desire.", type:"mcq", opts:["nutrition","ambition","production","culture"], ans:"ambition" },
        { q:"... means not giving up.", type:"mcq", opts:["recommendation","suggestion","determination","situation"], ans:"determination" },
        { q:"The word ... means unique.", type:"mcq", opts:["common","usual","ordinary","special"], ans:"special" },
        { q:"The word ... means bravery.", type:"mcq", opts:["courage","weakness","fiction","fable"], ans:"courage" },
        { q:"... is ability to recover.", type:"mcq", opts:["Value","Resilience","Respect","Honesty"], ans:"Resilience" },
        { q:"Zeina was elected ...", type:"mcq", opts:["student","pupil","president","architect"], ans:"president" },
        { q:"She learnt about being a real ...", type:"mcq", opts:["doctor","teacher","tailor","leader"], ans:"leader" },
        { q:"Being a leader ... doing everything alone.", type:"mcq", opts:["help","say","doesn't mean","tell"], ans:"doesn't mean" },
        { q:"Add prefix ... to power for verb.", type:"mcq", opts:["em","il","ir","im"], ans:"em" },
        { q:"The wise leader should be ...", type:"mcq", opts:["transplant","transparent","transport","translate"], ans:"transparent" },
        { q:"She wanted to help students ... their school.", type:"mcq", opts:["exchange","leave","live","change"], ans:"change" },
        { q:"What new role did Zeina ...?", type:"mcq", opts:["take on","take off","take after","take away"], ans:"take on" },
        { q:"Every good story has a ...", type:"mcq", opts:["resolution","view","value","respect"], ans:"resolution" }
    ];

    let vIdx = 0;
    for(let i=1;i<=10;i++){
        for(let j=0;j<15;j++){
            if(vIdx < fullVocabBank.length) {
                db.vocab.questions.push({ ...fullVocabBank[vIdx], m:i, q: `Model ${i} Q${j+1}: ${fullVocabBank[vIdx].q}` });
                vIdx++;
            }
        }
    }

    // --- Skills Data ---
    const skillsData = [
        { 
            id: "u1_1", 
            title: "Who I Am Beyond Looks", 
            sentences: [
                {en: "My name is Ahmed and I am a student in first preparatory.", ar: "Ø§Ø³Ù…ÙŠ Ø£Ø­Ù…Ø¯ ÙˆØ£Ù†Ø§ Ø·Ø§Ù„Ø¨ ÙÙŠ Ø§Ù„ØµÙ Ø§Ù„Ø£ÙˆÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ."},
                {en: "I think what is inside me is more important than how I look.", ar: "Ø£Ø¹ØªÙ‚Ø¯ Ø£Ù† Ù…Ø§ Ø¨Ø¯Ø§Ø®Ù„ÙŠ Ø£Ù‡Ù… Ø¨ÙƒØ«ÙŠØ± Ù…Ù† Ù…Ø¸Ù‡Ø±ÙŠ."},
                {en: "Looks can change, but good values stay forever.", ar: "Ø§Ù„Ù…Ø¸Ø§Ù‡Ø± Ù‚Ø¯ ØªØªØºÙŠØ±ØŒ Ù„ÙƒÙ† Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„Ø·ÙŠØ¨Ø© ØªØ¨Ù‚Ù‰ Ù„Ù„Ø£Ø¨Ø¯."},
                {en: "I treat people with kindness and respect.", ar: "Ø£Ø¹Ø§Ù…Ù„ Ø§Ù„Ù†Ø§Ø³ Ø¨Ù„Ø·Ù ÙˆØ§Ø­ØªØ±Ø§Ù…."},
                {en: "This is what makes a person truly beautiful.", ar: "ÙˆÙ‡Ø°Ø§ Ù…Ø§ ÙŠØ¬Ø¹Ù„ Ø§Ù„Ø´Ø®Øµ Ø¬Ù…ÙŠÙ„Ø§Ù‹ Ø­Ù‚Ø§Ù‹."}
            ]
        },
        { 
            id: "u1_2", 
            title: "Self-Discovery", 
            sentences: [
                {en: "My name is Leila and I am 15 years old.", ar: "Ø§Ø³Ù…ÙŠ Ù„ÙŠÙ„Ù‰ ÙˆØ¹Ù…Ø±ÙŠ 15 Ø¹Ø§Ù…Ø§Ù‹."},
                {en: "I live in Alexandria and come from a big Egyptian family that respects traditions.", ar: "Ø£Ø¹ÙŠØ´ ÙÙŠ Ø§Ù„Ø¥Ø³ÙƒÙ†Ø¯Ø±ÙŠØ© ÙˆØ£Ù†Ø­Ø¯Ø± Ù…Ù† Ø¹Ø§Ø¦Ù„Ø© Ù…ØµØ±ÙŠØ© ÙƒØ¨ÙŠØ±Ø© ØªØ­ØªØ±Ù… Ø§Ù„ØªÙ‚Ø§Ù„ÙŠØ¯."},
                {en: "For me, identity is not just my name or where I live.", ar: "Ø¨Ø§Ù„Ù†Ø³Ø¨Ø© Ù„ÙŠØŒ Ø§Ù„Ù‡ÙˆÙŠØ© Ù„ÙŠØ³Øª Ù…Ø¬Ø±Ø¯ Ø§Ø³Ù…ÙŠ Ø£Ùˆ Ù…ÙƒØ§Ù† Ø¥Ù‚Ø§Ù…ØªÙŠ."},
                {en: "It is my personality, my values, and my dreams.", ar: "Ø¥Ù†Ù‡Ø§ Ø´Ø®ØµÙŠØªÙŠØŒ ÙˆÙ‚ÙŠÙ…ÙŠØŒ ÙˆØ£Ø­Ù„Ø§Ù…ÙŠ."},
                {en: "Being unique means being myself.", ar: "Ø£Ù† Ø£ÙƒÙˆÙ† ÙØ±ÙŠØ¯Ø© ÙŠØ¹Ù†ÙŠ Ø£Ù† Ø£ÙƒÙˆÙ† Ù†ÙØ³ÙŠ."},
                {en: "With confidence and respect, I can build a better future.", ar: "Ø¨Ø§Ù„Ø«Ù‚Ø© ÙˆØ§Ù„Ø§Ø­ØªØ±Ø§Ù…ØŒ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ø¨Ù†Ø§Ø¡ Ù…Ø³ØªÙ‚Ø¨Ù„ Ø£ÙØ¶Ù„."}
            ]
        },
        { 
            id: "u1_3", 
            title: "The Mirror Moment", 
            sentences: [
                {en: "Nour was a Grade 9 student who often felt different from others.", ar: "ÙƒØ§Ù†Øª Ù†ÙˆØ± Ø·Ø§Ù„Ø¨Ø© ÙÙŠ Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù„Ø« Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ ØªØ´Ø¹Ø± ØºØ§Ù„Ø¨Ø§Ù‹ Ø£Ù†Ù‡Ø§ Ù…Ø®ØªÙ„ÙØ© Ø¹Ù† Ø§Ù„Ø¢Ø®Ø±ÙŠÙ†."},
                {en: "She looked at herself in the mirror and wished she could fit in.", ar: "Ù†Ø¸Ø±Øª Ø¥Ù„Ù‰ Ù†ÙØ³Ù‡Ø§ ÙÙŠ Ø§Ù„Ù…Ø±Ø¢Ø© ÙˆØªÙ…Ù†Øª Ù„Ùˆ ØªØ³ØªØ·ÙŠØ¹ Ø§Ù„Ø§Ù†Ø¯Ù…Ø§Ø¬."},
                {en: "At school, she stayed quiet and preferred drawing.", ar: "ÙÙŠ Ø§Ù„Ù…Ø¯Ø±Ø³Ø©ØŒ ÙƒØ§Ù†Øª ØªØ¸Ù„ Ù‡Ø§Ø¯Ø¦Ø© ÙˆØªÙØ¶Ù„ Ø§Ù„Ø±Ø³Ù…."},
                {en: "One day, her teacher asked the students to make an Identity Map.", ar: "ÙÙŠ Ø£Ø­Ø¯ Ø§Ù„Ø£ÙŠØ§Ù…ØŒ Ø·Ù„Ø¨ Ø§Ù„Ù…Ø¹Ù„Ù… Ù…Ù† Ø§Ù„Ø·Ù„Ø§Ø¨ Ø¹Ù…Ù„ Ø®Ø±ÙŠØ·Ø© Ù„Ù„Ù‡ÙˆÙŠØ©."},
                {en: "Nour decided to draw herself with her glasses and curly hair.", ar: "Ù‚Ø±Ø±Øª Ù†ÙˆØ± Ø£Ù† ØªØ±Ø³Ù… Ù†ÙØ³Ù‡Ø§ Ø¨Ù†Ø¸Ø§Ø±ØªÙ‡Ø§ ÙˆØ´Ø¹Ø±Ù‡Ø§ Ø§Ù„Ù…Ø¬Ø¹Ø¯."},
                {en: "She realized that being different was her strength.", ar: "Ø£Ø¯Ø±ÙƒØª Ø£Ù† Ø§Ø®ØªÙ„Ø§ÙÙ‡Ø§ ÙƒØ§Ù† Ù‡Ùˆ Ù…ØµØ¯Ø± Ù‚ÙˆØªÙ‡Ø§."}
            ]
        },
        { 
            id: "u1_4", 
            title: "Dr. Magdi Yacoub", 
            sentences: [
                {en: "Dr. Magdi Yacoub was born in Egypt in 1935.", ar: "ÙˆÙ„Ø¯ Ø§Ù„Ø¯ÙƒØªÙˆØ± Ù…Ø¬Ø¯ÙŠ ÙŠØ¹Ù‚ÙˆØ¨ ÙÙŠ Ù…ØµØ± Ø¹Ø§Ù… 1935."},
                {en: "As a child, he enjoyed reading about science and medicine.", ar: "ÙƒØ·ÙÙ„ØŒ Ø§Ø³ØªÙ…ØªØ¹ Ø¨Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© Ø¹Ù† Ø§Ù„Ø¹Ù„ÙˆÙ… ÙˆØ§Ù„Ø·Ø¨."},
                {en: "When his father's sister died from a heart disease, he felt very sad.", ar: "Ø¹Ù†Ø¯Ù…Ø§ ØªÙˆÙÙŠØª Ø¹Ù…ØªÙ‡ Ø¨Ø³Ø¨Ø¨ Ù…Ø±Ø¶ ÙÙŠ Ø§Ù„Ù‚Ù„Ø¨ØŒ Ø´Ø¹Ø± Ø¨Ø­Ø²Ù† Ø´Ø¯ÙŠØ¯."},
                {en: "He decided to study medicine and become a heart surgeon.", ar: "Ù‚Ø±Ø± Ø¯Ø±Ø§Ø³Ø© Ø§Ù„Ø·Ø¨ ÙˆØ£Ù† ÙŠØµØ¨Ø­ Ø¬Ø±Ø§Ø­ Ù‚Ù„Ø¨."},
                {en: "He saved thousands of lives and gave hope to many families.", ar: "Ø£Ù†Ù‚Ø° Ø¢Ù„Ø§Ù Ø§Ù„Ø£Ø±ÙˆØ§Ø­ ÙˆØ£Ø¹Ø·Ù‰ Ø§Ù„Ø£Ù…Ù„ Ù„Ù„Ø¹Ø¯ÙŠØ¯ Ù…Ù† Ø§Ù„Ø¹Ø§Ø¦Ù„Ø§Øª."},
                {en: "His story shows us that our goals may come from a problem we want to solve.", ar: "ØªØ¸Ù‡Ø± Ù‚ØµØªÙ‡ Ø£Ù† Ø£Ù‡Ø¯Ø§ÙÙ†Ø§ Ù‚Ø¯ ØªØ£ØªÙŠ Ù…Ù† Ù…Ø´ÙƒÙ„Ø© Ù†Ø±ÙŠØ¯ Ø­Ù„Ù‡Ø§."}
            ]
        },
        { 
            id: "u2_1", 
            title: "This Is Me (Values)", 
            sentences: [
                {en: "I believe that honesty, kindness, and respect are important values in my life.", ar: "Ø£Ø¤Ù…Ù† Ø£Ù† Ø§Ù„ØµØ¯Ù‚ØŒ ÙˆØ§Ù„Ù„Ø·ÙØŒ ÙˆØ§Ù„Ø§Ø­ØªØ±Ø§Ù… Ù‚ÙŠÙ… Ù…Ù‡Ù…Ø© ÙÙŠ Ø­ÙŠØ§ØªÙŠ."},
                {en: "These values have shaped my personal identity and made me feel more confident.", ar: "Ù‡Ø°Ù‡ Ø§Ù„Ù‚ÙŠÙ… Ø´ÙƒÙ„Øª Ù‡ÙˆÙŠØªÙŠ Ø§Ù„Ø´Ø®ØµÙŠØ© ÙˆØ¬Ø¹Ù„ØªÙ†ÙŠ Ø£Ø´Ø¹Ø± Ø¨Ø«Ù‚Ø© Ø£ÙƒØ¨Ø±."},
                {en: "I come from a simple background, and have learned through self-discovery that being unique is a strength.", ar: "Ø£Ù†Ø­Ø¯Ø± Ù…Ù† Ø®Ù„ÙÙŠØ© Ø¨Ø³ÙŠØ·Ø©ØŒ ÙˆØªØ¹Ù„Ù…Øª Ù…Ù† Ø®Ù„Ø§Ù„ Ø§ÙƒØªØ´Ø§Ù Ø§Ù„Ø°Ø§Øª Ø£Ù† Ø§Ù„ØªÙ…ÙŠØ² Ù‚ÙˆØ©."},
                {en: "Listening carefully and respecting others' opinions are important values.", ar: "Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ø¨Ø¹Ù†Ø§ÙŠØ© ÙˆØ§Ø­ØªØ±Ø§Ù… Ø¢Ø±Ø§Ø¡ Ø§Ù„Ø¢Ø®Ø±ÙŠÙ† Ù‚ÙŠÙ… Ù…Ù‡Ù…Ø©."},
                {en: "Honesty and kindness are the real power in life.", ar: "Ø§Ù„ØµØ¯Ù‚ ÙˆØ§Ù„Ù„Ø·Ù Ù‡Ù…Ø§ Ø§Ù„Ù‚ÙˆØ© Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© ÙÙŠ Ø§Ù„Ø­ÙŠØ§Ø©."}
            ]
        },
        { 
            id: "u2_2", 
            title: "Stay Connected", 
            sentences: [
                {en: "Good communication is very important in our lives because it helps us build strong relationships with family and friends.", ar: "Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ø¬ÙŠØ¯ Ù…Ù‡Ù… Ø¬Ø¯Ø§Ù‹ ÙÙŠ Ø­ÙŠØ§ØªÙ†Ø§ Ù„Ø£Ù†Ù‡ ÙŠØ³Ø§Ø¹Ø¯Ù†Ø§ Ø¹Ù„Ù‰ Ø¨Ù†Ø§Ø¡ Ø¹Ù„Ø§Ù‚Ø§Øª Ù‚ÙˆÙŠØ© Ù…Ø¹ Ø§Ù„Ø¹Ø§Ø¦Ù„Ø© ÙˆØ§Ù„Ø£ØµØ¯Ù‚Ø§Ø¡."},
                {en: "Communication is not only about words.", ar: "Ø§Ù„ØªÙˆØ§ØµÙ„ Ù„ÙŠØ³ Ù…Ø¬Ø±Ø¯ ÙƒÙ„Ù…Ø§Øª ÙÙ‚Ø·."},
                {en: "It also includes our tone of voice, body language, and even a simple smile.", ar: "Ø¥Ù†Ù‡ ÙŠØ´Ù…Ù„ Ø£ÙŠØ¶Ø§Ù‹ Ù†Ø¨Ø±Ø© Ø§Ù„ØµÙˆØªØŒ ÙˆÙ„ØºØ© Ø§Ù„Ø¬Ø³Ø¯ØŒ ÙˆØ­ØªÙ‰ Ø§Ù„Ø§Ø¨ØªØ³Ø§Ù…Ø© Ø§Ù„Ø¨Ø³ÙŠØ·Ø©."},
                {en: "Social media makes it easy to stay in touch, but sometimes messages are misunderstood.", ar: "ÙˆØ³Ø§Ø¦Ù„ Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ ØªØ¬Ø¹Ù„ Ø§Ù„Ø¨Ù‚Ø§Ø¡ Ø¹Ù„Ù‰ Ø§ØªØµØ§Ù„ Ø³Ù‡Ù„Ø§Ù‹ØŒ Ù„ÙƒÙ† Ø£Ø­ÙŠØ§Ù†Ø§Ù‹ ØªÙÙÙ‡Ù… Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø¨Ø´ÙƒÙ„ Ø®Ø§Ø·Ø¦."},
                {en: "To avoid this, we should have open and honest conversations.", ar: "Ù„ØªØ¬Ù†Ø¨ Ø°Ù„ÙƒØŒ ÙŠØ¬Ø¨ Ø£Ù† Ù†Ø¬Ø±ÙŠ Ù…Ø­Ø§Ø¯Ø«Ø§Øª ØµØ±ÙŠØ­Ø© ÙˆØµØ§Ø¯Ù‚Ø©."}
            ]
        },
        { 
            id: "u2_3", 
            title: "Communication Lessons", 
            sentences: [
                {en: "Mariam believes that good communication is very important in relationships.", ar: "ØªØ¤Ù…Ù† Ù…Ø±ÙŠÙ… Ø£Ù† Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ø¬ÙŠØ¯ Ù…Ù‡Ù… Ø¬Ø¯Ø§Ù‹ ÙÙŠ Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª."},
                {en: "She shared a story about a misunderstanding she had with a friend during a group project.", ar: "Ø´Ø§Ø±ÙƒØª Ù‚ØµØ© Ø¹Ù† Ø³ÙˆØ¡ ØªÙØ§Ù‡Ù… Ø­Ø¯Ø« Ù…Ø¹ ØµØ¯ÙŠÙ‚Ø© Ø£Ø«Ù†Ø§Ø¡ Ù…Ø´Ø±ÙˆØ¹ Ø¬Ù…Ø§Ø¹ÙŠ."},
                {en: "They kept sending messages, but the problem became worse.", ar: "Ø¸Ù„ÙˆØ§ ÙŠØ±Ø³Ù„ÙˆÙ† Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ØŒ Ù„ÙƒÙ† Ø§Ù„Ù…Ø´ÙƒÙ„Ø© Ø£ØµØ¨Ø­Øª Ø£Ø³ÙˆØ£."},
                {en: "When they finally met and talked in person, they understood each other better and solved the issue.", ar: "Ø¹Ù†Ø¯Ù…Ø§ ØªÙ‚Ø§Ø¨Ù„ÙˆØ§ ÙˆØªØ­Ø¯Ø«ÙˆØ§ ÙˆØ¬Ù‡Ø§Ù‹ Ù„ÙˆØ¬Ù‡ Ø£Ø®ÙŠØ±Ø§Ù‹ØŒ ÙÙ‡Ù…ÙˆØ§ Ø¨Ø¹Ø¶Ù‡Ù… Ø¨Ø´ÙƒÙ„ Ø£ÙØ¶Ù„ ÙˆØ­Ù„ÙˆØ§ Ø§Ù„Ù…Ø´ÙƒÙ„Ø©."},
                {en: "From this experience, Mariam learned that communication is not just about words, but also about respect.", ar: "Ù…Ù† Ù‡Ø°Ù‡ Ø§Ù„ØªØ¬Ø±Ø¨Ø©ØŒ ØªØ¹Ù„Ù…Øª Ù…Ø±ÙŠÙ… Ø£Ù† Ø§Ù„ØªÙˆØ§ØµÙ„ Ù„ÙŠØ³ Ù…Ø¬Ø±Ø¯ ÙƒÙ„Ù…Ø§ØªØŒ Ø¨Ù„ Ù‡Ùˆ Ø§Ø­ØªØ±Ø§Ù… Ø£ÙŠØ¶Ø§Ù‹."}
            ]
        },
        { 
            id: "u2_4", 
            title: "The Silent Dinner", 
            sentences: [
                {en: "Omar sat at the dinner table with his parents, but the room was silent.", ar: "Ø¬Ù„Ø³ Ø¹Ù…Ø± Ø¹Ù„Ù‰ Ù…Ø§Ø¦Ø¯Ø© Ø§Ù„Ø¹Ø´Ø§Ø¡ Ù…Ø¹ ÙˆØ§Ù„Ø¯ÙŠÙ‡ØŒ Ù„ÙƒÙ† Ø§Ù„ØºØ±ÙØ© ÙƒØ§Ù†Øª ØµØ§Ù…ØªØ©."},
                {en: "A year ago, their dinners were full of laughter, but now things had changed.", ar: "Ù‚Ø¨Ù„ Ø¹Ø§Ù…ØŒ ÙƒØ§Ù† Ø¹ÙŠØ´Ø§Ø¤Ù‡Ù… Ù…Ù„ÙŠØ¦Ø§Ù‹ Ø¨Ø§Ù„Ø¶Ø­ÙƒØŒ Ù„ÙƒÙ† Ø§Ù„Ø¢Ù† ØªØºÙŠØ±Øª Ø§Ù„Ø£Ù…ÙˆØ±."},
                {en: "School stress and phones made the family stop talking.", ar: "Ø¶ØºÙˆØ· Ø§Ù„Ø¯Ø±Ø§Ø³Ø© ÙˆØ§Ù„Ù‡ÙˆØ§ØªÙ Ø¬Ø¹Ù„Øª Ø§Ù„Ø¹Ø§Ø¦Ù„Ø© ØªØªÙˆÙ‚Ù Ø¹Ù† Ø§Ù„Ø­Ø¯ÙŠØ«."},
                {en: "Omar felt sad and decided to break the silence.", ar: "Ø´Ø¹Ø± Ø¹Ù…Ø± Ø¨Ø§Ù„Ø­Ø²Ù† ÙˆÙ‚Ø±Ø± ÙƒØ³Ø± Ø§Ù„ØµÙ…Øª."},
                {en: "He said, 'I miss how we used to talk.'", ar: "Ù‚Ø§Ù„: 'Ø£ÙØªÙ‚Ø¯ ÙƒÙŠÙ ÙƒÙ†Ø§ Ù†ØªØ­Ø¯Ø«.'"},
                {en: "His parents agreed and promised to fix things.", ar: "ÙˆØ§ÙÙ‚ ÙˆØ§Ù„Ø¯Ø§Ù‡ ÙˆÙˆØ¹Ø¯ÙˆØ§ Ø¨Ø¥ØµÙ„Ø§Ø­ Ø§Ù„Ø£Ù…ÙˆØ±."},
                {en: "That short conversation helped them reconnect as a family.", ar: "ØªÙ„Ùƒ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© Ø§Ù„Ù‚ØµÙŠØ±Ø© Ø³Ø§Ø¹Ø¯ØªÙ‡Ù… Ø¹Ù„Ù‰ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªÙˆØ§ØµÙ„ ÙƒØ¹Ø§Ø¦Ù„Ø©."}
            ]
        },
        { 
            id: "u3_1", 
            title: "AI vs Robots", 
            sentences: [
                {en: "Artificial Intelligence (AI) and robots are not the same.", ar: "Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ ÙˆØ§Ù„Ø±ÙˆØ¨ÙˆØªØ§Øª Ù„ÙŠØ³Ø§ Ù†ÙØ³ Ø§Ù„Ø´ÙŠØ¡."},
                {en: "A robot is a machine that can move and do tasks, like putting bottles in a box.", ar: "Ø§Ù„Ø±ÙˆØ¨ÙˆØª Ù‡Ùˆ Ø¢Ù„Ø© ÙŠÙ…ÙƒÙ†Ù‡Ø§ Ø§Ù„ØªØ­Ø±Ùƒ ÙˆØ§Ù„Ù‚ÙŠØ§Ù… Ø¨Ù…Ù‡Ø§Ù…ØŒ Ù…Ø«Ù„ ÙˆØ¶Ø¹ Ø§Ù„Ø²Ø¬Ø§Ø¬Ø§Øª ÙÙŠ ØµÙ†Ø¯ÙˆÙ‚."},
                {en: "AI is the brain that helps robots learn and make decisions.", ar: "Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù‡Ùˆ Ø§Ù„Ø¹Ù‚Ù„ Ø§Ù„Ø°ÙŠ ÙŠØ³Ø§Ø¹Ø¯ Ø§Ù„Ø±ÙˆØ¨ÙˆØªØ§Øª Ø¹Ù„Ù‰ Ø§Ù„ØªØ¹Ù„Ù… ÙˆØ§ØªØ®Ø§Ø° Ø§Ù„Ù‚Ø±Ø§Ø±Ø§Øª."},
                {en: "For example, a robot vacuum cleaner with AI can remember the shape of a room.", ar: "Ø¹Ù„Ù‰ Ø³Ø¨ÙŠÙ„ Ø§Ù„Ù…Ø«Ø§Ù„ØŒ Ø§Ù„Ù…ÙƒÙ†Ø³Ø© Ø§Ù„Ø±ÙˆØ¨ÙˆØªÙŠØ© Ø§Ù„Ù…Ø²ÙˆØ¯Ø© Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ ÙŠÙ…ÙƒÙ†Ù‡Ø§ ØªØ°ÙƒØ± Ø´ÙƒÙ„ Ø§Ù„ØºØ±ÙØ©."},
                {en: "However, AI and robots have limits because they cannot understand emotions.", ar: "ÙˆÙ…Ø¹ Ø°Ù„ÙƒØŒ Ù„Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ ÙˆØ§Ù„Ø±ÙˆØ¨ÙˆØªØ§Øª Ø­Ø¯ÙˆØ¯ Ù„Ø£Ù†Ù‡Ø§ Ù„Ø§ ØªØ³ØªØ·ÙŠØ¹ ÙÙ‡Ù… Ø§Ù„Ù…Ø´Ø§Ø¹Ø±."},
                {en: "Robots cannot feel like humans do.", ar: "Ø§Ù„Ø±ÙˆØ¨ÙˆØªØ§Øª Ù„Ø§ ÙŠÙ…ÙƒÙ†Ù‡Ø§ Ø£Ù† ØªØ´Ø¹Ø± Ù…Ø«Ù„ Ø§Ù„Ø¨Ø´Ø±."}
            ]
        },
        { 
            id: "u3_2", 
            title: "AI and Creativity", 
            sentences: [
                {en: "Artificial Intelligence is becoming more creative in our world today.", ar: "Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø£ØµØ¨Ø­ Ø£ÙƒØ«Ø± Ø¥Ø¨Ø¯Ø§Ø¹Ø§Ù‹ ÙÙŠ Ø¹Ø§Ù„Ù…Ù†Ø§ Ø§Ù„ÙŠÙˆÙ…."},
                {en: "It can make pictures, music, and poems.", ar: "ÙŠÙ…ÙƒÙ†Ù‡ ØµÙ†Ø¹ Ø§Ù„ØµÙˆØ±ØŒ ÙˆØ§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ØŒ ÙˆØ§Ù„Ù‚ØµØ§Ø¦Ø¯."},
                {en: "For example, if you write 'a cat flying', some AI programs can turn these words into an image.", ar: "Ø¹Ù„Ù‰ Ø³Ø¨ÙŠÙ„ Ø§Ù„Ù…Ø«Ø§Ù„ØŒ Ø¥Ø°Ø§ ÙƒØªØ¨Øª 'Ù‚Ø·Ø© ØªØ·ÙŠØ±'ØŒ ÙŠÙ…ÙƒÙ† Ù„Ø¨Ø¹Ø¶ Ø¨Ø±Ø§Ù…Ø¬ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ ØªØ­ÙˆÙŠÙ„ Ù‡Ø°Ù‡ Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø¥Ù„Ù‰ ØµÙˆØ±Ø©."},
                {en: "This happens because AI studies thousands of human artworks.", ar: "ÙŠØ­Ø¯Ø« Ù‡Ø°Ø§ Ù„Ø£Ù† Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ ÙŠØ¯Ø±Ø³ Ø¢Ù„Ø§Ù Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ Ø§Ù„ÙÙ†ÙŠØ© Ø§Ù„Ø¨Ø´Ø±ÙŠØ©."},
                {en: "However, AI cannot feel emotions like human artists.", ar: "ÙˆÙ…Ø¹ Ø°Ù„ÙƒØŒ Ù„Ø§ ÙŠØ³ØªØ·ÙŠØ¹ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø§Ù„Ø´Ø¹ÙˆØ± Ø¨Ø§Ù„Ø¹ÙˆØ§Ø·Ù Ù…Ø«Ù„ Ø§Ù„ÙÙ†Ø§Ù†ÙŠÙ† Ø§Ù„Ø¨Ø´Ø±."},
                {en: "Still, AI helps humans to be more innovative.", ar: "ÙˆÙ…Ø¹ Ø°Ù„ÙƒØŒ ÙŠØ³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø§Ù„Ø¨Ø´Ø± Ù„ÙŠÙƒÙˆÙ†ÙˆØ§ Ø£ÙƒØ«Ø± Ø§Ø¨ØªÙƒØ§Ø±Ø§Ù‹."}
            ]
        },
        { 
            id: "u3_3", 
            title: "A Robot Teacher", 
            sentences: [
                {en: "One day, Sara and her classmates met a surprising new teacher, a shiny robot.", ar: "ÙÙŠ ÙŠÙˆÙ… Ù…Ù† Ø§Ù„Ø£ÙŠØ§Ù…ØŒ Ù‚Ø§Ø¨Ù„Øª Ø³Ø§Ø±Ø© ÙˆØ²Ù…Ù„Ø§Ø¤Ù‡Ø§ Ù…Ø¹Ù„Ù…Ø§Ù‹ Ø¬Ø¯ÙŠØ¯Ø§Ù‹ Ù…ÙØ§Ø¬Ø¦Ø§Ù‹ØŒ ÙˆÙ‡Ùˆ Ø±ÙˆØ¨ÙˆØª Ù„Ø§Ù…Ø¹."},
                {en: "It explained that it would teach them using Artificial Intelligence.", ar: "Ø´Ø±Ø­ Ø§Ù„Ø±ÙˆØ¨ÙˆØª Ø£Ù†Ù‡ Ø³ÙŠØ¹Ù„Ù…Ù‡Ù… Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ."},
                {en: "Homework was checked instantly, and learning became faster.", ar: "ÙƒØ§Ù† ÙŠØªÙ… ÙØ­Øµ Ø§Ù„ÙˆØ§Ø¬Ø¨Ø§Øª ÙÙˆØ±Ø§Ù‹ØŒ ÙˆØ£ØµØ¨Ø­ Ø§Ù„ØªØ¹Ù„Ù… Ø£Ø³Ø±Ø¹."},
                {en: "However, after a few days, Sara realized something was missing.", ar: "Ù„ÙƒÙ† Ø¨Ø¹Ø¯ Ø¨Ø¶Ø¹Ø© Ø£ÙŠØ§Ù…ØŒ Ø£Ø¯Ø±ÙƒØª Ø³Ø§Ø±Ø© Ø£Ù† Ù‡Ù†Ø§Ùƒ Ø´ÙŠØ¦Ø§Ù‹ Ù…ÙÙ‚ÙˆØ¯Ø§Ù‹."},
                {en: "The robot teacher didn't smile or notice students' feelings.", ar: "Ø§Ù„Ù…Ø¹Ù„Ù… Ø§Ù„Ø±ÙˆØ¨ÙˆØª Ù„Ù… ÙŠÙƒÙ† ÙŠØ¨ØªØ³Ù… Ø£Ùˆ ÙŠÙ„Ø§Ø­Ø¸ Ù…Ø´Ø§Ø¹Ø± Ø§Ù„Ø·Ù„Ø§Ø¨."},
                {en: "Technology cannot replace the care and connection of a real teacher.", ar: "Ø§Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§ Ù„Ø§ ÙŠÙ…ÙƒÙ†Ù‡Ø§ Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù‡ØªÙ…Ø§Ù… ÙˆØªÙˆØ§ØµÙ„ Ø§Ù„Ù…Ø¹Ù„Ù… Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ."}
            ]
        },
        { 
            id: "u3_4", 
            title: "Egypt: Innovation", 
            sentences: [
                {en: "Egypt is a country where the past meets the future.", ar: "Ù…ØµØ± Ø¨Ù„Ø¯ ÙŠÙ„ØªÙ‚ÙŠ ÙÙŠÙ‡ Ø§Ù„Ù…Ø§Ø¶ÙŠ Ø¨Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„."},
                {en: "It is making new wonders like the New Administrative Capital.", ar: "Ø¥Ù†Ù‡Ø§ ØªØµÙ†Ø¹ Ø¹Ø¬Ø§Ø¦Ø¨ Ø¬Ø¯ÙŠØ¯Ø© Ù…Ø«Ù„ Ø§Ù„Ø¹Ø§ØµÙ…Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©."},
                {en: "Robots will be used in schools and hospitals.", ar: "Ø³ÙŠØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø±ÙˆØ¨ÙˆØªØ§Øª ÙÙŠ Ø§Ù„Ù…Ø¯Ø§Ø±Ø³ ÙˆØ§Ù„Ù…Ø³ØªØ´ÙÙŠØ§Øª."},
                {en: "Young Egyptians are shaping the future through technology and social media businesses.", ar: "Ø§Ù„Ø´Ø¨Ø§Ø¨ Ø§Ù„Ù…ØµØ±ÙŠ ÙŠØ´ÙƒÙ„ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ Ù…Ù† Ø®Ù„Ø§Ù„ Ø§Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§ ÙˆÙ…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ."},
                {en: "They are making Egypt a land of both history and innovation.", ar: "Ø¥Ù†Ù‡Ù… ÙŠØ¬Ø¹Ù„ÙˆÙ† Ù…ØµØ± Ø£Ø±Ø¶Ø§Ù‹ Ù„Ù„ØªØ§Ø±ÙŠØ® ÙˆØ§Ù„Ø§Ø¨ØªÙƒØ§Ø± Ù…Ø¹Ø§Ù‹."}
            ]
        },
        { 
            id: "u4_1", 
            title: "Screen Time Habits", 
            sentences: [
                {en: "Screen time is the total time people spend looking at phones, computers, or TVs.", ar: "ÙˆÙ‚Øª Ø§Ù„Ø´Ø§Ø´Ø© Ù‡Ùˆ Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø°ÙŠ ÙŠÙ‚Ø¶ÙŠÙ‡ Ø§Ù„Ù†Ø§Ø³ ÙÙŠ Ø§Ù„Ù†Ø¸Ø± Ù„Ù„Ù‡ÙˆØ§ØªÙØŒ Ø£Ùˆ Ø§Ù„Ø­ÙˆØ§Ø³ÙŠØ¨ØŒ Ø£Ùˆ Ø§Ù„ØªÙ„ÙØ§Ø²."},
                {en: "It can be helpful for studying, but harmful if used too much.", ar: "ÙŠÙ…ÙƒÙ† Ø£Ù† ÙŠÙƒÙˆÙ† Ù…ÙÙŠØ¯Ø§Ù‹ Ù„Ù„Ø¯Ø±Ø§Ø³Ø©ØŒ Ù„ÙƒÙ†Ù‡ Ø¶Ø§Ø± Ø¥Ø°Ø§ Ø§Ø³ØªÙØ®Ø¯Ù… Ø¨ÙƒØ«Ø±Ø©."},
                {en: "Experts advise young people to manage their screen time carefully.", ar: "ÙŠÙ†ØµØ­ Ø§Ù„Ø®Ø¨Ø±Ø§Ø¡ Ø§Ù„Ø´Ø¨Ø§Ø¨ Ø¨Ø¥Ø¯Ø§Ø±Ø© ÙˆÙ‚Øª Ø§Ù„Ø´Ø§Ø´Ø© Ø¨Ø¹Ù†Ø§ÙŠØ©."},
                {en: "Using screens for schoolwork is useful, but playing games for hours is not.", ar: "Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø´Ø§Ø´Ø§Øª Ù„Ù„Ø¹Ù…Ù„ Ø§Ù„Ù…Ø¯Ø±Ø³ÙŠ Ù…ÙÙŠØ¯ØŒ Ù„ÙƒÙ† Ø§Ù„Ù„Ø¹Ø¨ Ù„Ø³Ø§Ø¹Ø§Øª Ù„ÙŠØ³ ÙƒØ°Ù„Ùƒ."},
                {en: "Too much screen time can cause tired eyes, headaches, and sleeping problems.", ar: "ÙƒØ«Ø±Ø© ÙˆÙ‚Øª Ø§Ù„Ø´Ø§Ø´Ø© Ù‚Ø¯ ØªØ³Ø¨Ø¨ Ø¥Ø¬Ù‡Ø§Ø¯ Ø§Ù„Ø¹ÙŠÙ†ØŒ ÙˆØ§Ù„ØµØ¯Ø§Ø¹ØŒ ÙˆÙ…Ø´Ø§ÙƒÙ„ Ø§Ù„Ù†ÙˆÙ…."},
                {en: "We should balance screen time with exercise and reading.", ar: "ÙŠØ¬Ø¨ Ø£Ù† Ù†ÙˆØ§Ø²Ù† ÙˆÙ‚Øª Ø§Ù„Ø´Ø§Ø´Ø© Ø¨Ø§Ù„Ø±ÙŠØ§Ø¶Ø© ÙˆØ§Ù„Ù‚Ø±Ø§Ø¡Ø©."}
            ]
        },
        { 
            id: "u5_1", 
            title: "Think Like a Designer", 
            sentences: [
                {en: "A designer is a problem-solver who creates useful and easy things for people.", ar: "Ø§Ù„Ù…ØµÙ…Ù… Ù‡Ùˆ Ø´Ø®Øµ ÙŠØ­Ù„ Ø§Ù„Ù…Ø´ÙƒÙ„Ø§Øª ÙˆÙŠØ¨ØªÙƒØ± Ø£Ø´ÙŠØ§Ø¡ Ù…ÙÙŠØ¯Ø© ÙˆØ³Ù‡Ù„Ø© Ù„Ù„Ù†Ø§Ø³."},
                {en: "Designers always ask questions like 'Who will use it?'.", ar: "ÙŠØ³Ø£Ù„ Ø§Ù„Ù…ØµÙ…Ù…ÙˆÙ† Ø¯Ø§Ø¦Ù…Ø§Ù‹ Ø£Ø³Ø¦Ù„Ø© Ù…Ø«Ù„ 'Ù…Ù† Ø³ÙŠØ³ØªØ®Ø¯Ù… Ù‡Ø°Ø§ØŸ'."},
                {en: "Designing good solutions begins with understanding people's feelings.", ar: "ØªØµÙ…ÙŠÙ… Ø­Ù„ÙˆÙ„ Ø¬ÙŠØ¯Ø© ÙŠØ¨Ø¯Ø£ Ø¨ÙÙ‡Ù… Ù…Ø´Ø§Ø¹Ø± Ø§Ù„Ù†Ø§Ø³."},
                {en: "Design thinking means caring about people and trying to make life better.", ar: "Ø§Ù„ØªÙÙƒÙŠØ± Ø§Ù„ØªØµÙ…ÙŠÙ…ÙŠ ÙŠØ¹Ù†ÙŠ Ø§Ù„Ø§Ù‡ØªÙ…Ø§Ù… Ø¨Ø§Ù„Ù†Ø§Ø³ ÙˆÙ…Ø­Ø§ÙˆÙ„Ø© Ø¬Ø¹Ù„ Ø§Ù„Ø­ÙŠØ§Ø© Ø£ÙØ¶Ù„."},
                {en: "Anyone can be a designer if they have a creative mind and a dream to change the world.", ar: "Ø£ÙŠ Ø´Ø®Øµ ÙŠÙ…ÙƒÙ†Ù‡ Ø£Ù† ÙŠÙƒÙˆÙ† Ù…ØµÙ…Ù…Ø§Ù‹ Ø¥Ø°Ø§ Ø§Ù…ØªÙ„Ùƒ Ø¹Ù‚Ù„Ø§Ù‹ Ù…Ø¨Ø¯Ø¹Ø§Ù‹ ÙˆØ­Ù„Ù…Ø§Ù‹ Ø¨ØªØºÙŠÙŠØ± Ø§Ù„Ø¹Ø§Ù„Ù…."}
            ]
        },
        { 
            id: "u5_2", 
            title: "Helping New Students", 
            sentences: [
                {en: "Omar learned about design when his teacher asked the class to help new students.", ar: "ØªØ¹Ù„Ù… Ø¹Ù…Ø± Ø¹Ù† Ø§Ù„ØªØµÙ…ÙŠÙ… Ø¹Ù†Ø¯Ù…Ø§ Ø·Ù„Ø¨ Ø§Ù„Ù…Ø¹Ù„Ù… Ù…Ù† Ø§Ù„ÙØµÙ„ Ù…Ø³Ø§Ø¹Ø¯Ø© Ø§Ù„Ø·Ù„Ø§Ø¨ Ø§Ù„Ø¬Ø¯Ø¯."},
                {en: "Instead of jumping to ideas, Omar spent time with Karim, a new student who felt nervous.", ar: "Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† Ø§Ù„Ù‚ÙØ² Ù„Ù„Ø£ÙÙƒØ§Ø±ØŒ Ù‚Ø¶Ù‰ Ø¹Ù…Ø± ÙˆÙ‚ØªØ§Ù‹ Ù…Ø¹ ÙƒØ±ÙŠÙ…ØŒ ÙˆÙ‡Ùˆ Ø·Ø§Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ ÙƒØ§Ù† ÙŠØ´Ø¹Ø± Ø¨Ø§Ù„ØªÙˆØªØ±."},
                {en: "He noticed Karim didn't know where to sit.", ar: "Ù„Ø§Ø­Ø¸ Ø£Ù† ÙƒØ±ÙŠÙ… Ù„Ù… ÙŠÙƒÙ† ÙŠØ¹Ø±Ù Ø£ÙŠÙ† ÙŠØ¬Ù„Ø³."},
                {en: "Omar designed a 'Welcome Buddy' plan and a school map.", ar: "ØµÙ…Ù… Ø¹Ù…Ø± Ø®Ø·Ø© 'ØµØ¯ÙŠÙ‚ Ø§Ù„ØªØ±Ø­ÙŠØ¨' ÙˆØ®Ø±ÙŠØ·Ø© Ù„Ù„Ù…Ø¯Ø±Ø³Ø©."},
                {en: "When they tested these ideas, the new students felt happier.", ar: "Ø¹Ù†Ø¯Ù…Ø§ Ø§Ø®ØªØ¨Ø±ÙˆØ§ Ù‡Ø°Ù‡ Ø§Ù„Ø£ÙÙƒØ§Ø±ØŒ Ø´Ø¹Ø± Ø§Ù„Ø·Ù„Ø§Ø¨ Ø§Ù„Ø¬Ø¯Ø¯ Ø¨Ø³Ø¹Ø§Ø¯Ø© Ø£ÙƒØ¨Ø±."},
                {en: "Real design starts with empathy.", ar: "Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ ÙŠØ¨Ø¯Ø£ Ø¨Ø§Ù„ØªØ¹Ø§Ø·Ù."}
            ]
        },
        { 
            id: "u6_1", 
            title: "Our Group Project", 
            sentences: [
                {en: "Our group worked on a project to solve the problem of students forgetting their homework.", ar: "Ø¹Ù…Ù„Øª Ù…Ø¬Ù…ÙˆØ¹ØªÙ†Ø§ Ø¹Ù„Ù‰ Ù…Ø´Ø±ÙˆØ¹ Ù„Ø­Ù„ Ù…Ø´ÙƒÙ„Ø© Ù†Ø³ÙŠØ§Ù† Ø§Ù„Ø·Ù„Ø§Ø¨ Ù„ÙˆØ§Ø¬Ø¨Ø§ØªÙ‡Ù…."},
                {en: "First, we defined the challenge and brainstormed different ideas.", ar: "Ø£ÙˆÙ„Ø§Ù‹ØŒ Ø­Ø¯Ø¯Ù†Ø§ Ø§Ù„ØªØ­Ø¯ÙŠ ÙˆÙ‚Ù…Ù†Ø§ Ø¨Ø¹ØµÙ Ø°Ù‡Ù†ÙŠ Ù„Ø£ÙÙƒØ§Ø± Ù…Ø®ØªÙ„ÙØ©."},
                {en: "We decided to design a colorful homework reminder chart.", ar: "Ù‚Ø±Ø±Ù†Ø§ ØªØµÙ…ÙŠÙ… Ù„ÙˆØ­Ø© ØªØ°ÙƒÙŠØ± Ù…Ù„ÙˆÙ†Ø© Ù„Ù„ÙˆØ§Ø¬Ø¨Ø§Øª."},
                {en: "It was simple, practical, and easy to use.", ar: "ÙƒØ§Ù†Øª Ø¨Ø³ÙŠØ·Ø©ØŒ ÙˆØ¹Ù…Ù„ÙŠØ©ØŒ ÙˆØ³Ù‡Ù„Ø© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…."},
                {en: "This solution helped students stay organized and remember their homework better.", ar: "Ø³Ø§Ø¹Ø¯ Ù‡Ø°Ø§ Ø§Ù„Ø­Ù„ Ø§Ù„Ø·Ù„Ø§Ø¨ Ø¹Ù„Ù‰ Ø§Ù„Ø¨Ù‚Ø§Ø¡ Ù…Ù†Ø¸Ù…ÙŠÙ† ÙˆØªØ°ÙƒØ± ÙˆØ§Ø¬Ø¨Ø§ØªÙ‡Ù… Ø¨Ø´ÙƒÙ„ Ø£ÙØ¶Ù„."}
            ]
        },
        { 
            id: "u6_2", 
            title: "The Clever Fox", 
            sentences: [
                {en: "The story of the clever fox and the crow teaches us an important lesson.", ar: "ØªØ¹Ù„Ù…Ù†Ø§ Ù‚ØµØ© Ø§Ù„Ø«Ø¹Ù„Ø¨ Ø§Ù„Ù…Ø§ÙƒØ± ÙˆØ§Ù„ØºØ±Ø§Ø¨ Ø¯Ø±Ø³Ø§Ù‹ Ù…Ù‡Ù…Ø§Ù‹."},
                {en: "The fox wanted the cheese and used kind words to trick the crow.", ar: "Ø£Ø±Ø§Ø¯ Ø§Ù„Ø«Ø¹Ù„Ø¨ Ø§Ù„Ø¬Ø¨Ù†Ø© ÙˆØ§Ø³ØªØ®Ø¯Ù… ÙƒÙ„Ù…Ø§Øª Ù„Ø·ÙŠÙØ© Ù„Ø®Ø¯Ø§Ø¹ Ø§Ù„ØºØ±Ø§Ø¨."},
                {en: "When the crow opened her beak to sing, the cheese fell.", ar: "Ø¹Ù†Ø¯Ù…Ø§ ÙØªØ­Øª Ø§Ù„ØºØ±Ø§Ø¨ Ù…Ù†Ù‚Ø§Ø±Ù‡Ø§ Ù„ØªØºÙ†ÙŠØŒ Ø³Ù‚Ø·Øª Ø§Ù„Ø¬Ø¨Ù†Ø©."},
                {en: "The fox ran away with it.", ar: "Ù‡Ø±Ø¨ Ø§Ù„Ø«Ø¹Ù„Ø¨ Ø¨Ù‡Ø§."},
                {en: "This fable shows us that we should be careful with flattery.", ar: "ØªØ¸Ù‡Ø± Ù„Ù†Ø§ Ù‡Ø°Ù‡ Ø§Ù„Ø®Ø±Ø§ÙØ© Ø£Ù†Ù‡ ÙŠØ¬Ø¨ Ø£Ù† Ù†Ø­Ø°Ø± Ù…Ù† Ø§Ù„Ù…Ø¯ÙŠØ­ Ø§Ù„Ø²Ø§Ø¦Ù."},
                {en: "Sometimes people use nice words just to get what they want.", ar: "Ø£Ø­ÙŠØ§Ù†Ø§Ù‹ ÙŠØ³ØªØ®Ø¯Ù… Ø§Ù„Ù†Ø§Ø³ ÙƒÙ„Ù…Ø§Øª Ù„Ø·ÙŠÙØ© ÙÙ‚Ø· Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…Ø§ ÙŠØ±ÙŠØ¯ÙˆÙ†."}
            ]
        },
        { 
            id: "u6_3", 
            title: "Power of Stories", 
            sentences: [
                {en: "Stories are powerful because they help us see the world from different points of view.", ar: "Ø§Ù„Ù‚ØµØµ Ù‚ÙˆÙŠØ© Ù„Ø£Ù†Ù‡Ø§ ØªØ³Ø§Ø¹Ø¯Ù†Ø§ Ø¹Ù„Ù‰ Ø±Ø¤ÙŠØ© Ø§Ù„Ø¹Ø§Ù„Ù… Ù…Ù† ÙˆØ¬Ù‡Ø§Øª Ù†Ø¸Ø± Ù…Ø®ØªÙ„ÙØ©."},
                {en: "They often teach morals and life lessons that guide us.", ar: "ØºØ§Ù„Ø¨Ø§Ù‹ Ù…Ø§ ØªØ¹Ù„Ù…Ù†Ø§ Ø£Ø®Ù„Ø§Ù‚Ø§Ù‹ ÙˆØ¯Ø±ÙˆØ³ Ø­ÙŠØ§Ø© ØªØ±Ø´Ø¯Ù†Ø§."},
                {en: "Good stories include conflicts and solutions.", ar: "Ø§Ù„Ù‚ØµØµ Ø§Ù„Ø¬ÙŠØ¯Ø© ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ ØµØ±Ø§Ø¹Ø§Øª ÙˆØ­Ù„ÙˆÙ„."},
                {en: "Reading stories helps us think critically and understand other people's experiences.", ar: "Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù‚ØµØµ ØªØ³Ø§Ø¹Ø¯Ù†Ø§ Ø¹Ù„Ù‰ Ø§Ù„ØªÙÙƒÙŠØ± Ø§Ù„Ù†Ù‚Ø¯ÙŠ ÙˆÙÙ‡Ù… ØªØ¬Ø§Ø±Ø¨ Ø§Ù„Ø¢Ø®Ø±ÙŠÙ†."},
                {en: "Even fictional stories can carry deep messages.", ar: "Ø­ØªÙ‰ Ø§Ù„Ù‚ØµØµ Ø§Ù„Ø®ÙŠØ§Ù„ÙŠØ© ÙŠÙ…ÙƒÙ† Ø£Ù† ØªØ­Ù…Ù„ Ø±Ø³Ø§Ø¦Ù„ Ø¹Ù…ÙŠÙ‚Ø©."}
            ]
        },
        { 
            id: "u6_4", 
            title: "The Dog and His Shadow", 
            sentences: [
                {en: "One sunny afternoon, a hungry dog found a tasty bone.", ar: "ÙÙŠ Ø¸Ù‡ÙŠØ±Ø© ÙŠÙˆÙ… Ù…Ø´Ù…Ø³ØŒ ÙˆØ¬Ø¯ ÙƒÙ„Ø¨ Ø¬Ø§Ø¦Ø¹ Ø¹Ø¸Ù…Ø© Ù„Ø°ÙŠØ°Ø©."},
                {en: "He carried it in his mouth across a bridge.", ar: "Ø­Ù…Ù„Ù‡Ø§ ÙÙŠ ÙÙ…Ù‡ Ø¹Ø¨Ø± Ø¬Ø³Ø±."},
                {en: "He looked down into the water and saw his reflection.", ar: "Ù†Ø¸Ø± Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø§Ø¡ ÙˆØ±Ø£Ù‰ Ø§Ù†Ø¹ÙƒØ§Ø³ ØµÙˆØ±ØªÙ‡."},
                {en: "He thought it was another dog with a bigger bone.", ar: "Ø¸Ù† Ø£Ù†Ù‡ ÙƒÙ„Ø¨ Ø¢Ø®Ø± Ù…Ø¹Ù‡ Ø¹Ø¸Ù…Ø© Ø£ÙƒØ¨Ø±."},
                {en: "Being greedy, he barked to get the other bone.", ar: "ÙˆØ¨Ø³Ø¨Ø¨ Ø·Ù…Ø¹Ù‡ØŒ Ù†Ø¨Ø­ Ù„ÙŠØ­ØµÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ø¸Ù…Ø© Ø§Ù„Ø£Ø®Ø±Ù‰."},
                {en: "His bone fell into the water and sank.", ar: "Ø³Ù‚Ø·Øª Ø¹Ø¸Ù…ØªÙ‡ ÙÙŠ Ø§Ù„Ù…Ø§Ø¡ ÙˆØºØ±Ù‚Øª."},
                {en: "He lost everything because of his greed.", ar: "Ø®Ø³Ø± ÙƒÙ„ Ø´ÙŠØ¡ Ø¨Ø³Ø¨Ø¨ Ø·Ù…Ø¹Ù‡."}
            ]
        }
    ];

    // --- APP STATE ---
    let currentGrade = null;
    let currentSection = null;
    let currentSubjectKey = '';
    let currentQuestions = [];
    let userAnswers = {};
    let currentUnitIndex = 0;
    let currentSlideIndex = 0;

    // --- 3. NAVIGATION LOGIC ---
    function selectGrade(g){
        currentGrade = g;
        document.getElementById('home-section').classList.add('hidden');
        document.getElementById('section-select').classList.remove('hidden');
        
        const titles = {
            1: "Ø§Ù„ØµÙ Ø§Ù„Ø£ÙˆÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ (Prep 1)",
            2: "Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù†ÙŠ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ (Prep 2)",
            3: "Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù„Ø« Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ (Prep 3)"
        };
        document.getElementById('grade-title').innerText = titles[g];
        document.getElementById('home-from-any').classList.remove('hidden');
    }

    function goToHome(){
        document.getElementById('section-select').classList.add('hidden');
        document.getElementById('model-section').classList.add('hidden');
        document.getElementById('quiz-section').classList.add('hidden');
        document.getElementById('grammar-hub').classList.add('hidden');
        document.getElementById('lesson-viewer').classList.add('hidden');
        closeModal();
        document.getElementById('home-section').classList.remove('hidden');
        document.getElementById('home-from-any').classList.add('hidden');
        currentGrade = null; currentSection = null; 
    }

    function openSectionSelect(){
        document.getElementById('model-section').classList.add('hidden');
        document.getElementById('grammar-hub').classList.add('hidden');
        document.getElementById('section-select').classList.remove('hidden');
    }

    function selectSection(sec){
        currentSection = sec;
        document.getElementById('section-select').classList.add('hidden');

        // NEW: Grammar Revision Logic
        if(sec === 'grammar_rev') {
            if(currentGrade !== 3) {
                showModal("info", "Ø¹ÙÙˆØ§Ù‹ (Sorry)", "Ù‡Ø°Ø§ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ù…ØªØ§Ø­ Ø­Ø§Ù„ÙŠØ§Ù‹ Ù„Ù„ØµÙ Ø§Ù„Ø«Ø§Ù„Ø« Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ ÙÙ‚Ø·.<br>Coming Soon for Prep " + currentGrade, [
                    {text: "Ø­Ø³Ù†Ø§Ù‹", action: "openSectionSelect()"}
                ]);
                return;
            }
            openGrammarHub();
            return;
        }

        document.getElementById('model-section').classList.remove('hidden');

        // Logic: Skills only for Prep 3
        if(currentGrade !== 3 && sec === 'skills') {
             showModal("info", "Ù‚Ø±ÙŠØ¨Ø§Ù‹ (Coming Soon)", "Ù‡Ø°Ø§ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ù…ØªØ§Ø­ Ø­Ø§Ù„ÙŠØ§Ù‹ Ù„Ù„ØµÙ Ø§Ù„Ø«Ø§Ù„Ø« Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ ÙÙ‚Ø·.<br>Coming Soon for Prep " + currentGrade, [
                 {text: "Ø­Ø³Ù†Ø§Ù‹", action: "backToModels()"}
             ]);
             return;
        }

        // Logic: Standard Content for Prep 1 & 2 (Placeholder)
        if(currentGrade !== 3) {
             document.getElementById('subject-title').innerText = sec.toUpperCase();
             document.getElementById('subject-sub').innerText = "Coming Soon for Prep " + currentGrade;
             const grid = document.getElementById('model-grid');
             grid.innerHTML = '';
             for(let i=1;i<=6;i++) {
                const btn = document.createElement('button');
                btn.className = `bg-gray-50 p-6 rounded-2xl shadow-sm border-2 border-dashed border-gray-300 font-bold text-gray-400`;
                btn.innerHTML = `<span class="text-3xl block mb-2">ğŸš§</span> Unit ${i}`;
                btn.onclick = () => showModal("info", "Ù‚Ø±ÙŠØ¨Ø§Ù‹", "Ø¬Ø§Ø±ÙŠ Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ØµÙ " + currentGrade, [{text:"OK", action:"closeModal()"}]);
                grid.appendChild(btn);
             }
             document.getElementById("mobile-back-btn").classList.add("hidden");
             return;
        }

        if(sec === 'skills') {
            renderSkillsMenu();
        } else if(sec === 'models') {
             // Model Exams Menu
             document.getElementById('subject-title').innerText = "Model Exams";
             document.getElementById('subject-sub').innerText = "Ø§Ø®ØªØ± Ù…Ø§Ø¯Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±:";
             const grid = document.getElementById('model-grid');
             grid.innerHTML = '';
             const subjects = [
                 {key:'rewrite', title:'Grammar Exams'},
                 {key:'vocab', title:'Vocabulary Exams'},
                 {key:'story', title:'Story Exams'}
             ];
             subjects.forEach(s => {
                 const d = document.createElement('div');
                 d.className = "bg-white p-6 rounded-2xl shadow-sm border-2 border-gray-100 flex flex-col items-center justify-center cursor-pointer hover:border-yellow-400 h-40 transition hover:shadow-md";
                 d.innerHTML = `<h3 class="font-bold text-xl text-gray-800">${s.title}</h3>`;
                 d.onclick = () => showModelsForSubject(s.key); 
                 grid.appendChild(d);
             });
             document.getElementById("mobile-back-btn").classList.add("hidden");
        } else {
             // Standard Subjects
             const key = sec === 'grammar' ? 'rewrite' : (sec === 'vocabulary' ? 'vocab' : 'story');
             showModelsForSubject(key);
        }
    }

    function showModelsForSubject(key){
        currentSubjectKey = key;
        const data = db[key];
        document.getElementById('subject-title').innerText = data.title;
        document.getElementById('subject-sub').innerText = "Ø§Ø®ØªØ± Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ù„Ù„Ø¨Ø¯Ø¡:";
        const grid = document.getElementById('model-grid');
        grid.innerHTML = '';
        for(let i=1; i<=data.models; i++){
            const btn = document.createElement('button');
            btn.className = `bg-white p-6 rounded-2xl shadow-sm border-l-8 ${data.color} hover:shadow-lg font-bold text-lg h-32 flex flex-col items-center justify-center transition transform hover:-translate-y-1`;
            btn.innerHTML = `<span class="text-3xl mb-2">ğŸ“</span> Model ${i}`;
            btn.onclick = () => startQuizForSubject(key, i);
            grid.appendChild(btn);
        }
        document.getElementById("mobile-back-btn").classList.add("hidden");
    }

    // --- 4. NEW GRAMMAR HUB FUNCTIONS ---
    function openGrammarHub() {
        document.getElementById('grammar-hub').classList.remove('hidden');
        const grid = document.getElementById('grammar-units-grid');
        grid.innerHTML = '';
        
        grammarDb.forEach((u, idx) => {
            const card = document.createElement('div');
            card.className = `bg-gradient-to-br ${u.color} text-white rounded-3xl p-6 shadow-lg hover:scale-105 transition cursor-pointer relative overflow-hidden`;
            card.innerHTML = `
                <div class="relative z-10">
                    <h3 class="text-2xl font-bold mb-2">${u.title}</h3>
                    <p class="text-white/80 text-sm font-medium en-font leading-relaxed">${u.desc}</p>
                    <button class="mt-4 bg-white/20 hover:bg-white/30 px-4 py-2 rounded-lg font-bold text-sm backdrop-blur-sm transition">Start Lesson â–¶</button>
                </div>
                <div class="absolute -bottom-4 -right-4 text-9xl opacity-10">ğŸ“–</div>
            `;
            card.onclick = () => startGrammarLesson(idx);
            grid.appendChild(card);
        });
    }

    function startGrammarLesson(idx) {
        currentUnitIndex = idx;
        currentSlideIndex = 0;
        document.getElementById('grammar-hub').classList.add('hidden');
        document.getElementById('lesson-viewer').classList.remove('hidden');
        document.getElementById('lesson-title').innerText = grammarDb[idx].title;
        renderSlide();
    }

    function renderSlide() {
        const unit = grammarDb[currentUnitIndex];
        const slide = unit.slides[currentSlideIndex];
        const container = document.getElementById('slide-content');
        const indicator = document.getElementById('slide-indicator');
        const prevBtn = document.getElementById('prev-slide');
        const nextBtn = document.getElementById('next-slide');
        const pracBtn = document.getElementById('start-practice-btn');

        container.innerHTML = ''; 
        
        const contentDiv = document.createElement('div');
        contentDiv.className = "slide-in max-w-3xl mx-auto text-center";
        
        let html = `<h2 class="text-3xl font-extrabold text-indigo-900 mb-8">${slide.title}</h2>`;
        html += `<div class="text-xl text-gray-700 leading-loose font-semibold">${slide.content}</div>`;
        
        contentDiv.innerHTML = html;
        container.appendChild(contentDiv);

        prevBtn.disabled = currentSlideIndex === 0;
        indicator.innerText = `${currentSlideIndex + 1} / ${unit.slides.length}`;
        
        if (currentSlideIndex === unit.slides.length - 1) {
            nextBtn.classList.add('hidden');
            pracBtn.classList.remove('hidden');
        } else {
            nextBtn.classList.remove('hidden');
            pracBtn.classList.add('hidden');
        }
    }

    function changeSlide(dir) {
        const unit = grammarDb[currentUnitIndex];
        const newIndex = currentSlideIndex + dir;
        if(newIndex >= 0 && newIndex < unit.slides.length) {
            currentSlideIndex = newIndex;
            renderSlide();
        }
    }

    function closeLesson() {
        document.getElementById('lesson-viewer').classList.add('hidden');
        document.getElementById('grammar-hub').classList.remove('hidden');
    }

    // --- 5. GRAMMAR PRACTICE (Integration with Quiz System) ---
    function startGrammarPractice() {
        const unit = grammarDb[currentUnitIndex];
        currentQuestions = unit.questions; // Using the new questions structure
        userAnswers = {};

        document.getElementById('lesson-viewer').classList.add('hidden');
        document.getElementById('quiz-section').classList.remove('hidden');
        
        // Customize Quiz UI for this mode
        document.getElementById('quiz-container-box').className = "bg-white rounded-3xl shadow-2xl p-8 border-t-8 border-indigo-600";
        document.getElementById('quiz-title').innerText = `Practice: ${unit.title}`;
        document.getElementById('main-submit-btn').classList.remove('hidden');
        
        // Use special back button behavior
        const backBtn = document.getElementById('text-back-btn');
        backBtn.classList.remove('hidden');
        backBtn.onclick = () => {
             document.getElementById('quiz-section').classList.add('hidden');
             openGrammarHub();
        };

        const list = document.getElementById('questions-list');
        list.innerHTML = '';

        currentQuestions.forEach((q, idx) => {
            const item = document.createElement('div');
            item.className = "p-6 bg-gray-50 rounded-xl border border-gray-200 relative";

            const header = document.createElement('div');
            header.className = "flex justify-between mb-4 text-left";
            header.innerHTML = `<span class="font-bold text-lg text-gray-700 en-font">Q${idx+1}</span>`;

            const text = document.createElement('p');
            text.className = "text-lg font-semibold text-gray-800 mb-4 en-font";
            text.innerText = q.q;

            item.appendChild(header);
            item.appendChild(text);

            const input = document.createElement('input');
            input.type = "text";
            input.className = "w-full p-3 border-2 border-gray-300 rounded-lg focus:border-indigo-600 focus:outline-none en-font text-left";
            input.placeholder = "Type your answer here...";
            input.oninput = (e) => userAnswers[idx] = e.target.value;
            item.appendChild(input);

            // Add Hint if available (specific to this mode)
            if(q.hint) {
                const hint = document.createElement('p');
                hint.className = "text-xs text-indigo-500 mt-2 font-bold en-font";
                hint.innerText = `ğŸ’¡ Hint: ${q.hint}`;
                item.appendChild(hint);
            }

            list.appendChild(item);
        });
    }

    // --- 6. STANDARD EXAM LOGIC ---
    function startQuizForSubject(subKey, modelNum){
        currentSubjectKey = subKey;
        currentQuestions = db[subKey].questions.filter(q => q.m === modelNum);
        
        if(currentQuestions.length === 0) {
            showModal("info", "Ø¹ÙÙˆØ§Ù‹", "Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ø³Ø¦Ù„Ø© Ù…Ø¶Ø§ÙØ© Ù„Ù‡Ø°Ø§ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø­Ø§Ù„ÙŠØ§Ù‹.", [{text:"Ø­Ø³Ù†Ø§Ù‹", action:"closeModal()"}]);
            return;
        }

        userAnswers = {};
        
        document.getElementById('model-section').classList.add('hidden');
        document.getElementById('quiz-section').classList.remove('hidden');
        document.getElementById('quiz-container-box').className = `bg-white rounded-3xl shadow-2xl p-8 border-t-8 ${db[subKey].color}`;
        document.getElementById('quiz-title').innerText = `${db[subKey].title} - Model ${modelNum}`;
        document.getElementById('main-submit-btn').classList.remove('hidden');
        
        // Standard back button
        const backBtn = document.getElementById('text-back-btn');
        backBtn.classList.remove('hidden');
        backBtn.onclick = backToModels;

        document.getElementById("mobile-back-btn").classList.remove("hidden");

        const list = document.getElementById('questions-list');
        list.innerHTML = '';

        currentQuestions.forEach((q, idx) => {
            const item = document.createElement('div');
            item.className = "p-6 bg-gray-50 rounded-xl border border-gray-200 relative";

            const header = document.createElement('div');
            header.className = "flex justify-between mb-4 text-left";
            header.innerHTML = `<span class="font-bold text-lg text-gray-700 en-font">Q${idx+1}</span>`;

            const text = document.createElement('p');
            text.className = "text-lg font-semibold text-gray-800 mb-4 en-font";
            text.innerText = q.q;

            item.appendChild(header);
            item.appendChild(text);

            if(q.type === 'mcq') {
                const optsDiv = document.createElement('div');
                optsDiv.className = "grid grid-cols-1 md:grid-cols-2 gap-3 en-font";
                q.opts.forEach(opt => {
                    const btn = document.createElement('div');
                    btn.className = "p-3 bg-white border-2 border-gray-200 rounded-lg cursor-pointer hover:border-gray-400 transition flex items-center gap-3";
                    btn.innerHTML = `
                        <div class="w-5 h-5 rounded-full border-2 border-gray-300 flex-shrink-0 option-circle"></div>
                        <span class="select-none text-left">${opt}</span>
                    `;
                    btn.onclick = () => {
                        userAnswers[idx] = opt;
                        Array.from(optsDiv.children).forEach(c => {
                            c.classList.remove('border-gray-800','bg-gray-100');
                            c.querySelector('.option-circle').classList.remove('bg-gray-800','border-gray-800');
                        });
                        btn.classList.add('border-gray-800','bg-gray-100');
                        btn.querySelector('.option-circle').classList.add('bg-gray-800','border-gray-800');
                    };
                    optsDiv.appendChild(btn);
                });
                item.appendChild(optsDiv);
            } else {
                const input = document.createElement('input');
                input.type = "text";
                input.className = "w-full p-3 border-2 border-gray-300 rounded-lg focus:border-gray-800 focus:outline-none en-font text-left";
                input.placeholder = "Type your answer here...";
                input.oninput = (e) => userAnswers[idx] = e.target.value;
                item.appendChild(input);
            }
            list.appendChild(item);
        });
    }

    function finishQuiz() {
        let score = 0;
        const total = currentQuestions.length;
        
        function normalizeAnswer(str) {
            return str ? str.toLowerCase().trim().replace(/[.,/#!$%^&*;:{}=\-_`~()]/g,"").replace(/\s{2,}/g," ") : "";
        }

        currentQuestions.forEach((q, idx) => {
            let uAns = userAnswers[idx];
            if(q.type === 'mcq') {
                if(uAns === q.ans) score++;
            } else {
                // Check normalization
                if(normalizeAnswer(uAns) === normalizeAnswer(q.ans)) {
                    score++;
                } else if (uAns && q.ans.toLowerCase().includes(uAns.toLowerCase().trim().substring(0, 5)) && uAns.length > 4) {
                    // Fallback for partial matches in long sentences (optional safety net)
                    score++;
                }
            }
        });

        const pct = (score/total)*100;
        let type = pct > 50 ? "success" : "error";
        let title = pct > 50 ? "Excellent Work!" : "Good Effort!";
        let msg = `Your Score: <span class="text-3xl font-bold block mt-2">${score} / ${total}</span>`;
        
        let actions = [];
        // Determine where to go back based on context (Quiz Section visibility vs Grammar Hub)
        if(!document.getElementById('grammar-hub').classList.contains('hidden') || document.getElementById('model-section').classList.contains('hidden')) {
             actions = [
                {text: "Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø¯Ø±ÙˆØ³", action: "closeModal(); openGrammarHub(); document.getElementById('quiz-section').classList.add('hidden');"}
             ];
        } else {
             actions = [
                {text: "Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø©", action: "backToModels()"},
                {text: "Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©", action: "goToHome()"}
            ];
        }
        
        showModal(type, title, msg, actions);
    }

    // --- 7. SKILLS MENU ---
    function renderSkillsMenu() {
        document.getElementById('subject-title').innerText = "Writing Skills (Paragraphs)";
        document.getElementById('subject-sub').innerText = "Ø§Ø®ØªØ± Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹ Ø«Ù… Ø§Ø®ØªØ± Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„ØªØ¯Ø±ÙŠØ¨ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø© Ù„Ùƒ:";
        const grid = document.getElementById('model-grid');
        grid.innerHTML = '';

        skillsData.forEach(item => {
            const card = document.createElement('div');
            card.className = 'bg-white p-6 rounded-3xl shadow-md border-l-8 border-pink-500 hover:shadow-xl transition flex flex-col justify-between';
            const preview = item.sentences.map(s=>s.en).join(' ').substring(0,50);
            card.innerHTML = `
                <div>
                    <h3 class="font-bold text-lg mb-2 text-gray-800 leading-tight">${item.title}</h3>
                    <p class="text-xs text-gray-400 mb-6 truncate leading-relaxed">${preview}...</p>
                </div>
                <div class="flex gap-3 mt-auto">
                    <button onclick="startReorderGame('${item.id}')" class="flex-1 bg-blue-50 text-blue-700 py-3 rounded-xl text-xs font-bold hover:bg-blue-600 hover:text-white transition border border-blue-200 shadow-sm">
                        ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¬Ù…Ù„<br><span class="en-font font-normal">Reorder</span>
                    </button>
                    <button onclick="startPredictionGame('${item.id}')" class="flex-1 bg-purple-50 text-purple-700 py-3 rounded-xl text-xs font-bold hover:bg-purple-600 hover:text-white transition border border-purple-200 shadow-sm">
                        ØªÙˆÙ‚Ø¹ Ø§Ù„ØªØ§Ù„ÙŠ<br><span class="en-font font-normal">Predict</span>
                    </button>
                </div>
            `;
            grid.appendChild(card);
        });
        document.getElementById("mobile-back-btn").classList.add("hidden");
    }

    // --- 8. SKILLS GAMES ---
    function startReorderGame(id) {
        setupQuizUI(id, "Reorder the Sentences (Ø±ØªØ¨ Ø§Ù„Ø¬Ù…Ù„)");
        const item = skillsData.find(x => x.id === id);
        const sentencesObj = item.sentences; 
        const shuffled = [...sentencesObj].sort(() => Math.random() - 0.5);
        const list = document.getElementById('questions-list');
        
        const fullText = sentencesObj.map(s => s.en).join(' ');
        addAudioButton(list, fullText);

        const dropZone = document.createElement('div');
        dropZone.className = "min-h-[140px] bg-gray-50 border-3 border-dashed border-gray-300 rounded-2xl p-6 space-y-3 transition-colors";
        dropZone.innerHTML = `<p class="text-gray-400 text-center text-sm pointer-events-none mt-2 font-semibold">Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø¬Ù…Ù„ Ù„Ø¥Ø¶Ø§ÙØªÙ‡Ø§ Ø¨Ø§Ù„ØªØ±ØªÙŠØ¨ ğŸ‘‡</p>`;
        list.appendChild(dropZone);

        const bank = document.createElement('div');
        bank.className = "flex flex-wrap gap-3 justify-center mt-6";
        shuffled.forEach(s => {
            const btn = document.createElement('button');
            btn.className = "bg-white border-2 border-gray-200 px-4 py-3 rounded-xl shadow-sm text-sm en-font hover:border-blue-500 hover:bg-blue-50 transition text-left leading-relaxed max-w-full";
            btn.innerHTML = `
                <div class="font-bold text-gray-800">${s.en}</div>
                <div class="text-xs text-gray-500 mt-1 dir-rtl text-right border-t pt-1 border-gray-100">${s.ar}</div>
            `;
            btn.onclick = () => {
                const p = dropZone.querySelector('p.text-gray-400'); if(p) p.remove();
                const ansRow = document.createElement('div');
                ansRow.className = "bg-white p-3 rounded-xl border-l-4 border-blue-500 shadow-sm flex justify-between items-start animate-fade-in en-font";
                ansRow.dataset.val = s.en; 
                ansRow.innerHTML = `<span class="text-sm text-gray-800">${s.en}</span>`;
                const del = document.createElement('button');
                del.innerHTML = "âœ•";
                del.className = "text-red-400 hover:text-red-600 font-bold ml-3 text-lg";
                del.onclick = () => { ansRow.remove(); btn.classList.remove('hidden'); };
                ansRow.appendChild(del);
                dropZone.appendChild(ansRow);
                btn.classList.add('hidden');
            };
            bank.appendChild(btn);
        });
        list.appendChild(bank);

        const checkBtn = document.createElement('button');
        checkBtn.className = "w-full mt-8 bg-gray-900 text-white font-bold py-4 rounded-xl shadow-lg hover:bg-black transition text-lg";
        checkBtn.innerText = "Check Order";
        checkBtn.onclick = () => {
            const userAns = Array.from(dropZone.querySelectorAll('div[data-val]')).map(x => x.dataset.val);
            const correctOrder = sentencesObj.map(s => s.en);
            const isCorrect = JSON.stringify(userAns) === JSON.stringify(correctOrder);
            handleSkillResult(isCorrect, id);
        };
        list.appendChild(checkBtn);
    }

    function startPredictionGame(id) {
        setupQuizUI(id, "Select Next Sentence (Ø§Ø®ØªØ± Ø§Ù„Ø¬Ù…Ù„Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©)");
        const item = skillsData.find(x => x.id === id);
        const sentencesObj = item.sentences;
        const list = document.getElementById('questions-list');
        let currentIndex = 0;

        const storyContainer = document.createElement('div');
        storyContainer.className = "bg-yellow-50 p-6 rounded-2xl border-2 border-yellow-200 min-h-[120px] mb-6 en-font text-lg leading-loose shadow-inner text-gray-800";
        storyContainer.innerHTML = `
            <div class="mb-2">
                <span class="font-bold text-blue-700 bg-blue-100 px-1 rounded block mb-1">${sentencesObj[0].en}</span>
                <span class="text-xs text-gray-500 block text-right dir-rtl">${sentencesObj[0].ar}</span>
            </div>
        `; 
        list.appendChild(storyContainer);

        const optionsContainer = document.createElement('div');
        optionsContainer.className = "grid grid-cols-1 gap-4";
        list.appendChild(optionsContainer);

        function renderNextStep() {
            optionsContainer.innerHTML = '';
            if(currentIndex + 1 >= sentencesObj.length) {
                handleSkillResult(true, id);
                return;
            }
            const correctObj = sentencesObj[currentIndex + 1];
            
            let randomItem = skillsData[Math.floor(Math.random() * skillsData.length)];
            while(randomItem.id === id) { randomItem = skillsData[Math.floor(Math.random() * skillsData.length)]; }
            let randomObj = randomItem.sentences[Math.floor(Math.random() * randomItem.sentences.length)];
            
            let opts = [correctObj, randomObj].sort(() => Math.random() - 0.5);

            opts.forEach(opt => {
                const btn = document.createElement('button');
                btn.className = "bg-white border-2 border-gray-200 p-5 rounded-2xl text-left hover:border-gray-800 hover:shadow-md transition en-font text-gray-700 font-medium leading-relaxed w-full";
                btn.innerHTML = `
                    <div class="text-lg font-bold mb-1">${opt.en}</div>
                    <div class="text-sm text-gray-500 dir-rtl text-right border-t pt-2 mt-2 border-gray-100">${opt.ar}</div>
                `;
                btn.onclick = () => {
                    if(opt.en === correctObj.en) {
                        speak("Correct");
                        currentIndex++;
                        storyContainer.innerHTML += `
                            <div class="animate-fade-in border-b border-yellow-200 pb-2 mb-2 mt-2">
                                <span class="block font-semibold">${correctObj.en}</span>
                                <span class="block text-xs text-gray-500 text-right dir-rtl">${correctObj.ar}</span>
                            </div>`;
                        renderNextStep();
                    } else {
                        btn.classList.add('bg-red-50', 'border-red-500', 'text-red-700');
                        speak("Try again");
                        setTimeout(() => btn.classList.remove('bg-red-50', 'border-red-500', 'text-red-700'), 1000);
                    }
                };
                optionsContainer.appendChild(btn);
            });
        }
        renderNextStep();
    }

    // --- 9. UNIVERSAL MODAL SYSTEM ---
    function showModal(type, title, message, buttons) {
        const modal = document.getElementById('universal-modal');
        const content = document.getElementById('modal-content');
        modal.classList.remove('hidden');

        let icon = '';
        let colorClass = '';

        if(type === 'success') { icon = 'ğŸŒŸ'; colorClass = 'text-green-600'; }
        else if(type === 'error') { icon = 'ğŸ’ª'; colorClass = 'text-orange-500'; }
        else if(type === 'info') { icon = 'â„¹ï¸'; colorClass = 'text-blue-500'; }

        let btnsHTML = buttons.map(b => 
            `<button onclick="${b.action}" class="w-full bg-gray-100 hover:bg-gray-200 text-gray-800 py-3 rounded-xl font-bold mb-2 shadow-sm border border-gray-200">${b.text}</button>`
        ).join('');

        content.innerHTML = `
            <div class="text-6xl mb-4 animate-bounce">${icon}</div>
            <h2 class="text-3xl font-extrabold ${colorClass} mb-2 en-font">${title}</h2>
            <div class="text-gray-500 mb-6 font-semibold leading-relaxed">${message}</div>
            <div class="space-y-2">
                ${btnsHTML}
            </div>
        `;
    }

    function closeModal() {
        document.getElementById('universal-modal').classList.add('hidden');
    }

    function handleSkillResult(isSuccess, currentId) {
        if(isSuccess) {
            speak("Excellent Work!");
            const currIdx = skillsData.findIndex(x => x.id === currentId);
            let btns = [
                {text: "Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø©", action: "closeModal(); backToModels()"},
                {text: "Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©", action: "goToHome()"}
            ];
            if(currIdx < skillsData.length - 1) {
                btns.unshift({text: "Ø§Ù„ØªØ¯Ø±ÙŠØ¨ Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹ Ø§Ù„ØªØ§Ù„ÙŠ â¡", action: "closeModal(); renderSkillsMenu()"});
            }
            showModal("success", "Excellent Work!", "Ø£Ø­Ø³Ù†Øª! Ø¥Ø¬Ø§Ø¨Ø© Ù…Ù…ØªØ§Ø²Ø©", btns);
        } else {
            speak("Keep practicing!");
            showModal("error", "Keep Practicing!", "Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ØŒ Ø£Ù†Øª ØªØ³ØªØ·ÙŠØ¹!", [
                {text: "Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ â†º", action: "closeModal()"},
                {text: "Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø©", action: "closeModal(); backToModels()"}
            ]);
        }
    }

    // --- UTILS ---
    function setupQuizUI(id, title) {
        document.getElementById('model-section').classList.add('hidden');
        document.getElementById('quiz-section').classList.remove('hidden');
        document.getElementById('quiz-title').innerText = title;
        document.getElementById('text-back-btn').classList.remove('hidden');
        
        // Ensure standard back behavior for skills
        document.getElementById('text-back-btn').onclick = backToModels;
        
        document.getElementById("mobile-back-btn").classList.remove("hidden");
        document.getElementById('main-submit-btn').classList.add('hidden');
        document.getElementById('questions-list').innerHTML = '';
    }

    function addAudioButton(container, text) {
        const div = document.createElement('div');
        div.className = "flex justify-center mb-6";
        div.innerHTML = `
            <button onclick="speak('${text.replace(/'/g,"\\'")}')" class="bg-gray-900 text-white px-6 py-2 rounded-full flex items-center gap-2 shadow-lg hover:scale-105 transition">
                <span>ğŸ”Š Ø§Ø³ØªÙ…Ø§Ø¹ Ù„Ù„Ù†Øµ (Listen)</span>
            </button>
        `;
        container.appendChild(div);
    }

    function speak(txt) {
        if('speechSynthesis' in window) {
            window.speechSynthesis.cancel();
            const u = new SpeechSynthesisUtterance(txt);
            u.lang = 'en-US';
            u.rate = 0.9;
            window.speechSynthesis.speak(u);
        }
    }

    function backToModels() {
        closeModal();
        document.getElementById('quiz-section').classList.add('hidden');
        document.getElementById('model-section').classList.remove('hidden');
        if(currentSection === 'skills') renderSkillsMenu();
    }
    
    function startFromIntro(){
        document.getElementById('intro-overlay').classList.add('hidden');
    }
    function skipIntro(){
        document.getElementById('intro-overlay').classList.add('hidden');
    }

</script>
</body>
</html>