<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>ŸÖŸÜÿµÿ© ŸÖÿ≥ÿ™ÿ± ÿπŸÑÿßÿ° ÿßŸÑŸÜÿ¨ÿßÿ± ÿßŸÑÿ™ŸÅÿßÿπŸÑŸäÿ© ŸÑŸÑŸÖÿ±ÿ≠ŸÑÿ© ÿßŸÑÿ•ÿπÿØÿßÿØŸäÿ©</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Cairo', sans-serif; background: #f3f4f6; color:#111827 }
        .en-font { font-family: 'Poppins', sans-serif; direction:ltr }
        .card-hover:hover { transform: translateY(-6px); box-shadow:0 12px 30px rgba(0,0,0,0.12) }
        .animate-fade-in { animation: fadeIn .45s ease-in-out; }
        @keyframes fadeIn { from {opacity:0; transform:translateY(8px)} to {opacity:1; transform:translateY(0)} }
        .big-icon { font-size: 3rem; }
        .btn-main { background:#111827; color:white }
        .btn-main:hover { background:#000 }
        
        /* Modal Animation */
        .modal-pop { animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        @keyframes popIn { from {opacity:0; transform:scale(0.9) translateY(20px)} to {opacity:1; transform:scale(1) translateY(0)} }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width:8px }
        ::-webkit-scrollbar-thumb { background:#9ca3af; border-radius:6px }
    </style>
</head>
<body class="min-h-screen flex flex-col">

<nav class="bg-gray-900 text-white shadow-lg sticky top-0 z-50">
    <div class="container mx-auto px-4 py-4 flex items-center justify-between">
        <div class="flex items-center gap-3">
            <div class="bg-yellow-400 w-10 h-10 rounded-full flex items-center justify-center text-black font-bold text-xl">A</div>
            <div>
                <div class="text-lg font-bold">ŸÖŸÜÿµÿ© ŸÖÿ≥ÿ™ÿ± ÿπŸÑÿßÿ° ÿßŸÑŸÜÿ¨ÿßÿ± ÿßŸÑÿ™ŸÅÿßÿπŸÑŸäÿ© ŸÑŸÑŸÖÿ±ÿ≠ŸÑÿ© ÿßŸÑÿ•ÿπÿØÿßÿØŸäÿ©</div>
                <div class="text-xs text-gray-300">Mr. Alaa El-Naggar Platform</div>
            </div>
        </div>
        <div id="nav-actions" class="flex items-center gap-3">
            <button id="home-from-any" onclick="goToHome()" class="hidden bg-gray-800 px-3 py-2 rounded-lg text-sm hover:bg-gray-700 transition">ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ© üè†</button>
        </div>
    </div>
</nav>

<button id="mobile-back-btn"
    onclick="backToModels()"
    class="hidden fixed top-24 right-4 bg-white shadow-xl rounded-full w-12 h-12 flex items-center justify-center text-2xl border border-gray-200 hover:bg-gray-100 active:scale-95 transition text-gray-800 z-40">
    ‚üµ
</button>

<main class="container mx-auto px-4 py-8 flex-grow relative">

    <div id="intro-overlay" class="fixed inset-0 z-50 bg-black/80 text-white flex flex-col items-center justify-center p-6 backdrop-blur-sm">
        <div class="bg-white rounded-2xl p-8 max-w-xl w-full text-center text-gray-800 shadow-2xl border-4 border-yellow-400 modal-pop">
            <h1 class="text-3xl font-extrabold mb-2">ŸÖŸÜÿµÿ© ŸÖÿ≥ÿ™ÿ± ÿπŸÑÿßÿ° ÿßŸÑŸÜÿ¨ÿßÿ±</h1>
            <p class="text-lg font-semibold text-gray-500 mb-6 en-font">Interactive Learning Platform</p>
            <p class="text-sm text-gray-600 mb-6 leading-relaxed">ÿ£ŸáŸÑÿßŸã ÿ®ŸÉ ŸÅŸä ÿßŸÑŸÖŸÜÿµÿ© ÿßŸÑÿ™ŸÅÿßÿπŸÑŸäÿ© ÿßŸÑÿ£ŸÇŸàŸâ ŸÑÿ™ÿπŸÑŸÖ ÿßŸÑÿ•ŸÜÿ¨ŸÑŸäÿ≤Ÿäÿ©.<br>Grammar ‚Ä¢ Vocabulary ‚Ä¢ Story ‚Ä¢ Skills</p>
            <div class="mb-6">
                <input id="student-name-intro" type="text" placeholder="ÿßŸÉÿ™ÿ® ÿßÿ≥ŸÖŸÉ ÿ´ŸÑÿßÿ´Ÿä ŸáŸÜÿß ..." class="w-full p-4 border-2 border-gray-200 rounded-xl text-right focus:border-yellow-400 focus:outline-none text-lg" />
            </div>
            <div class="flex gap-3 justify-center">
                <button class="px-8 py-3 rounded-xl btn-main font-bold text-lg shadow-lg transform hover:scale-105 transition" onclick="startFromIntro()">ÿßÿ®ÿØÿ£ ÿßŸÑÿ¢ŸÜ üöÄ</button>
            </div>
        </div>
    </div>

    <section id="home-section" class="animate-fade-in">
        <div class="max-w-4xl mx-auto bg-white rounded-3xl shadow-xl p-8 mb-8 border-t-8 border-yellow-400">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold mb-2 text-gray-800">ÿßÿÆÿ™ÿ± ÿßŸÑÿµŸÅ ÿßŸÑÿØÿ±ÿßÿ≥Ÿä</h2>
                <p class="text-gray-500">Select your grade to start learning</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div onclick="selectGrade(1)" class="cursor-pointer bg-blue-50 hover:bg-blue-100 p-8 rounded-2xl shadow-sm border-2 border-blue-100 hover:border-blue-300 transition group relative overflow-hidden">
                    <div class="flex flex-col items-center text-center h-full justify-center gap-4">
                        <div class="text-5xl group-hover:scale-110 transition duration-300">1Ô∏è‚É£</div>
                        <div>
                            <h3 class="text-xl font-extrabold text-blue-900">ÿßŸÑÿµŸÅ ÿßŸÑÿ£ŸàŸÑ ÿßŸÑÿ•ÿπÿØÿßÿØŸä</h3>
                            <p class="text-lg font-bold text-blue-600 en-font mt-1">Prep 1</p>
                        </div>
                    </div>
                </div>

                <div onclick="selectGrade(2)" class="cursor-pointer bg-green-50 hover:bg-green-100 p-8 rounded-2xl shadow-sm border-2 border-green-100 hover:border-green-300 transition group">
                    <div class="flex flex-col items-center text-center h-full justify-center gap-4">
                        <div class="text-5xl group-hover:scale-110 transition duration-300">2Ô∏è‚É£</div>
                        <div>
                            <h3 class="text-xl font-extrabold text-green-900">ÿßŸÑÿµŸÅ ÿßŸÑÿ´ÿßŸÜŸä ÿßŸÑÿ•ÿπÿØÿßÿØŸä</h3>
                            <p class="text-lg font-bold text-green-600 en-font mt-1">Prep 2</p>
                        </div>
                    </div>
                </div>

                <div onclick="selectGrade(3)" class="cursor-pointer bg-yellow-50 hover:bg-yellow-100 p-8 rounded-2xl shadow-sm border-2 border-yellow-100 hover:border-yellow-400 transition group ring-2 ring-yellow-400 ring-offset-2">
                    <div class="flex flex-col items-center text-center h-full justify-center gap-4">
                        <div class="text-5xl group-hover:scale-110 transition duration-300">3Ô∏è‚É£</div>
                        <div>
                            <h3 class="text-xl font-extrabold text-yellow-900">ÿßŸÑÿµŸÅ ÿßŸÑÿ´ÿßŸÑÿ´ ÿßŸÑÿ•ÿπÿØÿßÿØŸä</h3>
                            <p class="text-lg font-bold text-yellow-600 en-font mt-1">Prep 3</p>
                            <p class="text-xs text-gray-500 mt-2">ÿßŸÑÿ¥ŸáÿßÿØÿ© ÿßŸÑÿ•ÿπÿØÿßÿØŸäÿ©</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="section-select" class="hidden animate-fade-in max-w-5xl mx-auto">
        <div class="bg-white rounded-3xl shadow-xl p-8 border-t-4 border-gray-200 mb-6">
            <div class="flex justify-between items-center mb-6 border-b pb-4">
                <div>
                    <h2 id="grade-title" class="text-2xl font-bold text-gray-800"></h2>
                    <p id="grade-sub" class="text-gray-500">ÿßÿÆÿ™ÿ± ÿßŸÑŸÇÿ≥ŸÖ ÿßŸÑÿ∞Ÿä ÿ™ÿ±ŸäÿØ ÿßŸÑÿ™ÿØÿ±Ÿäÿ® ÿπŸÑŸäŸá:</p>
                </div>
                <div>
                    <button onclick="goToHome()" class="text-sm bg-gray-100 hover:bg-gray-200 text-gray-800 px-4 py-2 rounded-lg font-bold transition">ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑÿµŸÅ</button>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div onclick="selectSection('grammar')" class="cursor-pointer bg-white p-6 rounded-2xl shadow hover:shadow-lg border-l-8 border-indigo-600 card-hover transition">
                    <div class="flex items-center gap-4">
                        <div class="text-4xl bg-indigo-50 p-3 rounded-full">‚úçÔ∏è</div>
                        <div>
                            <h3 class="text-xl font-bold text-gray-800">Grammar</h3>
                            <p class="text-sm text-gray-500 mt-1">ÿßŸÑŸÇŸàÿßÿπÿØ ŸàÿßŸÑŸÄ Rewrite</p>
                        </div>
                    </div>
                </div>

                <div onclick="selectSection('vocabulary')" class="cursor-pointer bg-white p-6 rounded-2xl shadow hover:shadow-lg border-l-8 border-blue-600 card-hover transition">
                    <div class="flex items-center gap-4">
                        <div class="text-4xl bg-blue-50 p-3 rounded-full">üìö</div>
                        <div>
                            <h3 class="text-xl font-bold text-gray-800">Vocabulary</h3>
                            <p class="text-sm text-gray-500 mt-1">ÿ®ŸÜŸÉ ÿßŸÑŸÉŸÑŸÖÿßÿ™ ŸàÿßŸÑÿ™ÿπÿ±ŸäŸÅÿßÿ™</p>
                        </div>
                    </div>
                </div>

                <div onclick="selectSection('story')" class="cursor-pointer bg-white p-6 rounded-2xl shadow hover:shadow-lg border-l-8 border-green-600 card-hover transition">
                    <div class="flex items-center gap-4">
                        <div class="text-4xl bg-green-50 p-3 rounded-full">üìñ</div>
                        <div>
                            <h3 class="text-xl font-bold text-gray-800">Story</h3>
                            <p class="text-sm text-gray-500 mt-1">ÿ£ÿ≠ÿØÿßÿ´ ÿßŸÑŸÇÿµÿ©</p>
                        </div>
                    </div>
                </div>

                <div onclick="selectSection('skills')" class="cursor-pointer bg-gradient-to-r from-pink-50 to-white p-6 rounded-2xl shadow hover:shadow-lg border-l-8 border-pink-500 card-hover col-span-1 md:col-span-3 transition group">
                    <div class="flex items-center gap-5">
                        <div class="text-5xl group-hover:scale-110 transition">üí°</div>
                        <div>
                            <h3 class="text-2xl font-bold text-pink-900">Writing Skills (Paragraphs)</h3>
                            <p class="text-sm text-pink-600 mt-1 font-semibold">ŸÖÿ≠ÿ™ŸàŸâ ÿ™ŸÅÿßÿπŸÑŸä: ÿ™ÿ±ÿ™Ÿäÿ® ÿßŸÑÿ¨ŸÖŸÑ + ÿ™ŸàŸÇÿπ ÿßŸÑÿ£ÿ≠ÿØÿßÿ´ (ŸÖÿ™ÿßÿ≠ ŸÑŸÄ Prep 3)</p>
                        </div>
                    </div>
                </div>

                <div onclick="selectSection('models')" class="cursor-pointer bg-white p-6 rounded-2xl shadow hover:shadow-lg border-l-8 border-yellow-500 card-hover col-span-1 md:col-span-3 transition">
                    <div class="flex items-center gap-4">
                        <div class="text-4xl bg-yellow-50 p-3 rounded-full">üìù</div>
                        <div>
                            <h3 class="text-xl font-bold text-gray-800">Model Exams</h3>
                            <p class="text-sm text-gray-500 mt-1">ŸÜŸÖÿßÿ∞ÿ¨ ÿßŸÖÿ™ÿ≠ÿßŸÜÿßÿ™ ÿ¥ÿßŸÖŸÑÿ© ŸÑŸÑÿ™ÿØÿ±Ÿäÿ®</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="model-section" class="hidden animate-fade-in max-w-6xl mx-auto">
        <div class="mb-6">
            <button onclick="openSectionSelect()" class="text-gray-600 hover:text-gray-900 font-bold flex items-center gap-2">
                <span class="text-xl">üîô</span> ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑÿ£ŸÇÿ≥ÿßŸÖ
            </button>
        </div>

        <div class="bg-white rounded-3xl shadow-xl p-8 border-t-8" id="subject-box">
            <h2 id="subject-title" class="text-2xl font-bold text-gray-800 mb-2"></h2>
            <p id="subject-sub" class="text-gray-500 mb-6 font-semibold"></p>

            <div id="model-grid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-5 en-font">
                </div>
        </div>
    </section>

    <section id="quiz-section" class="hidden animate-fade-in max-w-4xl mx-auto">
        <div class="flex justify-between items-center mb-6">
            <button id="text-back-btn" onclick="backToModels()" class="hidden text-gray-600 hover:text-gray-800 flex items-center gap-2 font-bold">‚Üí ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑŸÇÿßÿ¶ŸÖÿ©</button>
            <div></div>
        </div>

        <div class="bg-white rounded-3xl shadow-2xl p-8 border-t-8" id="quiz-container-box">
            <h2 id="quiz-title" class="text-2xl font-bold text-gray-800 mb-6 text-center en-font leading-relaxed"></h2>
            
            <div id="questions-list" class="space-y-6"></div>

            <button id="main-submit-btn" onclick="finishQuiz()" class="w-full mt-10 bg-gray-900 hover:bg-black text-white font-bold py-4 rounded-xl shadow-lg hidden text-lg">
                Submit Answers ÿ•ŸÜŸáÿßÿ° ÿßŸÑÿßŸÖÿ™ÿ≠ÿßŸÜ
            </button>
        </div>
    </section>

    <section id="universal-modal" class="hidden fixed inset-0 z-[100] bg-gray-900/90 flex items-center justify-center p-4 backdrop-blur-sm transition-opacity">
        <div id="modal-content" class="modal-pop bg-white rounded-3xl shadow-2xl p-8 max-w-md w-full text-center relative overflow-hidden">
            </div>
    </section>

</main>

<footer class="bg-gray-900 text-gray-400 text-center py-6 text-sm">
    <p>Mr. Alaa El-Naggar ‚Äî English Platform</p>
    <p class="mt-1 dir-ltr font-mono">01500073600</p>
</footer>

<script>
    // --- 1. RESTORING FULL DATABASE (Original Data) ---
    const db = {
        story: { title: "Story: The School Garden", color: "border-green-600", models: 20, questions: [] },
        rewrite: { title: "Grammar: Rewrite", color: "border-indigo-600", models: 8, questions: [] },
        vocab: { title: "Vocabulary Bank", color: "border-blue-600", models: 10, questions: [] }
    };

    // --- Story Bank (Original 6 questions repeated for structure) ---
    const storyBank = [
        { q:"Zeina noticed the playground was...", type:"mcq", opts:["empty","colorful","green","noisy"], ans:"empty" },
        { q:"Who helped Zeina?", type:"mcq", opts:["Nancy","Teacher","Nobody","Parents"], ans:"Nancy" },
        { q:"What did they plant?", type:"mcq", opts:["Vegetables","Candy","Trees","Nothing"], ans:"Vegetables" },
        { q:"The garden became a ...", type:"mcq", opts:["symbol","disaster","mess","secret"], ans:"symbol" },
        { q:"Why was Zeina nervous?", type:"text", ans:"Speaking to council", hint:"Public speaking" },
        { q:"What is a leader?", type:"text", ans:"Honest and helpful", hint:"Not bossy" }
    ];
    // Distribute Story
    for(let i=1; i<=20; i++){
        storyBank.forEach((q, idx) => {
            db.story.questions.push({ ...q, m: i, q: `Model ${i} Q${idx+1}: ${q.q}` });
        });
    }

    // --- Rewrite Bank (Original 10 questions) ---
    const rewriteBank = [
        { q:"He didn't study, so he failed. (If)", type:"text", ans:"If he had studied he wouldn't have failed", hint:"Type 3 Conditional" },
        { q:"'I am happy,' he said. (that)", type:"text", ans:"He said that he was happy", hint:"Indirect Speech" },
        { q:"She eats an apple. (eaten)", type:"text", ans:"An apple is eaten by her", hint:"Passive Voice" },
        { q:"It is necessary to sleep early. (must)", type:"text", ans:"You must sleep early", hint:"Modals" },
        { q:"He ran fast but missed the bus. (Although)", type:"text", ans:"Although he ran fast he missed the bus", hint:"Contrast" },
        { q:"I advise you to study. (should)", type:"text", ans:"You should study", hint:"Advice" },
        { q:"They are playing football. (played)", type:"text", ans:"Football is being played", hint:"Passive Continuous" },
        { q:"She can swim. (able)", type:"text", ans:"She is able to swim", hint:"Ability" },
        { q:"I haven't seen him for ages. (since)", type:"text", ans:"It's been ages since I saw him", hint:"Time Expressions" },
        { q:"Don't make noise. (Stop)", type:"text", ans:"Stop making noise", hint:"Imperative" }
    ];
    // Distribute Rewrite
    for(let i=1; i<=8; i++){
        rewriteBank.forEach((q, idx) => {
            db.rewrite.questions.push({ ...q, m: i, q: `Model ${i} Q${idx+1}: ${q.q}` });
        });
    }

    // --- Full Vocabulary Bank (RESTORING ALL ~150 QUESTIONS FROM ORIGINAL) ---
    const fullVocabBank = [
        { q:"Self-... means learning more about who you are.", type:"mcq", opts:["discovery","esteem","confidence","denial"], ans:"discovery" },
        { q:"To ... is to have a high opinion of someone or something.", type:"mcq", opts:["find","value","look","identify"], ans:"value" },
        { q:"... means being famous.", type:"mcq", opts:["Popularity","Curiosity","Responsibility","Individuality"], ans:"Popularity" },
        { q:"... is where someone comes from.", type:"mcq", opts:["Backbone","Background","Pack","Backward"], ans:"Background" },
        { q:"The word ... means one of a kind.", type:"mcq", opts:["unique","ordinary","common","usual"], ans:"unique" },
        { q:"At school, many students think they must look or act a certain way to ...", type:"mcq", opts:["pull out","turn on","look for","fit in"], ans:"fit in" },
        { q:"My ... isn't about what others see, it's about who I really am inside.", type:"mcq", opts:["culture","country","identity","nation"], ans:"identity" },
        { q:"My background is simple: I come from a family that ... hard work and kindness.", type:"mcq", opts:["dislikes","hates","values","refuses"], ans:"values" },
        { q:"These beliefs ... my character and help me know what's right.", type:"mcq", opts:["shape","shade","chop","share"], ans:"shape" },
        { q:"I may not be the loudest person in class, but I believe listening is one of my ...", type:"mcq", opts:["strengths","possessions","weakness","power"], ans:"strengths" },
        { q:"Sometimes, I feel pressure from ... media to change how I act or dress.", type:"mcq", opts:["society","sociable","social","mass"], ans:"social" },
        { q:"I remind myself that being real is more important than being ...", type:"mcq", opts:["unpopular","infamous","unknown","popular"], ans:"popular" },
        { q:"Through self-discovery, I've found more ...", type:"mcq", opts:["confidence","concrete","carts","carrots"], ans:"confidence" },
        { q:"I now know that being ... doesn't mean being strange - it means being real.", type:"mcq", opts:["unique","useful","uniform","unicorn"], ans:"unique" },
        { q:"With resilience and self-..., I can grow into the person I want to be.", type:"mcq", opts:["strength","special","esteem","system"], ans:"esteem" },
        { q:"To ... is to help or encourage somebody.", type:"mcq", opts:["support","depress","value","identify"], ans:"support" },
        { q:"... is the process of growing physically, mentally or emotionally.", type:"mcq", opts:["Growth","Trai","Support","Start"], ans:"Growth" },
        { q:"... is a particular quality in your personality.", type:"mcq", opts:["A","Trait","Toy","Support"], ans:"Trait" },
        { q:"... is the qualities that make somebody different from other people.", type:"mcq", opts:["Individuality","Integrity","Engineering","Mind"], ans:"Individuality" },
        { q:"To be ... is to feel sure about your abilities, qualities or decisions.", type:"mcq", opts:["greedy","honest","confident","unsure"], ans:"confident" },
        { q:"To be ... is to be interested in discovering new things.", type:"mcq", opts:["careful","useful","confident","curious"], ans:"curious" },
        { q:"To be ... is to adapt to challenging situations.", type:"mcq", opts:["resilient","unique","alone","curly"], ans:"resilient" },
        { q:"What challenges do you think you can ...", type:"mcq", opts:["face","er","tongue","nose"], ans:"face" },
        { q:"What experience shapes our ...?", type:"mcq", opts:["identity","unit","definition","identify"], ans:"identity" },
        { q:"How can support change your ...?", type:"mcq", opts:["character","portrait","map","chart"], ans:"character" },
        { q:"Nour stood in front of the mirror ... her blazer.", type:"mcq", opts:["adjusting","speaking","playing","reading"], ans:"adjusting" },
        { q:"Good ... is the key to strong relationships.", type:"mcq", opts:["communication","action","suggestion","fiction"], ans:"communication" },
        { q:"The way you talk and listen affects your ... with others.", type:"mcq", opts:["connection","collection","picture","photo"], ans:"connection" },
        { q:"Communication includes your tone of voice and your ... expression.", type:"mcq", opts:["nasal","legs","facial","hands"], ans:"facial" },
        { q:"Even a simple smile or a text ... can show someone you care.", type:"mcq", opts:["massage","lesson","book","message"], ans:"message" },
        { q:"Social media and texting make it easy to stay ... touch.", type:"mcq", opts:["on","at","in","of"], ans:"in" },
        { q:"... can lead to conflict or distance between people.", type:"mcq", opts:["Miscommunication","Connection","Relation","Identity"], ans:"Miscommunication" },
        { q:"Being honest and ... helps to strengthen the bond.", type:"mcq", opts:["supportive","discouraging","setback","naughty"], ans:"respectful" },
        { q:"The best way to ... problems is through calm discussion.", type:"mcq", opts:["rise","increase","resolve","reconnect"], ans:"resolve" },
        { q:"... is failure to understand correctly.", type:"mcq", opts:["Misunderstanding","Misuse","Mislead","Mass media"], ans:"Misunderstanding" },
        { q:"... is a relationship or link between people.", type:"mcq", opts:["Correction","Connection","Collection","Action"], ans:"Connection" },
        { q:"A ... is a strong connection between people.", type:"mcq", opts:["bold","bald","bond","band"], ans:"bond" },
        { q:"To ... is to share thoughts, feelings or ideas.", type:"mcq", opts:["communicate","allow","let","join"], ans:"communicate" },
        { q:"To ... is to find a solution to a problem.", type:"mcq", opts:["resolve","salute","say","tell"], ans:"resolve" },
        { q:"The ... people show care and regard for others.", type:"mcq", opts:["respectful","shy","ashamed","lazy"], ans:"respectful" },
        { q:"Those who are ... are ready to give help.", type:"mcq", opts:["frustrated","upset","supportive","annoyed"], ans:"supportive" },
        { q:"A ... is a movement showing emotion.", type:"mcq", opts:["position","Connection","communication","gesture"], ans:"gesture" },
        { q:"To ... is to build a relationship again after distance.", type:"mcq", opts:["reconnect","relocate","rewrite","reread"], ans:"reconnect" },
        { q:"To be ... is to be given power or confidence.", type:"mcq", opts:["powered","empowered","respected","regarded"], ans:"empowered" },
        { q:"... means not giving up when things are hard.", type:"mcq", opts:["Resilience","Trust","Confidence","Rely"], ans:"Resilience" },
        { q:"To be ... is to be open and clear about everything.", type:"mcq", opts:["vague","secret","mysterious","frank"], ans:"frank" },
        { q:"A ... is a plan or a suggestion for others.", type:"mcq", opts:["proposal","plan","map","chart"], ans:"proposal" },
        { q:"... means not giving up until achieving something.", type:"mcq", opts:["Frustration","Connection","Determination","Contact"], ans:"Determination" },
        { q:"To be ... is to feel annoyed or upset.", type:"mcq", opts:["happy","frustrated","pleased","excited"], ans:"frustrated" },
        { q:"The synonym of ... is uncomfortably or embarrassing.", type:"mcq", opts:["nice","ugly","awkward","fat"], ans:"awkward" },
        { q:"The absence of sound is known as ...", type:"mcq", opts:["silence","laughter","happiness","connection"], ans:"silence" },
        { q:"My brothers and my sisters are my ...", type:"mcq", opts:["parents","siblings","grandparents","ancestors"], ans:"siblings" },
        { q:"The word wood can be an adjective by adding...", type:"mcq", opts:["suffix","adj","prep","en"], ans:"en" },
        { q:"To make 'tradition' an adjective, add suffix ...", type:"mcq", opts:["en","tion","al","ice"], ans:"al" },
        { q:"Footballers nowadays ... a lot of money.", type:"mcq", opts:["win","gain","earn","beat"], ans:"earn" },
        { q:"Omar sat at the table and his parents sat across ... him.", type:"mcq", opts:["on","from","among","over"], ans:"from" },
        { q:"I can't study well due to the noise ...", type:"mcq", opts:["discussion","distraction","connection","quietness"], ans:"distraction" },
        { q:"That small act of communication helped them ...", type:"mcq", opts:["rearrange","replay","redo","reconnect"], ans:"reconnect" },
        { q:"Zeina decided to ... responsibility for her idea.", type:"mcq", opts:["take","make","do","write"], ans:"take" },
        { q:"She felt hurt but she showed ...", type:"mcq", opts:["weakness","resilience","disadvantages","drawbacks"], ans:"resilience" },
        { q:"Everyone ... a nice place to learn and eat.", type:"mcq", opts:["deserves","detests","dislikes","hates"], ans:"deserves" },
        { q:"The hospital will be controlled by Artificial ...", type:"mcq", opts:["Intelligence","lake","milk","limbs"], ans:"Intelligence" },
        { q:"AI will be used in many ... like medicine.", type:"mcq", opts:["classes","fields","farms","clubs"], ans:"fields" },
        { q:"Artificial Intelligence can ... music.", type:"mcq", opts:["do","feel","imagine","compose"], ans:"compose" },
        { q:"Robots and AI can't truly understand ...", type:"mcq", opts:["orders","technology","emotions","music"], ans:"emotions" },
        { q:"A robot is a machine which can ... tasks.", type:"mcq", opts:["make","take","give","do"], ans:"do" },
        { q:"Artificial Intelligence allows the robot to ... decisions.", type:"mcq", opts:["do","make","read","put"], ans:"make" },
        { q:"Scientists will ... the current technology.", type:"mcq", opts:["prove","disapprove","improve","approve"], ans:"improve" },
        { q:"We add prefix ... to give opposite of connection.", type:"mcq", opts:["im","in","ir","dis"], ans:"dis" },
        { q:"There are lots of nice AI ... on my mobile.", type:"mcq", opts:["apps","apes","abilities","apples"], ans:"apps" },
        { q:"In schools robots can help students ... languages.", type:"mcq", opts:["learn","miss","forget","do"], ans:"learn" },
        { q:"AI and robots are not ... They are different.", type:"mcq", opts:["different","useful","good","the same"], ans:"the same" },
        { q:"Robots and AI still have ... as they don't understand emotion.", type:"mcq", opts:["limits","laws","rules","roles"], ans:"limits" },
        { q:"Try again. Don't be ...", type:"mcq", opts:["good","nice","brilliant","disappointed"], ans:"disappointed" },
        { q:"Disappointed is the synonym of ...", type:"mcq", opts:["content","happy","upset","pleased"], ans:"upset" },
        { q:"Abnormal is the antonym of ...", type:"mcq", opts:["unusual","strange","odd","normal"], ans:"normal" },
        { q:"The robots can't react to your ... on your face.", type:"mcq", opts:["smile","noise","sound","voice"], ans:"smile" },
        { q:"The synonym of kind is ...", type:"mcq", opts:["cruel","unkind","bad","friendly"], ans:"friendly" },
        { q:"The ... of our project is lack of money.", type:"mcq", opts:["weakness","kindness","actress","hostess"], ans:"weakness" },
        { q:"To give opposite of 'honest', add prefix ...", type:"mcq", opts:["il","ir","dis","un"], ans:"dis" },
        { q:"... are important topics or problems.", type:"mcq", opts:["Choices","Decisions","Issues","Tools"], ans:"Issues" },
        { q:"... are jobs or actions that need to be done.", type:"mcq", opts:["Skulls","Tasks","Tusks","Matters"], ans:"Tasks" },
        { q:"... means very modern, developed or complex.", type:"mcq", opts:["Ancient","Old","New","Advanced"], ans:"Advanced" },
        { q:"... is the way someone or something acts.", type:"mcq", opts:["Behaviour","Medicine","Robot","Vacuum"], ans:"Behaviour" },
        { q:"... is the point where something stops.", type:"mcq", opts:["Light","Land","Reduce","Limit"], ans:"Limit" },
        { q:"To ... is to change something to make it your own.", type:"mcq", opts:["custom","customize","increase","reduce"], ans:"customize" },
        { q:"The ... is a link between people, things or ideas.", type:"mcq", opts:["connection","pollution","bank","lack"], ans:"connection" },
        { q:"To ... is to see or become aware of something.", type:"mcq", opts:["hear","taste","listen","notice"], ans:"notice" },
        { q:"... means taking actions without waiting.", type:"mcq", opts:["Initiative","End","Finish","Spend"], ans:"Initiative" },
        { q:"... is money or gifts given to help a project.", type:"mcq", opts:["Helping","Giving","Presenting","Donation"], ans:"Donation" },
        { q:"To ... is to stop doing something because it is bad.", type:"mcq", opts:["quite","calm","quit","quiet"], ans:"quit" },
        { q:"To be ... is to feel sad when something fails.", type:"mcq", opts:["respected","disappointed","advanced","happy"], ans:"disappointed" },
        { q:"The word instantly is similar to ...", type:"mcq", opts:["immediately","near","close","far"], ans:"immediately" },
        { q:"... includes inventions and improvements.", type:"mcq", opts:["Invitation","Public","Fiction","Innovation"], ans:"Innovation" },
        { q:"All homework was ... checked instantly.", type:"mcq", opts:["instantly","instant","once","quick"], ans:"instantly" },
        { q:"The robot teacher didn't ... when students felt tired.", type:"mcq", opts:["remind","think","notice","mention"], ans:"notice" },
        { q:"Technology can't replace the care and ... of a teacher.", type:"mcq", opts:["home","house","connection","place"], ans:"connection" },
        { q:"Zeina asked for ...", type:"mcq", opts:["donation","water","food","clothes"], ans:"donation" },
        { q:"They learnt how to ... for different plants.", type:"mcq", opts:["care","look","search","wait"], ans:"care" },
        { q:"... means the total time a person spends on screens.", type:"mcq", opts:["Night mode","Smartboard","Screen time","Free time"], ans:"Screen time" },
        { q:"Teenagers ... through social media.", type:"mcq", opts:["scroll","spend","stay","send"], ans:"scroll" },
        { q:"It is important to ... screen use.", type:"mcq", opts:["limit","end","balance","watch"], ans:"balance" },
        { q:"Spending too much time on screens affects you ...", type:"mcq", opts:["mind","mentally","physically","critically"], ans:"mentally" },
        { q:"To avoid side ..., take short breaks.", type:"mcq", opts:["reflects","effects","facts","affects"], ans:"effects" },
        { q:"An ... is a person who knows a lot.", type:"mcq", opts:["expert","architect","engineer","email"], ans:"expert" },
        { q:"To ... is to keep things equal.", type:"mcq", opts:["Role","Balance","Screen","Tradition"], ans:"Balance" },
        { q:"... means useful or helpful.", type:"mcq", opts:["Playing","Paying","collecting","Productive"], ans:"Productive" },
        { q:"Cutting-... is something new and advanced.", type:"mcq", opts:["edge","wing","rug","leg"], ans:"edge" },
        { q:"Something that takes attention away is ...", type:"mcq", opts:["attract","attraction","distraction","connection"], ans:"distraction" },
        { q:"We should caring ... the earth.", type:"mcq", opts:["after","for","to","after"], ans:"for" },
        { q:"To be ... means not to be easily distracted.", type:"mcq", opts:["distracted","lazy","focused","sad"], ans:"focused" },
        { q:"To find ... is to find answers to problems.", type:"mcq", opts:["solutions","chemicals","gases","fertilizers"], ans:"solutions" },
        { q:"Eco-... means not harmful to nature.", type:"mcq", opts:["friend","friendly","ebook","relative"], ans:"friendly" },
        { q:"Too much screen time can cause ...", type:"mcq", opts:["pollution","smoke","stress","strategy"], ans:"stress" },
        { q:"Young people are the hope of the ...", type:"mcq", opts:["past years","future","past","old days"], ans:"future" },
        { q:"I want to feel more ... control of my time.", type:"mcq", opts:["on","in","at","of"], ans:"in" },
        { q:"Students started eating ... fresh tomatoes.", type:"mcq", opts:["with","by","in","of"], ans:"with" },
        { q:"A ... is a list of planned activities.", type:"mcq", opts:["map","chart","schedule","card"], ans:"schedule" },
        { q:"A ... is a way of looking at something.", type:"mcq", opts:["picture","photo","image","perspective"], ans:"perspective" },
        { q:"... means the ability to make new ideas.", type:"mcq", opts:["Resilience","Creativity","Confidence","Trust"], ans:"Creativity" },
        { q:"The ... is a simple model of a design.", type:"mcq", opts:["port","portion","prototype","typewriter"], ans:"prototype" },
        { q:"Designers are everyday problem ...", type:"mcq", opts:["doers","solvers","makers","users"], ans:"solvers" },
        { q:"Designers ... things that are useful.", type:"mcq", opts:["show","see","create","ignore"], ans:"create" },
        { q:"Great designers explore ideas from different ...", type:"mcq", opts:["perspectives","corners","places","platforms"], ans:"perspectives" },
        { q:"Creativity is important in ...", type:"mcq", opts:["resign","design","desert","risk"], ans:"design" },
        { q:"Designers think ... the function of things.", type:"mcq", opts:["in","on","about","off"], ans:"about" },
        { q:"The word job is a synonym to ...", type:"mcq", opts:["interaction","function","fact","reaction"], ans:"function" },
        { q:"Students put books in their ...", type:"mcq", opts:["package","suitcases","backpacks","backs"], ans:"backpacks" },
        { q:"What ... are you? I am 75 kg.", type:"mcq", opts:["height","weight","much","heavy"], ans:"weight" },
        { q:"Designing includes style and ...", type:"mcq", opts:["safety","insecurity","danger","risk"], ans:"safety" },
        { q:"Design thinking means caring ... people.", type:"mcq", opts:["of","with","in","about"], ans:"about" },
        { q:"To be a designer, you need a ... to improve.", type:"mcq", opts:["drought","desire","distance","dessert"], ans:"desire" },
        { q:"What is a prototype? A simple ...", type:"mcq", opts:["medal","disc","model","middle"], ans:"model" },
        { q:"... style, what is important?", type:"mcq", opts:["Beside","Besides","Close","Next"], ans:"Besides" },
        { q:"The word ... means what something is designed to do.", type:"mcq", opts:["function","desire","style","stylish"], ans:"function" },
        { q:"I value a strong ... with my family.", type:"mcq", opts:["ship","shape","relationship","share"], ans:"relationship" },
        { q:"Her new outfit was ... and comfortable.", type:"mcq", opts:["vanish","style","stylish","foolish"], ans:"stylish" },
        { q:"... means effective and suitable.", type:"mcq", opts:["Practical","Partial","Physical","Mental"], ans:"Practical" },
        { q:"The antonym of relaxed is ...", type:"mcq", opts:["nervous","calm","quiet","comfortable"], ans:"nervous" },
        { q:"We should help the ... feel welcome.", type:"mcq", opts:["corners","newcomers","news","corks"], ans:"newcomers" },
        { q:"The school garden has an impact ... students.", type:"mcq", opts:["of","on","about","in"], ans:"on" },
        { q:"Students were more careful ... the garden.", type:"mcq", opts:["of","with","by","at"], ans:"with" },
        { q:"... the end of the school day, we went home.", type:"mcq", opts:["At","In","Of","About"], ans:"At" },
        { q:"... is the science of farming.", type:"mcq", opts:["Industry","Agriculture","Engineering","Medicine"], ans:"Agriculture" },
        { q:"... means working hard at something.", type:"mcq", opts:["Developed","Deduction","Dedicated","Danger"], ans:"Dedicated" },
        { q:"... is to suggest many ideas quickly.", type:"mcq", opts:["Think","Brain","Mind","Brainstorm"], ans:"Brainstorm" },
        { q:"A ... is similar to a friend.", type:"mcq", opts:["body","lady","rude","buddy"], ans:"buddy" },
        { q:"Her drawings ... others to add art.", type:"mcq", opts:["inspired","sent","discouraged","refused"], ans:"inspired" },
        { q:"Being honest helps people ... you.", type:"mcq", opts:["confuse","doubts","trust","disagree"], ans:"trust" },
        { q:"After the long day, he decided to ... the job.", type:"mcq", opts:["join","quit","enjoy","build"], ans:"quit" },
        { q:"She is ... to her studies.", type:"mcq", opts:["lazy","late","angry","dedicated"], ans:"dedicated" },
        { q:"I ... my friends and ask for advice.", type:"mcq", opts:["trust","blame","teach","copy"], ans:"trust" },
        { q:"We should use strengths ...", type:"mcq", opts:["badly","rudely","wisely","foolishly"], ans:"wisely" },
        { q:"In a careful way is ...", type:"mcq", opts:["physically","critically","emotionally","naturally"], ans:"critically" },
        { q:"To start something is to ...", type:"mcq", opts:["end","conclude","spark","shock"], ans:"spark" },
        { q:"... is related to right or wrong.", type:"mcq", opts:["Molar","Rural","Moral","Role"], ans:"Moral" },
        { q:"Sharing feelings is ...", type:"mcq", opts:["empathy","creativity","activity","industry"], ans:"empathy" },
        { q:"Different kinds means ...", type:"mcq", opts:["unique","various","basic","careful"], ans:"various" },
        { q:"... are ways of thinking or point of view.", type:"mcq", opts:["Points","Purposes","Perspectives","Discussions"], ans:"Perspectives" },
        { q:"Reading stories can ... how we think.", type:"mcq", opts:["improve","damage","destroy","spoil"], ans:"improve" },
        { q:"Through stories we see how characters ...", type:"mcq", opts:["face","meet","respond","solve"], ans:"respond" },
        { q:"We develop ... and learn solutions.", type:"mcq", opts:["cruelty","unkindness","empathy","hatred"], ans:"empathy" },
        { q:"We should think ... about choices.", type:"mcq", opts:["critical","physically","mental","critically"], ans:"critically" },
        { q:"Stories help us reflect ... our lives.", type:"mcq", opts:["in","on","of","about"], ans:"on" },
        { q:"Stories ... our imagination.", type:"mcq", opts:["spark","share","depart","speak"], ans:"spark" },
        { q:"Stories help us grow ...", type:"mcq", opts:["physically","critically","emotionally","tall"], ans:"emotionally" },
        { q:"... the end, reading stories is fun.", type:"mcq", opts:["On","At","Of","In"], ans:"In" },
        { q:"Reading makes us more ... of the world.", type:"mcq", opts:["know","see","hear","aware"], ans:"aware" },
        { q:"A ... is a suggestion.", type:"mcq", opts:["recommendation","situation","connection","influence"], ans:"recommendation" },
        { q:"A ... is a formal discussion.", type:"mcq", opts:["problem","story","character","debate"], ans:"debate" },
        { q:"... means not fair.", type:"mcq", opts:["fair","just","unfair","unable"], ans:"unfair" },
        { q:"... means in an honest way.", type:"mcq", opts:["Physically","Honestly","Emotionally","Mentally"], ans:"Honestly" },
        { q:"The word ... means unable to move.", type:"mcq", opts:["steal","steel","took","stuck"], ans:"stuck" },
        { q:"You shouldn't be angry when someone ...", type:"mcq", opts:["agrees","disagrees","accepts","supports"], ans:"disagrees" },
        { q:"Don't shout to win ...", type:"mcq", opts:["arguments","advice","suggestion","recommendation"], ans:"arguments" },
        { q:"Stories can ... how we react.", type:"mcq", opts:["influence","do","make","take"], ans:"influence" },
        { q:"You should stay ... during debate.", type:"mcq", opts:["worried","calm","nervous","stressed"], ans:"calm" },
        { q:"Don't ... others' opinions.", type:"mcq", opts:["respect","regard","ignore","value"], ans:"ignore" },
        { q:"The ... story is imaginary.", type:"mcq", opts:["fiction","non-fiction","historical","folk"], ans:"fiction" },
        { q:"... stories are traditional with lessons.", type:"mcq", opts:["fiction","non-fiction","historical","folk"], ans:"folk" },
        { q:"... stories are true.", type:"mcq", opts:["fiction","non-fiction","imaginary","fictional"], ans:"non-fiction" },
        { q:"... are exciting journeys.", type:"mcq", opts:["Fables","Cartoons","Adventure stories","Historical"], ans:"Adventure stories" },
        { q:"... stories are based on real past events.", type:"mcq", opts:["Fables","fiction","Adventure","Historical"], ans:"Historical" },
        { q:"... are short tales with moral.", type:"mcq", opts:["Fiction","Non-fiction","Fables","Folk"], ans:"Fables" },
        { q:"Giving power is ...", type:"mcq", opts:["empowering","fuel","energy","strong"], ans:"empowering" },
        { q:"An ... is a strong desire.", type:"mcq", opts:["nutrition","ambition","production","culture"], ans:"ambition" },
        { q:"... means not giving up.", type:"mcq", opts:["recommendation","suggestion","determination","situation"], ans:"determination" },
        { q:"The word ... means unique.", type:"mcq", opts:["common","usual","ordinary","special"], ans:"special" },
        { q:"The word ... means bravery.", type:"mcq", opts:["courage","weakness","fiction","fable"], ans:"courage" },
        { q:"... is ability to recover.", type:"mcq", opts:["Value","Resilience","Respect","Honesty"], ans:"Resilience" },
        { q:"Zeina was elected ...", type:"mcq", opts:["student","pupil","president","architect"], ans:"president" },
        { q:"She learnt about being a real ...", type:"mcq", opts:["doctor","teacher","tailor","leader"], ans:"leader" },
        { q:"Being a leader ... doing everything alone.", type:"mcq", opts:["help","say","doesn't mean","tell"], ans:"doesn't mean" },
        { q:"Add prefix ... to power for verb.", type:"mcq", opts:["em","il","ir","im"], ans:"em" },
        { q:"The wise leader should be ...", type:"mcq", opts:["transplant","transparent","transport","translate"], ans:"transparent" },
        { q:"She wanted to help students ... their school.", type:"mcq", opts:["exchange","leave","live","change"], ans:"change" },
        { q:"What new role did Zeina ...?", type:"mcq", opts:["take on","take off","take after","take away"], ans:"take on" },
        { q:"Every good story has a ...", type:"mcq", opts:["resolution","view","value","respect"], ans:"resolution" }
    ];

    // Distribute Vocab Models
    let vIdx = 0;
    for(let i=1;i<=10;i++){
        // 10 models, distribute questions evenly
        for(let j=0;j<15;j++){ // approx 15 qs per model
            if(vIdx < fullVocabBank.length) {
                db.vocab.questions.push({ ...fullVocabBank[vIdx], m:i, q: `Model ${i} Q${j+1}: ${fullVocabBank[vIdx].q}` });
                vIdx++;
            }
        }
    }

    // --- Skills Data (Full Text - 19 Topics) ---
    const skillsData = [
        { id: "u1_1", title: "Who I Am Beyond Looks", text: "My name is Ahmed and I am a student in first preparatory. I think what is inside me is more important than how I look. Looks can change, but good values stay forever. I treat people with kindness and respect. This is what makes a person truly beautiful." },
        { id: "u1_2", title: "Self-Discovery", text: "My name is Leila and I am 15 years old. I live in Alexandria and come from a big Egyptian family that respects traditions. For me, identity is not just my name or where I live. It is my personality, my values, and my dreams. Being unique means being myself. With confidence and respect, I can build a better future." },
        { id: "u1_3", title: "The Mirror Moment", text: "Nour was a Grade 9 student who often felt different from others. She looked at herself in the mirror and wished she could fit in. At school, she stayed quiet and preferred drawing. One day, her teacher asked the students to make an Identity Map. Nour decided to draw herself with her glasses and curly hair. She realized that being different was her strength." },
        { id: "u1_4", title: "Dr. Magdi Yacoub", text: "Dr. Magdi Yacoub was born in Egypt in 1935. As a child, he enjoyed reading about science and medicine. When his father's sister died from a heart disease, he felt very sad. He decided to study medicine and become a heart surgeon. He saved thousands of lives and gave hope to many families. His story shows us that our goals may come from a problem we want to solve." },
        { id: "u2_1", title: "This Is Me (Values)", text: "I believe that honesty, kindness, and respect are important values in my life. These values have shaped my personal identity and made me feel more confident. I come from a simple background, and have learned through self-discovery that being unique is a strength. Listening carefully and respecting others' opinions are important values. Honesty and kindness are the real power in life." },
        { id: "u2_2", title: "Stay Connected", text: "Good communication is very important in our lives because it helps us build strong relationships with family and friends. Communication is not only about words. It also includes our tone of voice, body language, and even a simple smile. Social media makes it easy to stay in touch, but sometimes messages are misunderstood. To avoid this, we should have open and honest conversations." },
        { id: "u2_3", title: "Communication Lessons", text: "Mariam believes that good communication is very important in relationships. She shared a story about a misunderstanding she had with a friend during a group project. They kept sending messages, but the problem became worse. When they finally met and talked in person, they understood each other better and solved the issue. From this experience, Mariam learned that communication is not just about words, but also about respect." },
        { id: "u2_4", title: "The Silent Dinner", text: "Omar sat at the dinner table with his parents, but the room was silent. A year ago, their dinners were full of laughter, but now things had changed. School stress and phones made the family stop talking. Omar felt sad and decided to break the silence. He said, 'I miss how we used to talk.' His parents agreed and promised to fix things. That short conversation helped them reconnect as a family." },
        { id: "u3_1", title: "AI vs Robots", text: "Artificial Intelligence (AI) and robots are not the same. A robot is a machine that can move and do tasks, like putting bottles in a box. AI is the brain that helps robots learn and make decisions. For example, a robot vacuum cleaner with AI can remember the shape of a room. However, AI and robots have limits because they cannot understand emotions. Robots cannot feel like humans do." },
        { id: "u3_2", title: "AI and Creativity", text: "Artificial Intelligence is becoming more creative in our world today. It can make pictures, music, and poems. For example, if you write 'a cat flying', some AI programs can turn these words into an image. This happens because AI studies thousands of human artworks. However, AI cannot feel emotions like human artists. Still, AI helps humans to be more innovative." },
        { id: "u3_3", title: "A Robot Teacher", text: "One day, Sara and her classmates met a surprising new teacher, a shiny robot. It explained that it would teach them using Artificial Intelligence. Homework was checked instantly, and learning became faster. However, after a few days, Sara realized something was missing. The robot teacher didn't smile or notice students' feelings. Technology cannot replace the care and connection of a real teacher." },
        { id: "u3_4", title: "Egypt: Innovation", text: "Egypt is a country where the past meets the future. It is making new wonders like the New Administrative Capital. Robots will be used in schools and hospitals. Young Egyptians are shaping the future through technology and social media businesses. They are making Egypt a land of both history and innovation." },
        { id: "u4_1", title: "Screen Time Habits", text: "Screen time is the total time people spend looking at phones, computers, or TVs. It can be helpful for studying, but harmful if used too much. Experts advise young people to manage their screen time carefully. Using screens for schoolwork is useful, but playing games for hours is not. Too much screen time can cause tired eyes, headaches, and sleeping problems. We should balance screen time with exercise and reading." },
        { id: "u5_1", title: "Think Like a Designer", text: "A designer is a problem-solver who creates useful and easy things for people. Designers always ask questions like 'Who will use it?'. Designing good solutions begins with understanding people's feelings. Design thinking means caring about people and trying to make life better. Anyone can be a designer if they have a creative mind and a dream to change the world." },
        { id: "u5_2", title: "Helping New Students", text: "Omar learned about design when his teacher asked the class to help new students. Instead of jumping to ideas, Omar spent time with Karim, a new student who felt nervous. He noticed Karim didn't know where to sit. Omar designed a 'Welcome Buddy' plan and a school map. When they tested these ideas, the new students felt happier. Real design starts with empathy." },
        { id: "u6_1", title: "Our Group Project", text: "Our group worked on a project to solve the problem of students forgetting their homework. First, we defined the challenge and brainstormed different ideas. We decided to design a colorful homework reminder chart. It was simple, practical, and easy to use. This solution helped students stay organized and remember their homework better." },
        { id: "u6_2", title: "The Clever Fox", text: "The story of the clever fox and the crow teaches us an important lesson. The fox wanted the cheese and used kind words to trick the crow. When the crow opened her beak to sing, the cheese fell. The fox ran away with it. This fable shows us that we should be careful with flattery. Sometimes people use nice words just to get what they want." },
        { id: "u6_3", title: "Power of Stories", text: "Stories are powerful because they help us see the world from different points of view. They often teach morals and life lessons that guide us. Good stories include conflicts and solutions. Reading stories helps us think critically and understand other people's experiences. Even fictional stories can carry deep messages." },
        { id: "u6_4", title: "The Dog and His Shadow", text: "One sunny afternoon, a hungry dog found a tasty bone. He carried it in his mouth across a bridge. He looked down into the water and saw his reflection. He thought it was another dog with a bigger bone. Being greedy, he barked to get the other bone. His bone fell into the water and sank. He lost everything because of his greed." }
    ];

    // --- APP STATE ---
    let currentGrade = null;
    let currentSection = null;
    let currentSubjectKey = '';
    let currentQuestions = [];
    let userAnswers = {};

    // --- 2. NAVIGATION LOGIC ---
    function selectGrade(g){
        currentGrade = g;
        document.getElementById('home-section').classList.add('hidden');
        document.getElementById('section-select').classList.remove('hidden');
        
        const titles = {
            1: "ÿßŸÑÿµŸÅ ÿßŸÑÿ£ŸàŸÑ ÿßŸÑÿ•ÿπÿØÿßÿØŸä (Prep 1)",
            2: "ÿßŸÑÿµŸÅ ÿßŸÑÿ´ÿßŸÜŸä ÿßŸÑÿ•ÿπÿØÿßÿØŸä (Prep 2)",
            3: "ÿßŸÑÿµŸÅ ÿßŸÑÿ´ÿßŸÑÿ´ ÿßŸÑÿ•ÿπÿØÿßÿØŸä (Prep 3)"
        };
        document.getElementById('grade-title').innerText = titles[g];
        document.getElementById('home-from-any').classList.remove('hidden');
    }

    function goToHome(){
        document.getElementById('section-select').classList.add('hidden');
        document.getElementById('model-section').classList.add('hidden');
        document.getElementById('quiz-section').classList.add('hidden');
        closeModal();
        document.getElementById('home-section').classList.remove('hidden');
        document.getElementById('home-from-any').classList.add('hidden');
        currentGrade = null; currentSection = null; 
    }

    function openSectionSelect(){
        document.getElementById('model-section').classList.add('hidden');
        document.getElementById('section-select').classList.remove('hidden');
    }

    function selectSection(sec){
        currentSection = sec;
        document.getElementById('section-select').classList.add('hidden');
        document.getElementById('model-section').classList.remove('hidden');

        // Logic: Skills only for Prep 3
        if(currentGrade !== 3 && sec === 'skills') {
             showModal("info", "ŸÇÿ±Ÿäÿ®ÿßŸã (Coming Soon)", "Ÿáÿ∞ÿß ÿßŸÑŸÖÿ≠ÿ™ŸàŸâ ŸÖÿ™ÿßÿ≠ ÿ≠ÿßŸÑŸäÿßŸã ŸÑŸÑÿµŸÅ ÿßŸÑÿ´ÿßŸÑÿ´ ÿßŸÑÿ•ÿπÿØÿßÿØŸä ŸÅŸÇÿ∑.<br>Coming Soon for Prep " + currentGrade, [
                 {text: "ÿ≠ÿ≥ŸÜÿßŸã", action: "backToModels()"}
             ]);
             return;
        }

        // Logic: Standard Content for Prep 1 & 2 (Placeholder)
        if(currentGrade !== 3) {
             // For Demo purposes, show empty grid with "Coming Soon" triggers
             document.getElementById('subject-title').innerText = sec.toUpperCase();
             document.getElementById('subject-sub').innerText = "Coming Soon for Prep " + currentGrade;
             const grid = document.getElementById('model-grid');
             grid.innerHTML = '';
             for(let i=1;i<=6;i++) {
                const btn = document.createElement('button');
                btn.className = `bg-gray-50 p-6 rounded-2xl shadow-sm border-2 border-dashed border-gray-300 font-bold text-gray-400`;
                btn.innerHTML = `<span class="text-3xl block mb-2">üöß</span> Unit ${i}`;
                btn.onclick = () => showModal("info", "ŸÇÿ±Ÿäÿ®ÿßŸã", "ÿ¨ÿßÿ±Ÿä ÿ•ÿπÿØÿßÿØ ŸÖÿ≠ÿ™ŸàŸâ ÿßŸÑÿµŸÅ " + currentGrade, [{text:"OK", action:"closeModal()"}]);
                grid.appendChild(btn);
             }
             document.getElementById("mobile-back-btn").classList.add("hidden");
             return;
        }

        if(sec === 'skills') {
            renderSkillsMenu();
        } else if(sec === 'models') {
             // Model Exams Menu
             document.getElementById('subject-title').innerText = "Model Exams";
             document.getElementById('subject-sub').innerText = "ÿßÿÆÿ™ÿ± ŸÖÿßÿØÿ© ÿßŸÑÿßÿÆÿ™ÿ®ÿßÿ±:";
             const grid = document.getElementById('model-grid');
             grid.innerHTML = '';
             const subjects = [
                 {key:'rewrite', title:'Grammar Exams'},
                 {key:'vocab', title:'Vocabulary Exams'},
                 {key:'story', title:'Story Exams'}
             ];
             subjects.forEach(s => {
                 const d = document.createElement('div');
                 d.className = "bg-white p-6 rounded-2xl shadow-sm border-2 border-gray-100 flex flex-col items-center justify-center cursor-pointer hover:border-yellow-400 h-40 transition hover:shadow-md";
                 d.innerHTML = `<h3 class="font-bold text-xl text-gray-800">${s.title}</h3>`;
                 d.onclick = () => showModelsForSubject(s.key); // Go to model selection for that subject
                 grid.appendChild(d);
             });
             document.getElementById("mobile-back-btn").classList.add("hidden");
        } else {
             // Standard Subjects
             const key = sec === 'grammar' ? 'rewrite' : (sec === 'vocabulary' ? 'vocab' : 'story');
             showModelsForSubject(key);
        }
    }

    function showModelsForSubject(key){
        currentSubjectKey = key;
        const data = db[key];
        document.getElementById('subject-title').innerText = data.title;
        document.getElementById('subject-sub').innerText = "ÿßÿÆÿ™ÿ± ÿßŸÑŸÜŸÖŸàÿ∞ÿ¨ ŸÑŸÑÿ®ÿØÿ°:";
        const grid = document.getElementById('model-grid');
        grid.innerHTML = '';
        for(let i=1; i<=data.models; i++){
            const btn = document.createElement('button');
            btn.className = `bg-white p-6 rounded-2xl shadow-sm border-l-8 ${data.color} hover:shadow-lg font-bold text-lg h-32 flex flex-col items-center justify-center transition transform hover:-translate-y-1`;
            btn.innerHTML = `<span class="text-3xl mb-2">üìù</span> Model ${i}`;
            btn.onclick = () => startQuizForSubject(key, i); // FIX: Opens real quiz now
            grid.appendChild(btn);
        }
        document.getElementById("mobile-back-btn").classList.add("hidden");
    }

    // --- 3. STANDARD EXAM LOGIC ---
    function startQuizForSubject(subKey, modelNum){
        currentSubjectKey = subKey;
        // Filter questions for this model
        currentQuestions = db[subKey].questions.filter(q => q.m === modelNum);
        
        if(currentQuestions.length === 0) {
            showModal("info", "ÿπŸÅŸàÿßŸã", "ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ£ÿ≥ÿ¶ŸÑÿ© ŸÖÿ∂ÿßŸÅÿ© ŸÑŸáÿ∞ÿß ÿßŸÑŸÜŸÖŸàÿ∞ÿ¨ ÿ≠ÿßŸÑŸäÿßŸã.", [{text:"ÿ≠ÿ≥ŸÜÿßŸã", action:"closeModal()"}]);
            return;
        }

        userAnswers = {};
        
        // Setup Quiz UI
        document.getElementById('model-section').classList.add('hidden');
        document.getElementById('quiz-section').classList.remove('hidden');
        document.getElementById('quiz-container-box').className = `bg-white rounded-3xl shadow-2xl p-8 border-t-8 ${db[subKey].color}`;
        document.getElementById('quiz-title').innerText = `${db[subKey].title} - Model ${modelNum}`;
        document.getElementById('main-submit-btn').classList.remove('hidden');
        document.getElementById('text-back-btn').classList.remove('hidden');
        document.getElementById("mobile-back-btn").classList.remove("hidden");

        const list = document.getElementById('questions-list');
        list.innerHTML = '';

        currentQuestions.forEach((q, idx) => {
            const item = document.createElement('div');
            item.className = "p-6 bg-gray-50 rounded-xl border border-gray-200 relative";

            const header = document.createElement('div');
            header.className = "flex justify-between mb-4 text-left";
            header.innerHTML = `<span class="font-bold text-lg text-gray-700 en-font">Q${idx+1}</span>`;

            const text = document.createElement('p');
            text.className = "text-lg font-semibold text-gray-800 mb-4 en-font";
            text.innerText = q.q;

            item.appendChild(header);
            item.appendChild(text);

            if(q.type === 'mcq') {
                const optsDiv = document.createElement('div');
                optsDiv.className = "grid grid-cols-1 md:grid-cols-2 gap-3 en-font";
                q.opts.forEach(opt => {
                    const btn = document.createElement('div');
                    btn.className = "p-3 bg-white border-2 border-gray-200 rounded-lg cursor-pointer hover:border-gray-400 transition flex items-center gap-3";
                    btn.innerHTML = `
                        <div class="w-5 h-5 rounded-full border-2 border-gray-300 flex-shrink-0 option-circle"></div>
                        <span class="select-none text-left">${opt}</span>
                    `;
                    btn.onclick = () => {
                        userAnswers[idx] = opt;
                        // Visual selection
                        Array.from(optsDiv.children).forEach(c => {
                            c.classList.remove('border-gray-800','bg-gray-100');
                            c.querySelector('.option-circle').classList.remove('bg-gray-800','border-gray-800');
                        });
                        btn.classList.add('border-gray-800','bg-gray-100');
                        btn.querySelector('.option-circle').classList.add('bg-gray-800','border-gray-800');
                    };
                    optsDiv.appendChild(btn);
                });
                item.appendChild(optsDiv);
            } else {
                const input = document.createElement('input');
                input.type = "text";
                input.className = "w-full p-3 border-2 border-gray-300 rounded-lg focus:border-gray-800 focus:outline-none en-font text-left";
                input.placeholder = "Type your answer here...";
                input.oninput = (e) => userAnswers[idx] = e.target.value;
                item.appendChild(input);
            }
            list.appendChild(item);
        });
    }

    function finishQuiz() {
        let score = 0;
        const total = currentQuestions.length;
        currentQuestions.forEach((q, idx) => {
            let uAns = userAnswers[idx];
            if(q.type === 'mcq') {
                if(uAns === q.ans) score++;
            } else {
                if(uAns && q.ans.toLowerCase().includes(uAns.toLowerCase().trim().substring(0, 5))) score++;
            }
        });

        const pct = (score/total)*100;
        let type = pct > 50 ? "success" : "error";
        let title = pct > 50 ? "Excellent Work!" : "Good Effort!";
        let msg = `Your Score: <span class="text-3xl font-bold block mt-2">${score} / ${total}</span>`;
        
        showModal(type, title, msg, [
            {text: "ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑŸÇÿßÿ¶ŸÖÿ©", action: "backToModels()"},
            {text: "ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©", action: "goToHome()"}
        ]);
    }

    // --- 4. SKILLS MENU ---
    function renderSkillsMenu() {
        document.getElementById('subject-title').innerText = "Writing Skills (Paragraphs)";
        document.getElementById('subject-sub').innerText = "ÿßÿÆÿ™ÿ± ÿßŸÑŸÖŸàÿ∂Ÿàÿπ ÿ´ŸÖ ÿßÿÆÿ™ÿ± ÿ∑ÿ±ŸäŸÇÿ© ÿßŸÑÿ™ÿØÿ±Ÿäÿ® ÿßŸÑŸÖŸÜÿßÿ≥ÿ®ÿ© ŸÑŸÉ:";
        const grid = document.getElementById('model-grid');
        grid.innerHTML = '';

        skillsData.forEach(item => {
            const card = document.createElement('div');
            card.className = 'bg-white p-6 rounded-3xl shadow-md border-l-8 border-pink-500 hover:shadow-xl transition flex flex-col justify-between';
            card.innerHTML = `
                <div>
                    <h3 class="font-bold text-lg mb-2 text-gray-800 leading-tight">${item.title}</h3>
                    <p class="text-xs text-gray-400 mb-6 truncate leading-relaxed">${item.text.substring(0,50)}...</p>
                </div>
                <div class="flex gap-3 mt-auto">
                    <button onclick="startReorderGame('${item.id}')" class="flex-1 bg-blue-50 text-blue-700 py-3 rounded-xl text-xs font-bold hover:bg-blue-600 hover:text-white transition border border-blue-200 shadow-sm">
                        ÿ™ÿ±ÿ™Ÿäÿ® ÿßŸÑÿ¨ŸÖŸÑ<br><span class="en-font font-normal">Reorder</span>
                    </button>
                    <button onclick="startPredictionGame('${item.id}')" class="flex-1 bg-purple-50 text-purple-700 py-3 rounded-xl text-xs font-bold hover:bg-purple-600 hover:text-white transition border border-purple-200 shadow-sm">
                        ÿ™ŸàŸÇÿπ ÿßŸÑÿ™ÿßŸÑŸä<br><span class="en-font font-normal">Predict</span>
                    </button>
                </div>
            `;
            grid.appendChild(card);
        });
        document.getElementById("mobile-back-btn").classList.add("hidden");
    }

    // --- 5. SKILLS GAMES ---
    // A) REORDER
    function startReorderGame(id) {
        setupQuizUI(id, "Reorder the Sentences (ÿ±ÿ™ÿ® ÿßŸÑÿ¨ŸÖŸÑ)");
        const item = skillsData.find(x => x.id === id);
        const sentences = splitIntoSentences(item.text);
        const shuffled = [...sentences].sort(() => Math.random() - 0.5);
        const list = document.getElementById('questions-list');
        addAudioButton(list, item.text);

        const dropZone = document.createElement('div');
        dropZone.className = "min-h-[140px] bg-gray-50 border-3 border-dashed border-gray-300 rounded-2xl p-6 space-y-3 transition-colors";
        dropZone.innerHTML = `<p class="text-gray-400 text-center text-sm pointer-events-none mt-2 font-semibold">ÿßÿ∂ÿ∫ÿ∑ ÿπŸÑŸâ ÿßŸÑÿ¨ŸÖŸÑ ŸÑÿ•ÿ∂ÿßŸÅÿ™Ÿáÿß ÿ®ÿßŸÑÿ™ÿ±ÿ™Ÿäÿ® üëá</p>`;
        list.appendChild(dropZone);

        const bank = document.createElement('div');
        bank.className = "flex flex-wrap gap-3 justify-center mt-6";
        shuffled.forEach(s => {
            const btn = document.createElement('button');
            btn.className = "bg-white border-2 border-gray-200 px-4 py-3 rounded-xl shadow-sm text-sm en-font hover:border-blue-500 hover:bg-blue-50 transition text-left leading-relaxed";
            btn.innerText = s;
            btn.onclick = () => {
                const p = dropZone.querySelector('p.text-gray-400'); if(p) p.remove();
                const ansRow = document.createElement('div');
                ansRow.className = "bg-white p-3 rounded-xl border-l-4 border-blue-500 shadow-sm flex justify-between items-start animate-fade-in en-font";
                ansRow.innerHTML = `<span class="text-sm text-gray-800">${s}</span>`;
                const del = document.createElement('button');
                del.innerHTML = "‚úï";
                del.className = "text-red-400 hover:text-red-600 font-bold ml-3 text-lg";
                del.onclick = () => { ansRow.remove(); btn.classList.remove('hidden'); };
                ansRow.appendChild(del);
                dropZone.appendChild(ansRow);
                btn.classList.add('hidden');
            };
            bank.appendChild(btn);
        });
        list.appendChild(bank);

        const checkBtn = document.createElement('button');
        checkBtn.className = "w-full mt-8 bg-gray-900 text-white font-bold py-4 rounded-xl shadow-lg hover:bg-black transition text-lg";
        checkBtn.innerText = "Check Order";
        checkBtn.onclick = () => {
            const userAns = Array.from(dropZone.querySelectorAll('div > span')).map(x => x.innerText);
            const isCorrect = JSON.stringify(userAns) === JSON.stringify(sentences);
            handleSkillResult(isCorrect, id);
        };
        list.appendChild(checkBtn);
    }

    // B) PREDICT
    function startPredictionGame(id) {
        setupQuizUI(id, "Select Next Sentence (ÿßÿÆÿ™ÿ± ÿßŸÑÿ¨ŸÖŸÑÿ© ÿßŸÑÿ™ÿßŸÑŸäÿ©)");
        const item = skillsData.find(x => x.id === id);
        const sentences = splitIntoSentences(item.text);
        const list = document.getElementById('questions-list');
        let currentIndex = 0;

        const storyContainer = document.createElement('div');
        storyContainer.className = "bg-yellow-50 p-6 rounded-2xl border-2 border-yellow-200 min-h-[120px] mb-6 en-font text-lg leading-loose shadow-inner text-gray-800";
        storyContainer.innerHTML = `<span class="font-bold text-blue-700 bg-blue-100 px-1 rounded">${sentences[0]}</span>`; 
        list.appendChild(storyContainer);

        const optionsContainer = document.createElement('div');
        optionsContainer.className = "grid grid-cols-1 gap-4";
        list.appendChild(optionsContainer);

        function renderNextStep() {
            optionsContainer.innerHTML = '';
            if(currentIndex + 1 >= sentences.length) {
                handleSkillResult(true, id);
                return;
            }
            const correctSentence = sentences[currentIndex + 1];
            let randomItem = skillsData[Math.floor(Math.random() * skillsData.length)];
            while(randomItem.id === id) { randomItem = skillsData[Math.floor(Math.random() * skillsData.length)]; }
            let randomSentences = splitIntoSentences(randomItem.text);
            let distractor = randomSentences[Math.floor(Math.random() * randomSentences.length)];
            let opts = [correctSentence, distractor].sort(() => Math.random() - 0.5);

            opts.forEach(opt => {
                const btn = document.createElement('button');
                btn.className = "bg-white border-2 border-gray-200 p-5 rounded-2xl text-left hover:border-gray-800 hover:shadow-md transition en-font text-gray-700 font-medium leading-relaxed";
                btn.innerText = opt;
                btn.onclick = () => {
                    if(opt === correctSentence) {
                        speak("Correct");
                        currentIndex++;
                        storyContainer.innerHTML += ` <span class="animate-fade-in border-b-2 border-green-200 pb-1">${correctSentence}</span>`;
                        renderNextStep();
                    } else {
                        btn.classList.add('bg-red-50', 'border-red-500', 'text-red-700');
                        speak("Try again");
                        setTimeout(() => btn.classList.remove('bg-red-50', 'border-red-500', 'text-red-700'), 1000);
                    }
                };
                optionsContainer.appendChild(btn);
            });
        }
        renderNextStep();
    }

    // --- 6. UNIVERSAL MODAL SYSTEM (REPLACES ALERTS) ---
    function showModal(type, title, message, buttons) {
        const modal = document.getElementById('universal-modal');
        const content = document.getElementById('modal-content');
        modal.classList.remove('hidden');

        let icon = '';
        let colorClass = '';

        if(type === 'success') { icon = 'üåü'; colorClass = 'text-green-600'; }
        else if(type === 'error') { icon = 'üí™'; colorClass = 'text-orange-500'; }
        else if(type === 'info') { icon = '‚ÑπÔ∏è'; colorClass = 'text-blue-500'; }

        let btnsHTML = buttons.map(b => 
            `<button onclick="${b.action}" class="w-full bg-gray-100 hover:bg-gray-200 text-gray-800 py-3 rounded-xl font-bold mb-2 shadow-sm border border-gray-200">${b.text}</button>`
        ).join('');

        content.innerHTML = `
            <div class="text-6xl mb-4 animate-bounce">${icon}</div>
            <h2 class="text-3xl font-extrabold ${colorClass} mb-2 en-font">${title}</h2>
            <div class="text-gray-500 mb-6 font-semibold leading-relaxed">${message}</div>
            <div class="space-y-2">
                ${btnsHTML}
            </div>
        `;
    }

    function closeModal() {
        document.getElementById('universal-modal').classList.add('hidden');
    }

    // Helper to map skill result to modal
    function handleSkillResult(isSuccess, currentId) {
        if(isSuccess) {
            speak("Excellent Work!");
            // Find next
            const currIdx = skillsData.findIndex(x => x.id === currentId);
            let btns = [
                {text: "ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑŸÇÿßÿ¶ŸÖÿ©", action: "closeModal(); backToModels()"},
                {text: "ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©", action: "goToHome()"}
            ];
            // Add "Next" if available
            if(currIdx < skillsData.length - 1) {
                // Here we actually just go back to menu but user feels progression
                btns.unshift({text: "ÿßŸÑÿ™ÿØÿ±Ÿäÿ® ÿπŸÑŸâ ÿßŸÑŸÖŸàÿ∂Ÿàÿπ ÿßŸÑÿ™ÿßŸÑŸä ‚û°", action: "closeModal(); renderSkillsMenu()"});
            }
            showModal("success", "Excellent Work!", "ÿ£ÿ≠ÿ≥ŸÜÿ™! ÿ•ÿ¨ÿßÿ®ÿ© ŸÖŸÖÿ™ÿßÿ≤ÿ©", btns);
        } else {
            speak("Keep practicing!");
            showModal("error", "Keep Practicing!", "ÿ≠ÿßŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâÿå ÿ£ŸÜÿ™ ÿ™ÿ≥ÿ™ÿ∑Ÿäÿπ!", [
                {text: "ÿ≠ÿßŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ ‚Ü∫", action: "closeModal()"},
                {text: "ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑŸÇÿßÿ¶ŸÖÿ©", action: "closeModal(); backToModels()"}
            ]);
        }
    }

    // --- UTILS ---
    function setupQuizUI(id, title) {
        document.getElementById('model-section').classList.add('hidden');
        document.getElementById('quiz-section').classList.remove('hidden');
        document.getElementById('quiz-title').innerText = title;
        document.getElementById('text-back-btn').classList.remove('hidden');
        document.getElementById("mobile-back-btn").classList.remove("hidden");
        document.getElementById('main-submit-btn').classList.add('hidden');
        document.getElementById('questions-list').innerHTML = '';
    }

    function splitIntoSentences(text) {
        return text.match( /[^\.!\?]+[\.!\?]+/g ).map(s => s.trim());
    }

    function addAudioButton(container, text) {
        const div = document.createElement('div');
        div.className = "flex justify-center mb-6";
        div.innerHTML = `
            <button onclick="speak('${text.replace(/'/g,"\\'")}')" class="bg-gray-900 text-white px-6 py-2 rounded-full flex items-center gap-2 shadow-lg hover:scale-105 transition">
                <span>üîä ÿßÿ≥ÿ™ŸÖÿßÿπ ŸÑŸÑŸÜÿµ (Listen)</span>
            </button>
        `;
        container.appendChild(div);
    }

    function speak(txt) {
        if('speechSynthesis' in window) {
            window.speechSynthesis.cancel();
            const u = new SpeechSynthesisUtterance(txt);
            u.lang = 'en-US';
            u.rate = 0.9;
            window.speechSynthesis.speak(u);
        }
    }

    function backToModels() {
        closeModal();
        document.getElementById('quiz-section').classList.add('hidden');
        document.getElementById('model-section').classList.remove('hidden');
        if(currentSection === 'skills') renderSkillsMenu();
    }
    
    function startFromIntro(){
        document.getElementById('intro-overlay').classList.add('hidden');
    }
    function skipIntro(){
        document.getElementById('intro-overlay').classList.add('hidden');
    }

</script>
</body>
</html>